###########################
# NSB Soviet Events
###########################

add_namespace = NSB_soviet_paranoia_system_events
add_namespace = NSB_soviet_propaganda_capmaign_events
add_namespace = NSB_soviet_foreign_politics_events
add_namespace = NSB_soviet_academy_of_sciences
add_namespace = NSB_soviet_atomic_bomb_project
add_namespace = NSB_soviet_five_year_plan
add_namespace = NSB_soviet_great_patriotic_war
add_namespace = NSB_soviet_soviet_german_trade_agreement
add_namespace = NSB_soviet_policies_of_collective_security
add_namespace = NSB_soviet_comecon
add_namespace = NSB_soviet_spanish_civil_war
add_namespace = NSB_soviet_planned_economy
add_namespace = NSB_Soviet_fascist_civil_war
add_namespace = NSB_soviet_communist_civil_war
add_namespace = NSB_soviet_permanent_revolution
add_namespace = NSB_soviet_for_the_common_good
add_namespace = NSB_soviet_civil_war_common
add_namespace = NSB_soviet_fascist_tsarist
add_namespace = NSB_soviet_nationalist


#########################
### INTRO TO PARANOIA ###
#########################


###################
### ARMY PURGES ###
###################




########  ########   #######  ########     ###     ######      ###    ##    ## ########     ###    
##     ## ##     ## ##     ## ##     ##   ## ##   ##    ##    ## ##   ###   ## ##     ##   ## ##   
##     ## ##     ## ##     ## ##     ##  ##   ##  ##         ##   ##  ####  ## ##     ##  ##   ##  
########  ########  ##     ## ########  ##     ## ##   #### ##     ## ## ## ## ##     ## ##     ## 
##        ##   ##   ##     ## ##        ######### ##    ##  ######### ##  #### ##     ## ######### 
##        ##    ##  ##     ## ##        ##     ## ##    ##  ##     ## ##   ### ##     ## ##     ## 
##        ##     ##  #######  ##        ##     ##  ######   ##     ## ##    ## ########  ##     ## 


########  #######  ########  ######## ####  ######   ##    ##    ########   #######  ##       #### ######## ####  ######   ######  
##       ##     ## ##     ## ##        ##  ##    ##  ###   ##    ##     ## ##     ## ##        ##     ##     ##  ##    ## ##    ## 
##       ##     ## ##     ## ##        ##  ##        ####  ##    ##     ## ##     ## ##        ##     ##     ##  ##       ##       
######   ##     ## ########  ######    ##  ##   #### ## ## ##    ########  ##     ## ##        ##     ##     ##  ##        ######  
##       ##     ## ##   ##   ##        ##  ##    ##  ##  ####    ##        ##     ## ##        ##     ##     ##  ##             ## 
##       ##     ## ##    ##  ##        ##  ##    ##  ##   ###    ##        ##     ## ##        ##     ##     ##  ##    ## ##    ## 
##        #######  ##     ## ######## ####  ######   ##    ##    ##         #######  ######## ####    ##    ####  ######   ######  

# SOV is pressuring our government - Event for Targeted country ### (ITA uses this too)
country_event = {
	id = NSB_soviet_foreign_politics_events.1
	title = NSB_soviet_foreign_politics_events.1.t
	desc = NSB_soviet_foreign_politics_events.1.desc
	picture = "[GetPressureGovernmentGFX]"

	is_triggered_only = yes
	option = { #Join Faction - Keep government
		name = NSB_soviet_foreign_politics_events.1.a

		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				strength_ratio = {
					tag = FROM
					ratio < 0.5
				}
			}
			modifier = {
				factor = 4
				strength_ratio = {
					tag = FROM
					ratio < 0.2
				}
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value > 75
				}
			}
			modifier = { #Appropriate PC for Foreign Affairs
				factor = 2
				OR = {
					FROM = {
						original_tag = SOV
						has_idea = SOV_maksim_litvinov
					}
					FROM = { ITA_has_foreign_affairs_or_nice_guy_hired = yes }
				}
			}
			modifier = {
				factor = 0
				OR = {
					is_in_faction = yes
					is_subject = yes
				}
			}
		}

		trigger = {
			NOT = { is_in_faction_with = FROM }
		}

		FROM = { add_to_faction = ROOT }
		add_opinion_modifier = {
			target = FROM
			modifier = SOV_pressured_our_government
		}
		hidden_effect = {
			country_event = { id = NSB_soviet_foreign_politics_events.151 hours = 1 }
		}
	}

	option = { #Change Government
		name = NSB_soviet_foreign_politics_events.1.b

		ai_chance = {
			base = 10
			modifier = {
				factor = 5
				OR = {
					FROM = {
						has_government = communism
						communism > 0.5
					}
					FROM = {
						has_government = democratic
						democratic > 0.5
					}
					FROM = {
						has_government = fascism
						fascism > 0.5
					}
					FROM = {
						has_government = neutrality
						neutrality > 0.5
					}
					FROM = {
						has_government = monarchist
						neutrality > 0.5
					}
				}
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value > 75
				}
			}
			modifier = { #Appropriate PC for Foreign Affairs
				factor = 2
				OR = {	
					FROM = {
						original_tag = SOV
						has_idea = SOV_vyacheslav_molotov
					}
					FROM = { ITA_has_foreign_affairs_or_nice_guy_hired = yes }
				}
			}
			modifier = {
				factor = 0
				OR = {
					is_in_faction = yes
					is_subject = yes
				}
			}
		}

		trigger = {
			NOT = { has_government = FROM }
		}

		set_politics = { ruling_party = FROM }
		add_opinion_modifier = {
			target = FROM
			modifier = SOV_pressured_our_government
		}
		hidden_effect = {
			country_event = { id = NSB_soviet_foreign_politics_events.158 hours = 1 }
		}
	}

	option = { #REFUSE
		name = NSB_soviet_foreign_politics_events.1.c

		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				any_country = {
					is_major = yes
					has_guaranteed = ROOT
				}
			}
			modifier = {
				factor = 1.2
				any_country = {
					is_major = no
					has_guaranteed = ROOT
				}
			}
		}

		add_popularity = {
			ideology = FROM
			popularity = 0.05
		}
		add_opinion_modifier = {
			target = FROM
			modifier = SOV_pressured_our_government
		}
		hidden_effect = {
			country_event = { id = NSB_soviet_foreign_politics_events.152 hours = 1 }
		}
	}
}

# SOV is promoting ideology rallies - Event for Targeted country ### (ITA uses this too)
country_event = {
	id = NSB_soviet_foreign_politics_events.2
	title = NSB_soviet_foreign_politics_events.2.t
	desc = NSB_soviet_foreign_politics_events.2.desc
	picture = "[GetPromotingIdeologyGFX]"

	is_triggered_only = yes

	option = { #OK
		name = NSB_soviet_foreign_politics_events.2.a

		ai_chance = {
			base = 1
			modifier = {
				factor = 2
				strength_ratio = {
					tag = FROM
					ratio < 0.5
				}
			}
			modifier = {
				factor = 5
				strength_ratio = {
					tag = FROM
					ratio < 0.2
				}
			}
			modifier = {
				factor = 1.5
				has_opinion = {
					target = FROM
					value > 75
				}
			}
			modifier = {
				factor = 0
				OR = {
					is_in_faction = yes
					is_subject = yes
				}
			}
			modifier = { #Appropriate PC for Foreign Affairs
				factor = 2
				OR = {
					FROM = {
						original_tag = SOV
						has_idea = SOV_maksim_litvinov
					}
					FROM = { ITA_has_foreign_affairs_or_nice_guy_hired = yes }
				}
			}
		}

		hidden_effect = { #Country is slightly more willing to cooperate with Soviets
			if = {
				limit = {
					FROM = {
						original_tag = SOV
					}
				}
				add_ai_strategy = {
					type = befriend
					id = SOV			
					value = 10
				}
				add_ai_strategy = {
					type = alliance
					id = SOV			
					value = 10
				}
			}
			else_if = {
				limit = {
					FROM = {
						original_tag = ITA
					}
				}
				add_ai_strategy = {
					type = befriend
					id = ITA			
					value = 10
				}
				add_ai_strategy = {
					type = alliance
					id = ITA			
					value = 10
				}
			}
		}

		add_popularity = {
			ideology = FROM
			popularity = 0.1
		}
		add_opinion_modifier = {
			target = FROM
			modifier = SOV_stirring_the_masses
		}
	}

	option = { #Prevent it!
		name = NSB_soviet_foreign_politics_events.2.b

		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				has_political_power < 70
			}
		}

		trigger = {
			NOT = { has_government = FROM }
		}

		add_political_power = -70
		add_stability = -0.05
		add_popularity = {
			ideology = ROOT
			popularity = 0.1
		}
		add_opinion_modifier = {
			target = FROM
			modifier = SOV_stirring_the_masses
		}
	}
}


# SOV is investing in developing our country - Event for minor Asian allies


# SOV wants us to follow war measures - Event for minor Asian allies

# SOV wants to fortify our border with JAP - Event for MON


# Our ally rejects our guidelines - Event for SOV (when any of the three events above are refused by a PLAYER)


# SOV demands Alaska - Event for USA (or Alaska's owner)
country_event = {
	id = NSB_soviet_foreign_politics_events.30
	title = NSB_soviet_foreign_politics_events.30.t
	desc = NSB_soviet_foreign_politics_events.30.desc
	picture = GFX_report_event_SOV_demands

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_pressured_our_government
			}
		}
	}
			
	option = { #Accept
		name = NSB_soviet_foreign_politics_events.30.a
		
		ai_chance = {
			base = 1
			modifier = {
				factor = 10
				NOT = { is_in_faction_with = FROM }
				strength_ratio = {
					tag = FROM
					ratio < 0.6
				}
			}
			modifier = {
				factor = 5
				NOT = { is_in_faction_with = FROM }
				alliance_strength_ratio < 0.6
			}
			modifier = {
				factor = 100
				is_subject_of = FROM
			}
			modifier = {
				factor = 10
				is_in_faction_with = FROM
				has_opinion = {
					target = FROM
					value > 75
				}
			}
			modifier = { #Appropriate PC for Foreign Affairs
				factor = 1.2
				SOV = { has_idea = SOV_maksim_litvinov }
			}
			modifier = { #Appropriate PC for Foreign Affairs
				factor = 0.8
				SOV = { has_idea = SOV_vyacheslav_molotov }
			}
			modifier = {
				factor = 0.5
				NOT = { is_in_faction_with = FROM }
				strength_ratio = {
					tag = FROM
					ratio > 0.8
				}
			}
			modifier = {
				factor = 0
				NOT = { is_in_faction_with = FROM }
				strength_ratio = {
					tag = FROM
					ratio > 1
				}
			}
		}

		FROM = {
			effect_tooltip = {
				if = {
					limit = {
						ROOT = { controls_state = 463 }
					}
					transfer_state = 463 #ALASKA
				}
				if = {
					limit = {
						ROOT = { controls_state = 650 }
					}
					transfer_state = 650 #ATTU ISLAND
				}
				add_opinion_modifier = {
					target = ROOT
					modifier = SOV_complied_with_our_demands
				}
			}
			hidden_effect = {
				country_event = NSB_soviet_foreign_politics_events.31
			}
		}	
	}

	option = { #Refuse
		name = NSB_soviet_foreign_politics_events.30.b
		
		ai_chance = {
			base = 10
		}

		FROM = {
			effect_tooltip = {
				add_opinion_modifier = {
					target = ROOT
					modifier = SOV_rejected_our_demands
				}
				create_wargoal = {
					type = puppet_wargoal_focus
					target = ROOT
				}
			}
			hidden_effect = {
				country_event = NSB_soviet_foreign_politics_events.32
			}
		}
	}
}

# USA cedes Alaska - Event for SOV
country_event = {
	id = NSB_soviet_foreign_politics_events.31
	title = NSB_soviet_foreign_politics_events.31.t
	desc = NSB_soviet_foreign_politics_events.31.desc
	picture = GFX_report_event_generic_usa_treaty

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_complied_with_our_demands
			}
		}
	}

	option = { #Ok
		name = NSB_soviet_foreign_politics_events.31.a
		
		if = {
			limit = {
				FROM = { controls_state = 463 }
			}
			transfer_state = 463 #ALASKA
		}
		if = {
			limit = {
				FROM = { controls_state = 650 }
			}
			transfer_state = 650 #ATTU ISLAND
		}
		
		effect_tooltip = {
			FROM = {
				add_opinion_modifier = {
					target = ROOT
					modifier = SOV_pressured_our_government
				}
			}
		}
	}
}

# USA refuses to cede Alaska - Event for SOV
country_event = {
	id = NSB_soviet_foreign_politics_events.32
	title = NSB_soviet_foreign_politics_events.32.t
	desc = NSB_soviet_foreign_politics_events.32.desc
	picture = GFX_report_event_generic_usa_treaty

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_rejected_our_demands
			}
		}
	}

	option = { #WAAAAAGH!
		name = NSB_soviet_foreign_politics_events.32.a

		ai_chance = {
			base = 10
			modifier = {
				factor = 5
				strength_ratio = {
					tag = FROM
					ratio > 1
				}
			}
			modifier = {
				factor = 2
				has_war = yes
				alliance_strength_ratio > 0.8
			}
			modifier = { #Appropriate PC for Foreign Affairs
				factor = 1.2
				SOV = { has_idea = SOV_vyacheslav_molotov }
			}
			modifier = { #Appropriate PC for Foreign Affairs
				factor = 0.8
				SOV = { has_idea = SOV_maksim_litvinov }
			}
			modifier = {
				factor = 0.5
				is_in_faction_with = FROM
				has_opinion = {
					target = FROM
					value > 75
				}
			}
			modifier = {
				factor = 0.5
				strength_ratio = {
					tag = FROM
					ratio < 0.8
				}
			}
			modifier = {
				factor = 0
				is_in_faction_with = FROM
			}
		}
		
		create_wargoal = {
			type = puppet_wargoal_focus
			target = FROM
		}
	}

	option = { #Leave it be
		name = NSB_soviet_foreign_politics_events.32.b

		ai_chance = {
			base = 10
		}
	}
}

# Country becomes a puppet - Event for SOV ### (ITA uses this too)
country_event = {
	id = NSB_soviet_foreign_politics_events.150
	title = NSB_soviet_foreign_politics_events.150.t
	desc = NSB_soviet_foreign_politics_events.150.desc
	picture = "[GetCountryBecomesPuppetGFX]"

	is_triggered_only = yes
			
	option = { #Cool
		name = NSB_soviet_foreign_politics_events.150.a
		effect_tooltip = {
			set_politics = { ruling_party = ROOT }
			puppet = FROM
			add_to_faction = FROM
		}
	}
}

# Country joins faction - Event for SOV ### (ITA uses this too)
country_event = {
	id = NSB_soviet_foreign_politics_events.151
	title = NSB_soviet_foreign_politics_events.151.t
	desc = NSB_soviet_foreign_politics_events.151.desc
	picture = "[GetCountryBecomesPuppetGFX]"

	is_triggered_only = yes
			
	option = { #Okay
		name = NSB_soviet_foreign_politics_events.151.a
		effect_tooltip = {
			add_to_faction = FROM
			FROM = {
				add_opinion_modifier = {
					target = ROOT
					modifier = SOV_pressured_our_government
				}
			}
		}
	}
}

# Country changes government - Event for SOV ### (ITA uses this too)
country_event = {
	id = NSB_soviet_foreign_politics_events.158
	title = NSB_soviet_foreign_politics_events.158.t
	desc = NSB_soviet_foreign_politics_events.158.desc
	picture = "[GetCountryChangesGovernmentGFX]"

	is_triggered_only = yes

	option = { #Okay
		name = NSB_soviet_foreign_politics_events.158.a
		effect_tooltip = {
			FROM = {
				set_politics = { ruling_party = ROOT }
				add_opinion_modifier = {
					target = ROOT
					modifier = SOV_pressured_our_government
				}
			}
		}
	}
}

# Country refuses - Event for SOV ### (ITA uses this too)
country_event = {
	id = NSB_soviet_foreign_politics_events.152
	title = NSB_soviet_foreign_politics_events.152.t
	desc = NSB_soviet_foreign_politics_events.152.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes
			
	option = { #Okay - Default generic option
		name = NSB_soviet_foreign_politics_events.152.a

		ai_chance = {
			base = 1
		}

		trigger = {
			NOT = {
				FROM = { original_tag = PER }
				ROOT = { original_tag = SOV }
			}
		}

		if = {
			limit = {
				NOT = {
					is_in_faction_with = FROM
				}
			}
			if = {
				limit = {
					OR = {
						has_government = fascism
						has_government = neutrality
					}
				}
				create_wargoal = {
					type = annex_everything
					target = FROM
				}
			}
			else = {
				create_wargoal = {
					type = puppet_wargoal_focus
					target = FROM
				}
			} 
		}

		effect_tooltip = {
			FROM = {
				add_opinion_modifier = {
					target = ROOT
					modifier = SOV_pressured_our_government
				}
			}
		}
	}

	option = { #Respect
		name = NSB_soviet_foreign_politics_events.152.b
		
		ai_chance = {
			base = 0
			modifier = {
				add = 1
				FROM = { original_tag = PER }
				original_tag = SOV
			}
		}
	}

	option = { #Make Preparations -> Iran
		name = NSB_soviet_foreign_politics_events.152.c

		trigger = {
			FROM = { original_tag = PER }
			original_tag = SOV
			is_subject = no
		}

		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				OR = {
					strength_ratio = {
						tag = FROM
						ratio < 0.6
					}
					surrender_progress > 0.25
				}
			}
		}

		set_global_flag = SOV_soviet_invasion_of_iran_flag
		
		activate_mission = SOV_preparations_for_operation_countenance
		custom_effect_tooltip = SOV_preparations_for_operation_countenance_tt

		custom_effect_tooltip = SOV_operation_countenance_successful_tt
		effect_tooltip = {
			puppet = PER
			transfer_state = 419 #Tibriz (AZB)
			transfer_state = 420 #Gilan (AZB)
			transfer_state = 416 #Khorasan
			PER = {
				give_resource_rights = { receiver = SOV state = 411 }
				give_resource_rights = { receiver = SOV state = 412 }
				give_resource_rights = { receiver = SOV state = 413 }
			}
		}
	}

	option = { #Joint Invasion with ENG -> Iran
		name = NSB_soviet_foreign_politics_events.152.d

		trigger = {
			FROM = { original_tag = PER }
			original_tag = SOV
			is_subject = no
			country_exists = ENG
			NOT = { has_war_with = ENG }
			NOT = { is_justifying_wargoal_against = ENG }
		}

		ai_chance = {
			base = 10
			modifier = {
				factor = 100
				is_in_faction_with = ENG
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value > -25
				}
			}
			modifier = {
				factor = 5
				has_opinion = {
					target = FROM
					value > 50
				}
			}
			modifier = {
				factor = 0
				OR = {
					strength_ratio = {
						tag = FROM
						ratio < 0.6
					}
					surrender_progress > 0.25
				}
			}
		}

		ENG = { country_event = { id = NSB_soviet_foreign_politics_events.153 hours = 6 random_hours = 3 } }

		effect_tooltip = {
			custom_effect_tooltip = if_they_accept_tt
			activate_mission = SOV_preparations_for_operation_countenance
			ENG = { activate_mission = SOV_preparations_for_operation_countenance }
			custom_effect_tooltip = SOV_preparations_for_operation_countenance_tt

			custom_effect_tooltip = SOV_operation_countenance_successful_tt
			ENG = {
				puppet = PER
			}
			SOV = {
				transfer_state = 419 #Tibriz (AZB)
				transfer_state = 420 #Gilan (AZB)
				transfer_state = 416 #Khorasan
			}
			PER = {
				give_resource_rights = { receiver = SOV state = 411 }
				give_resource_rights = { receiver = SOV state = 412 }
				give_resource_rights = { receiver = ENG state = 413 }
				give_military_access = SOV
			}

			custom_effect_tooltip = if_they_refuse_tt
			activate_mission = SOV_preparations_for_operation_countenance
			custom_effect_tooltip = SOV_operation_countenance_successful_tt
			puppet = PER
			transfer_state = 419 #Tibriz (AZB)
			transfer_state = 420 #Gilan (AZB)
			transfer_state = 416 #Khorasan
			PER = {
				give_resource_rights = { receiver = SOV state = 411 }
				give_resource_rights = { receiver = SOV state = 412 }
				give_resource_rights = { receiver = SOV state = 413 }
			}
		}
	}
}

# Anglo-Soviet Invasion of Iran proposal - Event for ENG
country_event = {
	id = NSB_soviet_foreign_politics_events.153
	title = NSB_soviet_foreign_politics_events.153.t
	desc = NSB_soviet_foreign_politics_events.153.desc
	picture = GFX_report_event_stalin_meeting

	is_triggered_only = yes
			
	option = { #Agree
		name = NSB_soviet_foreign_politics_events.153.a

		ai_chance = {
			base = 10
			modifier = {
				factor = 100
				is_in_faction_with = FROM
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value > -25
				}
			}
			modifier = {
				factor = 5
				has_opinion = {
					target = FROM
					value > 50
				}
			}
			modifier = {
				factor = 0
				OR = {
					NOT = {
						any_enemy_country = {
							is_major = yes
							has_war_with = FROM
						}
					}
					has_war_with = PER
					has_guaranteed = PER
					has_non_aggression_pact_with = PER
					is_in_faction_with = PER
					is_subject = yes
					strength_ratio = {
						tag = FROM
						ratio < 0.6
					}
					surrender_progress > 0.5
				}
			}
		}
		
		set_global_flag = SOV_agreed_anglo_soviet_invasion_of_iran_flag

		effect_tooltip = {
			activate_mission = SOV_preparations_for_operation_countenance
			custom_effect_tooltip = SOV_preparations_for_operation_countenance_tt

			custom_effect_tooltip = SOV_operation_countenance_successful_tt
			puppet = PER
			SOV = {
				transfer_state = 419 #Tibriz (AZB)
				transfer_state = 420 #Gilan (AZB)
				transfer_state = 416 #Khorasan
			}
			PER = {
				give_resource_rights = { receiver = SOV state = 411 }
				give_resource_rights = { receiver = SOV state = 412 }
				give_resource_rights = { receiver = ENG state = 413 }
				give_military_access = SOV
			}
		}

		FROM = { country_event = { id = NSB_soviet_foreign_politics_events.154 hours = 1 } }
	}

	option = { #Reject
		name = NSB_soviet_foreign_politics_events.153.b

		ai_chance = {
			base = 1
		}

		custom_effect_tooltip = NSB_soviet_foreign_politics_events.153_soviets_alone_tt
		hidden_effect = {
			FROM = { country_event = { id = NSB_soviet_foreign_politics_events.155 hours = 4 } }
			set_global_flag = SOV_soviet_invasion_of_iran_flag
		}
	}
}

# Anglo-Soviet Invasion of Iran - ENG ACCEPTS - Event for SOV
country_event = {
	id = NSB_soviet_foreign_politics_events.154
	title = NSB_soviet_foreign_politics_events.154.t
	desc = NSB_soviet_foreign_politics_events.154.desc
	picture = GFX_report_event_british_inspect_troops

	is_triggered_only = yes
			
	option = { #Good
		name = NSB_soviet_foreign_politics_events.154.a

		activate_mission = SOV_preparations_for_operation_countenance		
		ENG = { activate_mission = SOV_preparations_for_operation_countenance }
		custom_effect_tooltip = SOV_preparations_for_operation_countenance_tt

		effect_tooltip = {
			custom_effect_tooltip = SOV_operation_countenance_successful_tt
			ENG = {
				puppet = PER
			}
			transfer_state = 419 #Tibriz (AZB)
			transfer_state = 420 #Gilan (AZB)
			transfer_state = 416 #Khorasan
			PER = {
				give_resource_rights = { receiver = SOV state = 411 }
				give_resource_rights = { receiver = SOV state = 412 }
				give_resource_rights = { receiver = ENG state = 413 }
				give_military_access = SOV
			}
		}
	}
}

# Anglo-Soviet Invasion of Iran - ENG REFUSES - Event for SOV
country_event = {
	id = NSB_soviet_foreign_politics_events.155
	title = NSB_soviet_foreign_politics_events.155.t
	desc = NSB_soviet_foreign_politics_events.155.desc
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes
	
	option = { #Ok
		name = NSB_soviet_foreign_politics_events.155.a

		activate_mission = SOV_preparations_for_operation_countenance
		custom_effect_tooltip = SOV_preparations_for_operation_countenance_tt

		effect_tooltip = {
			custom_effect_tooltip = SOV_operation_countenance_successful_tt
			puppet = PER
			transfer_state = 419 #Tibriz (AZB)
			transfer_state = 420 #Gilan (AZB)
			transfer_state = 416 #Khorasan
			PER = {
				give_resource_rights = { receiver = SOV state = 411 }
				give_resource_rights = { receiver = SOV state = 412 }
				give_resource_rights = { receiver = SOV state = 413 }
			}
		}
	}
}

# HIDDEN EVENT TO MANAGE THE FALL OF IRAN - ONLY SOVIETS
country_event = {
	id = NSB_soviet_foreign_politics_events.156

	is_triggered_only = yes

	hidden = yes

	immediate = {
		transfer_state = 419 #Tibriz (AZB)
		transfer_state = 420 #Gilan (AZB)
		transfer_state = 416 #Khorasan
		PER = {
			give_resource_rights = { receiver = SOV state = 411 }
			give_resource_rights = { receiver = SOV state = 412 }
			give_resource_rights = { receiver = SOV state = 413 }
		}
		411 = { set_state_flag = SOV_soviet_resource_rights_iran_flag }
		412 = { set_state_flag = SOV_soviet_resource_rights_iran_flag }
		413 = { set_state_flag = SOV_soviet_resource_rights_iran_flag }
	}
}

# HIDDEN EVENT TO MANAGE THE FALL OF IRAN - JOINT INVASION
country_event = {
	id = NSB_soviet_foreign_politics_events.157

	is_triggered_only = yes

	hidden = yes

	immediate = {
		transfer_state = 419 #Tibriz (AZB)
		transfer_state = 420 #Gilan (AZB)
		transfer_state = 416 #Khorasan
		PER = {
			give_resource_rights = { receiver = SOV state = 411 }
			give_resource_rights = { receiver = SOV state = 412 }
			give_resource_rights = { receiver = ENG state = 413 }
			give_military_access = ROOT
		}
		411 = { set_state_flag = SOV_soviet_resource_rights_iran_flag }
		412 = { set_state_flag = SOV_soviet_resource_rights_iran_flag }
		413 = { set_state_flag = SOV_british_resource_rights_iran_flag }
	}
}

# Generic Ultimatum - Event for target ### (ITA uses this too)
country_event = {
	id = NSB_soviet_foreign_politics_events.200
	title = NSB_soviet_foreign_politics_events.200.t
	desc = NSB_soviet_foreign_politics_events.200.desc
	picture = "[GetUltimatumGFX]"

	is_triggered_only = yes
		
	option = { # Become a puppet
		name = NSB_soviet_foreign_politics_events.200.a

		ai_chance = {
			base = 2
			modifier = {
				factor = 1.5
				has_opinion = {
					target = FROM
					value > 75
				}
			}
			modifier = {
				factor = 1.5
				OR = {
					AND = {
						FROM = {
							has_government = communism
						}
						communism > 0.5
					}
					AND = {
						FROM = {
							has_government = democratic
						}
						democratic > 0.5
					}
					AND = {
						FROM = {
							has_government = fascism
						}
						fascism > 0.5
					}
					AND = {
						FROM = {
							has_government = neutrality
						}
						neutrality > 0.5
					}
					AND = {
						FROM = {
							has_government = monarchist
						}
						neutrality > 0.5
					}
				}
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = FROM
					ratio < 0.8
				}
			}
			modifier = {
				factor = 4
				strength_ratio = {
					tag = FROM
					ratio < 0.5
				}
			}
			modifier = {
				factor = 6
				strength_ratio = {
					tag = FROM
					ratio < 0.2
				}
			}
			modifier = {
				factor = 100
				is_in_faction_with = FROM
			}
			modifier = { #Appropriate PC for Foreign Affairs
				factor = 1.5
				OR = {
					FROM = {
						original_tag = SOV
						has_idea = SOV_vyacheslav_molotov
					}
					FROM = { ITA_has_foreign_affairs_or_nice_guy_hired = yes }
				}
			}
			modifier = {
				factor = 0
				OR = {
					AND = {
						is_in_faction = yes
						NOT = { is_in_faction_with = FROM }
					}
					AND = {
						is_subject = yes
						NOT = { is_subject_of = FROM }
					}
				}
			}
		}

		trigger = {
			OR = {
				has_government = FROM
				FROM = {	
					original_tag = ITA
				}
			}
		}

		set_politics = { ruling_party = FROM }
		FROM = {
			puppet = ROOT
			add_to_faction = ROOT
			hidden_effect = {
				country_event = { id = NSB_soviet_foreign_politics_events.150 hours = 1 }
			}
		}
	}

	option = { #Join Faction - Keep government
		name = NSB_soviet_foreign_politics_events.200.b

		ai_chance = {
			base = 0
		}

		trigger = {
			FROM = { is_in_faction = yes }
		}

		FROM = {
			add_to_faction = ROOT
			hidden_effect = {
				country_event = { id = NSB_soviet_foreign_politics_events.151 hours = 1 }
			}
		}
		hidden_effect = {
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_pressured_our_government
			}
		}
	}

	option = { #REFUSE
		name = NSB_soviet_foreign_politics_events.200.c

		ai_chance = {
			base = 10

			modifier = {
				factor = 0.1
				FROM = {
					original_tag = ITA
					NOT = {
						has_government = ROOT
					}
				}
				is_in_faction = no
			}
		}


		FROM = {
			effect_tooltip = {
				if = {
					limit = {
						NOT = {
							is_in_faction_with = ROOT
						}
					}
					if = {
						limit = {
							OR = {
								has_government = fascism
								has_government = neutrality
							}
						}
						create_wargoal = {
							type = annex_everything
							target = ROOT
						}
					}
				}
				else = {
					create_wargoal = {
						type = puppet_wargoal_focus
						target = ROOT
					}
				} 
			}
			hidden_effect = {
				country_event = { id = NSB_soviet_foreign_politics_events.152 hours = 1 }
			}
		}

		hidden_effect = {
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_pressured_our_government
			}
		}
	}
}

# Ultimatum to Iran - Event for Iran
country_event = {
	id = NSB_soviet_foreign_politics_events.210
	title = NSB_soviet_foreign_politics_events.210.t
	desc = NSB_soviet_foreign_politics_events.210.desc
	picture = GFX_report_event_SOV_demands

	is_triggered_only = yes
			
	option = { # Become a puppet
		name = NSB_soviet_foreign_politics_events.210.a

		ai_chance = {
			base = 1
			modifier = {
				add = 0.5
				has_opinion = {
					target = FROM
					value > 75
				}
			}
			modifier = {
				add = 0.5
				OR = {
					FROM = {
						has_government = communism
						communism > 0.5
					}
					FROM = {
						has_government = democratic
						democratic > 0.5
					}
					FROM = {
						has_government = fascism
						fascism > 0.5
					}
					FROM = {
						has_government = neutrality
						neutrality > 0.5
					}
					FROM = {
						has_government = monarchist
						neutrality > 0.5
					}
				}
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = FROM
					ratio < 0.8
				}
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = FROM
					ratio < 0.5
				}
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = FROM
					ratio < 0.2
				}
			}
			modifier = {
				factor = 100
				is_in_faction_with = FROM
			}
			modifier = { #Appropriate PC for Foreign Affairs
				factor = 1.5
				SOV = { has_idea = SOV_maksim_litvinov }
			}
			modifier = {
				factor = 0
				OR = {
					AND = {
						is_in_faction = yes
						NOT = { is_in_faction_with = FROM }
					}
					AND = {
						is_subject = yes
						NOT = { is_subject_of = FROM }
					}
				}
			}
		}

		set_politics = { ruling_party = FROM }
		FROM = {
			puppet = ROOT
			add_to_faction = ROOT
			hidden_effect = {
				country_event = { id = NSB_soviet_foreign_politics_events.150 hours = 1 }
			}
		}
	}

	option = { #REFUSE
		name = NSB_soviet_foreign_politics_events.210.c

		ai_chance = {
			base = 20
			modifier = {
				factor = 2
				is_historical_focus_on = yes
			}
		}

		FROM = {
			hidden_effect = {
				country_event = { id = NSB_soviet_foreign_politics_events.152 hours = 1 }
			}
		}

		hidden_effect = {
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_pressured_our_government
			}
		}

		custom_effect_tooltip = germany.126.warning
	}
}

# The Khakimov Proposal - Event for SAU

# SOV sends Infantry Equipment - Event for Target
country_event = {
	id = NSB_soviet_foreign_politics_events.250
	title = NSB_soviet_foreign_politics_events.250.t
	desc = NSB_soviet_foreign_politics_events.250.desc
	picture = "[GetInfantryEquipmentGFX]"

	is_triggered_only = yes
			
	option = { # Nice
		name = NSB_soviet_foreign_politics_events.10.a
		
		if = { #Spanish POUM -> Not actually transfering them, just creating spoawning them
			limit = {
				tag = SPC
			}
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 6000
				producer = FROM
			}
		}
		else = { #Chinese tags get different stuff -> SOV actually sends stuff
			effect_tooltip = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 1000
					producer = FROM
				}
				add_equipment_to_stockpile = {
					type = support_equipment
					amount = 200
					producer = FROM
				}
			}
		}		
	}
}

# SOV prepares a war against JAP - Event for SOV's allies


# SOV starts war with JAP - Event for SOV's allies


# SOV offers pact against USA - Event for JAP


####### SINKIANG ########


# SOV-SINKIANG - Sinkiang becomes a puppet - Event for SOV


 ######   #######  ##     ##          ######   ######## ########     ######## ########     ###    ########  ########       ###     ######   ########  ######## ######## ##     ## ######## ##    ## ######## 
##    ## ##     ## ##     ##         ##    ##  ##       ##     ##       ##    ##     ##   ## ##   ##     ## ##            ## ##   ##    ##  ##     ## ##       ##       ###   ### ##       ###   ##    ##    
##       ##     ## ##     ##         ##        ##       ##     ##       ##    ##     ##  ##   ##  ##     ## ##           ##   ##  ##        ##     ## ##       ##       #### #### ##       ####  ##    ##    
 ######  ##     ## ##     ## ####### ##   #### ######   ########        ##    ########  ##     ## ##     ## ######      ##     ## ##   #### ########  ######   ######   ## ### ## ######   ## ## ##    ##    
      ## ##     ##  ##   ##          ##    ##  ##       ##   ##         ##    ##   ##   ######### ##     ## ##          ######### ##    ##  ##   ##   ##       ##       ##     ## ##       ##  ####    ##    
##    ## ##     ##   ## ##           ##    ##  ##       ##    ##        ##    ##    ##  ##     ## ##     ## ##          ##     ## ##    ##  ##    ##  ##       ##       ##     ## ##       ##   ###    ##    
 ######   #######     ###             ######   ######## ##     ##       ##    ##     ## ##     ## ########  ########    ##     ##  ######   ##     ## ######## ######## ##     ## ######## ##    ##    ##    


# Soviet-German Trade Agreement - Event for GER


 ######   #######  ##       ##       ########  ######  ######## #### ##     ## ########     ######  ########  ######  ##     ## ########  #### ######## ##    ## 
##    ## ##     ## ##       ##       ##       ##    ##    ##     ##  ##     ## ##          ##    ## ##       ##    ## ##     ## ##     ##  ##     ##     ##  ##  
##       ##     ## ##       ##       ##       ##          ##     ##  ##     ## ##          ##       ##       ##       ##     ## ##     ##  ##     ##      ####   
##       ##     ## ##       ##       ######   ##          ##     ##  ##     ## ######       ######  ######   ##       ##     ## ########   ##     ##       ##    
##       ##     ## ##       ##       ##       ##          ##     ##   ##   ##  ##                ## ##       ##       ##     ## ##   ##    ##     ##       ##    
##    ## ##     ## ##       ##       ##       ##    ##    ##     ##    ## ##   ##          ##    ## ##       ##    ## ##     ## ##    ##   ##     ##       ##    
 ######   #######  ######## ######## ########  ######     ##    ####    ###    ########     ######  ########  ######   #######  ##     ## ####    ##       ##    




######################
### FIVE YEAR PLAN ###
######################

### THIRD FIVE YEAR PLAN CANCELED ###
country_event = {
	id = NSB_soviet_five_year_plan.01
	title = NSB_soviet_five_year_plan.01.t
	desc = NSB_soviet_five_year_plan.01.desc
	picture = GFX_report_event_stalin_01
	
	is_triggered_only = yes

	fire_only_once = yes

	option = { #VAYA POR DIOS
		name = NSB_soviet_five_year_plan.01.a
		
		custom_effect_tooltip = NSB_soviet_five_year_plan_tt
	}
}



######################
######## MISC ########
######################

### Kuznetsov becomes an Operative -> Fired when SOV loses control over a Ukrainian state 
country_event = {
	id = NSB_soviet_great_patriotic_war.01
	title = NSB_soviet_great_patriotic_war.01.t
	desc = NSB_soviet_great_patriotic_war.01.desc
	picture = GFX_report_event_SOV_tank_column
	
	is_triggered_only = yes

	fire_only_once = yes
	trigger = {
		has_government = communism
	}
	option = { #WELCOME TO THE NKVD
		name = NSB_soviet_great_patriotic_war.01.a

		create_operative_leader = {
			name = "Nikolay Ivanovich Kuznetsov"
			GFX = GFX_Portrait_nikolay_kuznetsov
			traits = { operative_commando operative_infiltrator }
			bypass_recruitment = no
			available_to_spy_master = yes
			nationalities = { SOV GER UKR }
		}
	}
}



###################
##### COMECON #####
###################



#########################
### SPANISH CIVIL WAR ###
#########################



#######################
### PLANNED ECONOMY ###
#######################

# SOV planned economy - Event for puppets
country_event = {
	id = NSB_soviet_planned_economy.1
	title = NSB_soviet_planned_economy.1.t
	desc = NSB_soviet_planned_economy.1.desc
	picture = GFX_report_event_SOV_national_academy_of_sciences

	is_triggered_only = yes
	trigger = {
		has_government = communism
	}
	immediate = {
		hidden_effect = {
			FROM = {
				if = {
					limit = {
						check_variable = { SOV_planned_economy_industrial_capacity_factory_initial < 0.1 }
					}
					add_to_variable = { SOV_planned_economy_industrial_capacity_factory_initial = 0.01 }
				}
				if = {
					limit = {
						check_variable = { SOV_planned_economy_production_lack_of_resource_penalty_factor_initial > -0.1 }
					}
					add_to_variable = { SOV_planned_economy_production_lack_of_resource_penalty_factor_initial = -0.01 }
				}
			}
			add_tech_bonus = {
				name = NSB_soviet_planned_economy.1.t
				bonus = 1.0
				uses = 2
				category = industry
			}

			add_ideas = new_economic_policy
		}
	}
			
	option = { # Good
		name = NSB_soviet_planned_economy.1.a

		effect_tooltip = {
			add_tech_bonus = {
				name = NSB_soviet_planned_economy.1.t
				bonus = 1.0
				uses = 2
				category = industry
			}

			add_ideas = new_economic_policy
		}
	}
}



############################################################################################

### #  # ###      ##  ##  #   # ### ### ###      ##  ### #   # ### #       #   #  ##  ###  
 #  #  # #       #   #  # #   #  #  #    #      #  #  #  #   #  #  #       #   # #  # #  # 
 #  #### ##       #  #  #  # #   #  ##   #      #     #   # #   #  #       # # # #### ###  
 #  #  # #         # #  #  # #   #  #    #      #  #  #   # #   #  #       # # # #  # #  # 
 #  #  # ###     ##   ##    #   ### ###  #       ##  ###   #   ### ###      # #  #  # #  # 

############################################################################################



# Thus it begins - Left Opposition Civil War Start
country_event = {
	id = NSB_soviet_communist_civil_war.001
	title = NSB_soviet_communist_civil_war.001.t
	desc = NSB_soviet_communist_civil_war.001.desc
	picture = GFX_report_event_generic_battle
	is_triggered_only = yes
	hidden = no

	immediate = {
		hidden_effect = { SOV_initiate_civil_war = yes }
	}
	trigger = { NOT = { has_global_flag = SOV_soviet_civil_war } }

	# Civil war starts
	option = {
		name = NSB_soviet_communist_civil_war.001.a
		ai_chance = { 
			base = 10
		}
		trigger = {
			has_character = SOV_lev_trotsky
			NOT = {
				has_global_flag = trotsky_dead # just to be sure we don't end up with a ghost leading the country
			}
		}

		# SET UP NEW CAPITAL - This is where the player will launch the uprising from
		SOV_set_up_civil_war_capital = yes 

		# Determine Army size
		SOV_set_up_civil_war_army_fractions = yes 

		# DEPOSE STALIN 
		SOV_promote_to_country_leader_trotsky = yes	

		hidden_effect = {
			#START CIVIL WAR
			SOV_start_civil_war = yes 

			# LEFT Opposition Specific Stuff 
			SOV_left_opposition_civil_war_start = yes 

			# Return Trotsky from Mexico
			set_global_flag = flag_trotsky_returning_to_ussr_from_mexico
			MEX = { country_event = { id = mexico.22 hours = 1} }	
		}


	}
	option = {
		name = NSB_soviet_communist_civil_war.001.b
		ai_chance = { 
			base = 10
		}
		trigger = {
			has_character = SOV_ivan_smirnov
			has_completed_focus = SOV_integrate_smirnovs_bloc
		}

		# SET UP NEW CAPITAL - This is where the player will launch the uprising from
		SOV_set_up_civil_war_capital = yes 

		# Determine Army size
		SOV_set_up_civil_war_army_fractions = yes 

		# DEPOSE STALIN 
		SOV_promote_to_country_leader_smirnov = yes

		hidden_effect = {
			#START CIVIL WAR
			SOV_start_civil_war = yes 

			# LEFT Opposition Specific Stuff 
			SOV_left_opposition_civil_war_start = yes 	
		}
	}

	option = {
		name = NSB_soviet_communist_civil_war.001.c
		ai_chance = { 
			base = 10
		}
		trigger = {
			AND = {
				NOT = { has_character = SOV_lev_trotsky }
				OR = { 
					NOT = { has_character = SOV_ivan_smirnov }
					NOT = { has_completed_focus = SOV_integrate_smirnovs_bloc }
				}
				OR = { 
					NOT = { has_character = SOV_grigory_zinovyev }
					NOT = { has_completed_focus = SOV_align_the_zinovyevites }
				}
				OR = { 
					NOT = { has_character = SOV_lev_kamenev }
					NOT = { has_completed_focus = SOV_align_the_zinovyevites }
				}
			}
		}
		

		# SET UP NEW CAPITAL - This is where the player will launch the uprising from
		SOV_set_up_civil_war_capital = yes 

		# Determine Army size
		SOV_set_up_civil_war_army_fractions = yes 

		# DEPOSE STALIN 
		IF = {
			limit = { 
				any_unit_leader = { has_trait = trait_SOV_trotskyist }
			}
			ROOT = {
				random_unit_leader = {
					limit = { 
						has_trait = trait_SOV_trotskyist
					}
					add_country_leader_role = {
						country_leader = {
							ideology = marxism
							traits = { }
							expire = "1965.1.1.1"
						}
						promote_leader = yes 
					}
					
				}
			}
		}
		ELSE = {
			ROOT = {
				random_unit_leader = {
					limit = { 
						NOT = { has_trait = trait_SOV_stalinist }
					}
					add_country_leader_role = {
						country_leader = {
							ideology = marxism
							traits = { }
							expire = "1965.1.1.1"
						}
						promote_leader = yes 
					}
				}
			}
		}
		hidden_effect = {
			random_list = {
				20 = {
					SOV = { add_country_leader_trait = stout_defender }
				}
				20 = {
					SOV = { add_country_leader_trait = devoted_trotskyist }
				}
				20 = {
					SOV = { add_country_leader_trait = cornered_fox }
				}
				20 = {
					SOV = { add_country_leader_trait = permanent_revolutionary }
				}
				20 = {
					SOV = { add_country_leader_trait = indecisive }
				}
			}
		}
		
		

		hidden_effect = {
			#START CIVIL WAR
			SOV_start_civil_war = yes 

			# LEFT Opposition Specific Stuff 
			SOV_left_opposition_civil_war_start = yes  
		}
				
	}
	# Zinovyev
	option = {
		name = NSB_soviet_communist_civil_war.001.d
		ai_chance = { 
			base = 10
		}
		trigger = {
			has_character = SOV_grigory_zinovyev
			has_completed_focus = SOV_align_the_zinovyevites
		}

		# SET UP NEW CAPITAL - This is where the player will launch the uprising from
		SOV_set_up_civil_war_capital = yes 

		# Determine Army size
		SOV_set_up_civil_war_army_fractions = yes 

		# DEPOSE STALIN 
		SOV_promote_to_country_leader_zinovyev = yes 	

		hidden_effect = {
			#START CIVIL WAR
			SOV_start_civil_war = yes 

			# LEFT Opposition Specific Stuff 
			SOV_left_opposition_civil_war_start = yes 	
		}
	}
	# Kamenev
	option = {
		name = NSB_soviet_communist_civil_war.001.e
		ai_chance = { 
			base = 10
		}
		trigger = {
			has_character = SOV_lev_kamenev
			has_completed_focus = SOV_align_the_zinovyevites
		}

		# SET UP NEW CAPITAL - This is where the player will launch the uprising from
		SOV_set_up_civil_war_capital = yes 

		# Determine Army size
		SOV_set_up_civil_war_army_fractions = yes 

		# DEPOSE STALIN 
		SOV_promote_to_country_leader_kamenev = yes 

		hidden_effect = {
			#START CIVIL WAR
			SOV_start_civil_war = yes 

			# LEFT Opposition Specific Stuff 
			SOV_left_opposition_civil_war_start = yes 	
		}
	}




	

}


# Right Opposition Coup Successful
country_event = {
	id = NSB_soviet_communist_civil_war.002
	title = NSB_soviet_communist_civil_war.002.t
	desc = NSB_soviet_communist_civil_war.002.desc
	picture = GFX_report_event_soviet_tank_parade

	is_triggered_only = yes
	trigger = { NOT = { has_global_flag = SOV_soviet_civil_war } }

	option = {
		name = NSB_soviet_communist_civil_war.002.a
		trigger = {
			has_character = SOV_nikolay_bukharin
		}
		# Set New Country Leader
		SOV_promote_to_country_leader_bukharin = yes
		
		retire_character = SOV_lavrenty_beriya
		hidden_effect = { every_other_country = { news_event = { id = nsb_news.12 hours = 8 } } }
		set_division_template_lock = {
			division_template = "NKVD Pogranichnaya Diviziya"
			is_locked = no
		}
	}
	option = {
		name = NSB_soviet_communist_civil_war.002.b
		trigger = {
			has_character = SOV_aleksey_rykov
		}
		# Set New Country Leader
		SOV_promote_to_country_leader_rykov = yes

		retire_character = SOV_lavrenty_beriya
		hidden_effect = { every_other_country = { news_event = { id = nsb_news.12 hours = 8 } } }
		set_division_template_lock = {
			division_template = "NKVD Pogranichnaya Diviziya"
			is_locked = no
		}
	}
	option = {
		name = NSB_soviet_communist_civil_war.002.c
		trigger = {
			AND = {
				NOT = { has_character = SOV_nikolay_bukharin }
				NOT = { has_character = SOV_aleksey_rykov }
				OR = { 
					NOT = { has_character = SOV_grigory_zinovyev }
					NOT = { has_completed_focus = SOV_align_the_zinovyevites }
				}
				OR = { 
					NOT = { has_character = SOV_lev_kamenev }
					NOT = { has_completed_focus = SOV_align_the_zinovyevites }
				}
			}
		}
		# Set New Country Leader
		IF = {
			limit = { 
				any_unit_leader = { has_trait = trait_SOV_bukharinist }
			}
			ROOT = {
				random_unit_leader = {
					limit = { 
						has_trait = trait_SOV_bukharinist
					}
					add_country_leader_role = {
						country_leader = {
							ideology = marxism
							traits = { }
							expire = "1965.1.1.1"
						}
						promote_leader = yes 
					}
					
				}
			}
		}
		ELSE = {
			ROOT = {
				random_unit_leader = {
					limit = { 
						NOT = { has_trait = trait_SOV_stalinist }
					}
					add_country_leader_role = {
						country_leader = {
							ideology = marxism
							traits = { }
							expire = "1965.1.1.1"
						}
						promote_leader = yes 
					}
				}
			}
		}
		hidden_effect = {
			random_list = {
				20 = {
					SOV = { add_country_leader_trait = stout_defender }
				}
				20 = {
					SOV = { add_country_leader_trait = empire_builder }
				}
				20 = {
					SOV = { add_country_leader_trait = railroad_enthusiast }
				}
				20 = {
					SOV = { add_country_leader_trait = rearmer }
				}
				20 = {
					SOV = { add_country_leader_trait = indecisive }
				}
			}
		}
		retire_character = SOV_lavrenty_beriya
		hidden_effect = { every_other_country = { news_event = { id = nsb_news.12 hours = 8 } } }
		set_division_template_lock = {
			division_template = "NKVD Pogranichnaya Diviziya"
			is_locked = no
		}
	}
	option = {
		name = NSB_soviet_communist_civil_war.002.d
		trigger = {
			has_character = SOV_grigory_zinovyev
			has_completed_focus = SOV_align_the_zinovyevites
		}
		# Set New Country Leader
		SOV_promote_to_country_leader_zinovyev = yes
		retire_character = SOV_lavrenty_beriya
		hidden_effect = { every_other_country = { news_event = { id = nsb_news.12 hours = 8 } } }
		set_division_template_lock = {
			division_template = "NKVD Pogranichnaya Diviziya"
			is_locked = no
		}
	}
	option = {
		name = NSB_soviet_communist_civil_war.002.e
		trigger = {
			has_character = SOV_lev_kamenev
			has_completed_focus = SOV_align_the_zinovyevites
		}
		# Set New Country Leader
		SOV_promote_to_country_leader_kamenev = yes
		retire_character = SOV_lavrenty_beriya
		hidden_effect = { every_other_country = { news_event = { id = nsb_news.12 hours = 8 } } }
		set_division_template_lock = {
			division_template = "NKVD Pogranichnaya Diviziya"
			is_locked = no
		}
	}
}


# Right Opposition Civil War start
country_event = {
	id = NSB_soviet_communist_civil_war.003
	title = NSB_soviet_communist_civil_war.003.t
	desc = NSB_soviet_communist_civil_war.003.desc
	picture = GFX_report_event_generic_battle
	
	is_triggered_only = yes
	trigger = { NOT = { has_global_flag = SOV_soviet_civil_war } }

	hidden = no

	immediate = {
		hidden_effect = { SOV_initiate_civil_war = yes }
	}

	# Civil war starts
	option = {
		name = NSB_soviet_communist_civil_war.003.a
		ai_chance = { 
			base = 20
		}
		trigger = {
			has_character = SOV_nikolay_bukharin
		}

		# SET UP NEW CAPITAL - This is where the player will launch the uprising from
		SOV_set_up_civil_war_capital = yes 
		
		# Determine Army size
		SOV_set_up_civil_war_army_fractions = yes 
		
		# DEPOSE STALIN 
		# Set New Country Leader 
		SOV_promote_to_country_leader_bukharin = yes
		
		hidden_effect = {
			#START CIVIL WAR
			SOV_start_civil_war = yes 

			# RIGHT Opposition Specific Stuff 
			SOV_right_opposition_civil_war_start = yes 
		}
	}
	option = {
		name = NSB_soviet_communist_civil_war.003.b
		ai_chance = { 
			base = 10
		}
		trigger = {
			has_character = SOV_aleksey_rykov
		}

		# SET UP NEW CAPITAL - This is where the player will launch the uprising from
		SOV_set_up_civil_war_capital = yes 

		# Determine Army size
		SOV_set_up_civil_war_army_fractions = yes 

		# DEPOSE STALIN
		SOV_promote_to_country_leader_rykov = yes

		hidden_effect = {
			#START CIVIL WAR
			SOV_start_civil_war = yes 

			# LEFT Opposition Specific Stuff 
			SOV_right_opposition_civil_war_start = yes 	
		}
	}

	option = {
		name = NSB_soviet_communist_civil_war.003.c
		ai_chance = { 
			base = 10
		}
		trigger = {
			AND = {
				NOT = { has_character = SOV_nikolay_bukharin }
				NOT = { has_character = SOV_aleksey_rykov }
				OR = { 
					NOT = { has_character = SOV_grigory_zinovyev }
					NOT = { has_completed_focus = SOV_align_the_zinovyevites }
				}
				OR = { 
					NOT = { has_character = SOV_lev_kamenev }
					NOT = { has_completed_focus = SOV_align_the_zinovyevites }
				}
			}
		}
		

		# SET UP NEW CAPITAL - This is where the player will launch the uprising from
		SOV_set_up_civil_war_capital = yes 

		# Determine Army size
		SOV_set_up_civil_war_army_fractions = yes 

		# DEPOSE STALIN
		IF = {
			limit = { 
				any_unit_leader = { has_trait = trait_SOV_bukharinist }
			}
			ROOT = {
				random_unit_leader = {
					limit = { 
						has_trait = trait_SOV_bukharinist
					}
					add_country_leader_role = {
						country_leader = {
							ideology = marxism
							traits = { }
							expire = "1965.1.1.1"
						}
						promote_leader = yes 
					}
					
				}
			}
		}
		ELSE = {
			ROOT = {
				random_unit_leader = {
					limit = { 
						NOT = { has_trait = trait_SOV_stalinist }
					}
					add_country_leader_role = {
						country_leader = {
							ideology = marxism
							traits = { }
							expire = "1965.1.1.1"
						}
						promote_leader = yes 
					}
				}
			}
		}
		hidden_effect = {
			random_list = {
				20 = {
					SOV = { add_country_leader_trait = stout_defender }
				}
				20 = {
					SOV = { add_country_leader_trait = empire_builder }
				}
				20 = {
					SOV = { add_country_leader_trait = railroad_enthusiast }
				}
				20 = {
					SOV = { add_country_leader_trait = anti_democrat }
				}
				20 = {
					SOV = { add_country_leader_trait = indecisive }
				}
			}
		}
		
		
		

		hidden_effect = {
			#START CIVIL WAR
			SOV_start_civil_war = yes 

			# LEFT Opposition Specific Stuff 
			SOV_right_opposition_civil_war_start = yes  
		}
				
	}
	# Zinovyev
	option = {
		name = NSB_soviet_communist_civil_war.003.d
		ai_chance = { 
			base = 10
		}
		trigger = {
			has_character = SOV_grigory_zinovyev
			has_completed_focus = SOV_align_the_zinovyevites
		}

		# SET UP NEW CAPITAL - This is where the player will launch the uprising from
		SOV_set_up_civil_war_capital = yes 

		# Determine Army size
		SOV_set_up_civil_war_army_fractions = yes 

		# DEPOSE STALIN
		SOV_promote_to_country_leader_zinovyev = yes 	

		hidden_effect = {
			#START CIVIL WAR
			SOV_start_civil_war = yes 

			# LEFT Opposition Specific Stuff 
			SOV_right_opposition_civil_war_start = yes 	
		}
	}
	# Kamenev
	option = {
		name = NSB_soviet_communist_civil_war.003.e
		ai_chance = { 
			base = 10
		}
		trigger = {
			has_character = SOV_lev_kamenev
			has_completed_focus = SOV_align_the_zinovyevites
		}

		# SET UP NEW CAPITAL - This is where the player will launch the uprising from
		SOV_set_up_civil_war_capital = yes 

		# Determine Army size
		SOV_set_up_civil_war_army_fractions = yes 

		# DEPOSE STALIN 
		SOV_promote_to_country_leader_kamenev = yes 

		hidden_effect = {
			#START CIVIL WAR
			SOV_start_civil_war = yes 

			# LEFT Opposition Specific Stuff 
			SOV_right_opposition_civil_war_start = yes 	
		}
	}

}

# The Vanguard of the True Revolution
country_event = {
	id = NSB_soviet_communist_civil_war.004
	title = NSB_soviet_communist_civil_war.004.t
	desc = NSB_soviet_communist_civil_war.004.desc
	picture = GFX_report_event_generic_rally2
	
	is_triggered_only = yes
	immediate = {
		set_temp_variable = { temp_support = party_popularity@communism }
		# divide_temp_variable = { temp_support = 10 }
		set_variable = { volunteer_mp = max_available_manpower_k }
		multiply_variable = { volunteer_mp = temp_support }
		round_variable = volunteer_mp
		set_variable = { volunteer_mp_org = volunteer_mp }
		
		multiply_variable = { volunteer_mp_org = -50 }
		multiply_variable = { volunteer_mp = -10 }
	}

	# Communist Only - Sponsor Volunteers
	option = {
		name = NSB_soviet_communist_civil_war.004.a
		ai_chance = {
			base = 10
			modifier = { #Appropriate PC for Foreign Affairs
				factor = 2
				FROM = { has_idea = SOV_maksim_litvinov }
			}
			modifier = { #Appropriate PC for Foreign Affairs
				factor = 1.2
				FROM = { has_idea = SOV_vyacheslav_molotov }
			}
		}
		trigger = {
			has_government = communism
			NOT = { has_war_with = SOV }
		}
		add_manpower = var:volunteer_mp_org
		multiply_variable = { volunteer_mp_org = -1 }
		add_to_variable = { SOV.SOV_international_brigades_mp = volunteer_mp_org }
		clear_variable = volunteer_mp_org
		clear_variable = volunteer_mp
	}

	# Communist Only - We would never betray our friend Stalin!
	option = {
		name = NSB_soviet_communist_civil_war.004.b
		ai_chance = {
			base = 10
			modifier = {
				factor = 10
				is_in_faction_with = SOS
			}
		}
		trigger = {
			has_government = communism
		}
		add_popularity = {
			ideology = communism
			popularity = -0.05
		}
		
	}

	# anyone - Oh
	option = {
		name = NSB_soviet_communist_civil_war.004.c
		ai_chance = {
			base = 10
		}
		add_manpower = var:volunteer_mp
		multiply_variable = { volunteer_mp = -1 }
		add_to_variable = { SOV.SOV_international_brigades_mp = volunteer_mp }
		clear_variable = volunteer_mp_org
		clear_variable = volunteer_mp
	}
}

# International brigades


# Uprisings
country_event = {
	id = NSB_soviet_communist_civil_war.006
	title = NSB_soviet_communist_civil_war.006.t
	desc = NSB_soviet_communist_civil_war.006.desc
	picture = GFX_report_event_worker_protests
	
	is_triggered_only = yes
	trigger = { SOV_soviet_civil_war_not_started = yes }
	# Allow Uprisings
	option = {
		name = NSB_soviet_communist_civil_war.006.a
		ai_chance = {
			base = 10
		}
		SOV_opposition_support_low_increase_effect = yes 
		var:SOV_uprising_state = { SOV_set_civil_war_state = yes }
		
		random_list = {
			25 = {
				SOV_paranoia_medium_increase_effect = yes 
				IF = {
					limit = {
						var:SOV_uprising_state = { dockyard  > 0 }
					}
					var:SOV_uprising_state = { damage_building = { type = dockyard  damage = 0.75 }	}
				}
				ELSE_IF = {
					limit = {
						var:SOV_uprising_state = { arms_factory > 0 }
					}
					var:SOV_uprising_state = { damage_building = { type = arms_factory damage = 0.75 } }
				}
				ELSE_IF = {
					limit = {
						var:SOV_uprising_state = { industrial_complex > 0 }
					}
					var:SOV_uprising_state = { damage_building = { type = industrial_complex damage = 0.75 } }
				}
			}
			25 = {
				SOV_paranoia_low_increase_effect = yes 
				add_stability = -0.05	
			}
			25 = {
				SOV_paranoia_low_increase_effect = yes 
				add_popularity = {
					ideology = democratic
					popularity = 0.02
				}
			}
			25 = {
				SOV_paranoia_very_low_increase_effect = yes 
			}	
		}
		# trigger new uprising soemwhere else 
		hidden_effect = {
			country_event = {
				id = NSB_soviet_communist_civil_war.007
				days = 30
				random_days = 20
			}
		}
	}

	# Put an end to uprisings
	option = {
		name = NSB_soviet_communist_civil_war.006.b
		ai_chance = {
			base = 10
			modifier = {
				factor = 0 # The AI shouldn't do this unless it is a bad spot
				OR = {
					has_political_power > 0 
					check_variable = { SOV_paranoia < 65 } 
				}
			} 
		}
		SOV_opposition_support_low_decrease_effect = yes 
		SOV_paranoia_low_decrease_effect = yes 
		add_political_power = -75
		add_popularity = {
			ideology = communism 
			popularity = -0.05
		}
	}
}

# Uprisings trigger
country_event = {
	id = NSB_soviet_communist_civil_war.007
	title = NSB_soviet_communist_civil_war.007.t
	desc = NSB_soviet_communist_civil_war.007.desc
	# picture = GFX_report_event_soviet_japanese_pact
	hidden = yes
	is_triggered_only = yes

	option = {
		name = NSB_soviet_communist_civil_war.007.a
		random_owned_state = {
			limit = {
				SOV_is_unaligned_state = yes 
				NOT = { region = 133}
				NOT = { region = 132}
				OR = {
					industrial_complex > 0
					arms_factory > 0
					dockyard  > 0
				}
			}
			ROOT = { set_variable = { SOV_uprising_state = PREV } }
		}
		country_event = {
			id = NSB_soviet_communist_civil_war.006
		}
	}
}

# Stalin Surivives 
news_event = {
	id = NSB_soviet_communist_civil_war.008
	title = NSB_soviet_communist_civil_war.008.t
	desc = NSB_soviet_communist_civil_war.008.desc
	picture = GFX_news_event_dimitrov_and_stalin
	is_triggered_only = yes

	option = {
		name = NSB_soviet_communist_civil_war.008.a
		
	}
}

# The Death of Stalin
news_event = {
	id = NSB_soviet_communist_civil_war.009
	title = NSB_soviet_communist_civil_war.009.t
	desc = NSB_soviet_communist_civil_war.009.desc
	picture = GFX_news_event_generic_funeral
	is_triggered_only = yes
	major = no 

	option = {
		name = NSB_soviet_communist_civil_war.009.a
		hidden_effect = {
			every_other_country = { news_event = { id = nsb_news.11 hours = 8 } }
		}
	}
}


# Defections
country_event = {
	id = NSB_soviet_communist_civil_war.010
	title = NSB_soviet_communist_civil_war.010.t
	desc = NSB_soviet_communist_civil_war.010.desc
	picture = GFX_report_event_soviet_japanese_pact
	
	is_triggered_only = yes

	option = {
		name = NSB_soviet_communist_civil_war.010.a
		var:SOS.SOV_general_to_desert = { 
			remove_unit_leader_trait = trait_SOV_cowed_by_stalin_army
			set_nationality = ROOT 
		}

		SOS = {
			transfer_units_fraction= {
				target = SOV
				target_organization = 1
				source_organization = 0.9
				size = 0
				stockpile_ratio = 0
				army_ratio = 0.02
				navy_ratio = 0
				air_ratio = 0
				keep_unit_leaders_trigger = {
					always = yes 
				}
			}

		}
	}
}

# PERMANENT REVOLUTION


# FOR THE COMMON GOOD - Event for Soviet Subjects and Allies



country_event = {
	id = NSB_Soviet_fascist_civil_war.001
	title = NSB_Soviet_fascist_civil_war.001.t
	desc = NSB_Soviet_fascist_civil_war.001.desc
	picture = GFX_report_event_SOV_military_offensive
	is_triggered_only = yes
	trigger = { 
		has_government = communism
		NOT = { has_global_flag = SOV_soviet_civil_war } 
	}

	immediate = {
		hidden_effect = { SOV_initiate_civil_war = yes }
	}

	# Civil war starts
	option = {
		name = NSB_Soviet_fascist_civil_war.001.a
		ai_chance = { 
			base = 10
		}

		# SET UP NEW CAPITAL - This is where the player will launch the uprising from
		SOV_set_up_civil_war_capital = yes 
		hidden_effect = {

			# Determine Army size
			SOV_set_up_civil_war_army_fractions = yes 

			# DEPOSE STALIN
			SOV_promote_to_country_leader_provisional = yes 

			#START CIVIL WAR
			SOV_start_civil_war = yes 
			
			# Exiles stuff set up
			SOV_exiles_civil_war_start = yes 

		}
	}
}


country_event = {
	id = NSB_Soviet_fascist_civil_war.002
	title = NSB_Soviet_fascist_civil_war.002.t
	desc = NSB_Soviet_fascist_civil_war.002.desc
	picture = GFX_report_event_soldiers_marching
	is_triggered_only = yes

	immediate = {
		
	}

	option = {
		name = NSB_Soviet_fascist_civil_war.002.a
		ai_chance = { 
			base = 10
		}
		SOV_the_eyes_fear_units = yes 
		
	}
}

unit_leader_event = {
	id = NSB_Soviet_fascist_civil_war.003
	title = NSB_Soviet_fascist_civil_war.003.t
	desc = NSB_Soviet_fascist_civil_war.003.desc
	# picture = GFX_report_event_SOV_mongolia_cavalry
	is_triggered_only = yes
	hidden = no 

	immediate = {
		
	}

	option = {
		name = NSB_Soviet_fascist_civil_war.003.a
		SOV_grigory_semyonov = { set_nationality = SOV }
	}
}

country_event = {
	id = NSB_Soviet_fascist_civil_war.004
	title = NSB_Soviet_fascist_civil_war.004.t
	desc = NSB_Soviet_fascist_civil_war.004.desc
	picture = GFX_report_event_SOV_mongolia_cavalry
	is_triggered_only = yes
	hidden = yes  

	immediate = {
		
	}

	option = {
		name = NSB_Soviet_fascist_civil_war.004.a
		SOV_grigory_semyonov = { 
			unit_leader_event = {
				id = NSB_Soviet_fascist_civil_war.003
				hours = 0
			}
		}
	}
}

###############################################################################################################

 ##  ### #   # ### #       #   #  ##  ###       ##   ##  #   # #   #  ##  #  #     ### #   # ### #  # ###  ## 
#  #  #  #   #  #  #       #   # #  # #  #     #  # #  # ## ## ## ## #  # ## #     #   #   # #   ## #  #  #   
#     #   # #   #  #       # # # #### ###      #    #  # # # # # # # #  # # ##     ##   # #  ##  # ##  #   #  
#  #  #   # #   #  #       # # # #  # #  #     #  # #  # #   # #   # #  # #  #     #    # #  #   #  #  #    # 
 ##  ###   #   ### ###      # #  #  # #  #      ##   ##  #   # #   #  ##  #  #     ###   #   ### #  #  #  ##  

##############################################################################################################

# Post Civil War - Concessions etc
country_event = {
	id = NSB_soviet_civil_war_common.001
	title = NSB_soviet_civil_war_common.001.t
	desc = {
		text = NSB_soviet_civil_war_common.001.desc_left 
		trigger = { SOV_is_left_opposition = yes }
	}
	desc = {
		text = NSB_soviet_civil_war_common.001.desc_right_concessions 
		trigger = { 
			SOV_is_right_opposition = yes 
			OR = {
				has_country_flag = SOV_CSW_transfer_vladivostok_flag
				has_country_flag = SOV_CSW_transfer_sakhalin_flag 
				has_country_flag = SOV_CSW_baku_oil_flag 
				has_country_flag = SOV_CSW_ukraine_germany_flag 
				has_country_flag = SOV_CSW_belarus_uk_flag  
			}
		}
	}
	desc = {
		text = NSB_soviet_civil_war_common.001.desc_right_no_concessions 
		trigger = { 
			SOV_is_right_opposition = yes 
			NOT = { has_country_flag = SOV_CSW_transfer_vladivostok_flag }
			NOT = { has_country_flag = SOV_CSW_transfer_sakhalin_flag }
			NOT = { has_country_flag = SOV_CSW_baku_oil_flag }
			NOT = { has_country_flag = SOV_CSW_ukraine_germany_flag }
			NOT = { has_country_flag = SOV_CSW_belarus_uk_flag  }
		}
	}
	desc = {
		text = NSB_soviet_civil_war_common.001.desc_exiles
		trigger = { 
			SOV_is_exiles = yes 
		}
	}
	picture = GFX_report_event_generic_ruins

	is_triggered_only = yes

	
	option = {
		name = NSB_soviet_civil_war_common.001.a

		# Vladivostok 
		IF = {
			limit = {
				has_country_flag = SOV_CSW_transfer_vladivostok_flag 
				owns_state = 408
			}
			JAP = {
				transfer_state = 408
			}
		}

		# Send Japanese General home
		every_army_leader = {
			limit = {
				has_character_flag = japanese_expeditionary_leader_flag
			}
			set_nationality = JAP
		}

		# North Sakhalin 
		IF = {
			limit = {
				has_country_flag = SOV_CSW_transfer_sakhalin_flag 
				owns_state = 655
			}
			JAP = {
				transfer_state = 655
			}
		}

		# Baku Oil
		IF = {
			limit = {
				has_country_flag = SOV_CSW_baku_oil_flag 
				owns_state = 229
			}
			give_resource_rights = { receiver = GER state = 229 }
		}

		# Send advisors home
		every_army_leader = {
			limit = {
				has_trait = trait_SOV_foreign_military_advisor
			}
			set_nationality = GER
			remove_unit_leader_trait = trait_SOV_foreign_military_advisor
		}

		# Ukrainian oil for Germany 
		IF = {
			limit = {
				has_country_flag = SOV_CSW_ukraine_germany_flag 
				UKR = { owns_state = 192 }
			}
			UKR = { give_resource_rights = { receiver = GER state = 229 } }
		}

		# Independence for Belarus
		
		IF = {
			limit = {
				has_country_flag = SOV_CSW_belarus_uk_flag 
			}
			release = BLR
		}


		# Set capital 
		country_event = {
			id = NSB_soviet_civil_war_common.002
			days = 7
			random_days = 5
		}
		# De-stalinization 
		country_event = {
			id = NSB_soviet_civil_war_common.010
			days = 21
			random_days = 7
		}
		hidden_effect = {
			news_event = { id = nsb_news.10 hours = 8 }
		}
	}
}

# Post Civil War - Capital selection
country_event = {
	id = NSB_soviet_civil_war_common.002
	title = NSB_soviet_civil_war_common.002.t
	desc = NSB_soviet_civil_war_common.002.desc
	picture = GFX_report_event_generic_ruins 

	is_triggered_only = yes

	# Moscow
	option = {
		name = NSB_soviet_civil_war_common.002.a
		ai_chance = {
			base = 10
			modifier = {
				factor = 1.5
				SOV_is_right_opposition = yes 
			}
			modifier = {
				factor = 2
				has_country_leader = { character = SOV_lev_kamenev }
			}
		}
		trigger = {
			219 = { 
				is_owned_by = ROOT 
				is_controlled_by = ROOT
			}
		}
		set_capital = { state = 219 }

	}
	# Leningrad
	option = {
		name = NSB_soviet_civil_war_common.002.b
		ai_chance = {
			base = 5
			modifier = {
				factor = 3
				has_country_leader = { character = SOV_grigory_zinovyev }
			}
		}
		trigger = {
			195 = { 
				is_owned_by = ROOT 
				is_controlled_by = ROOT
			}
			NOT = { SOV_is_exiles = yes }
		}
		set_capital = { state = 195 }
	}
	# Petrograd
	option = {
		name = NSB_soviet_civil_war_common.002.c
		ai_chance = {
			base = 5
			modifier = {
				factor = 4
				has_country_leader = { character = SOV_lev_trotsky }
			}
		}
		trigger = {
			195 = { 
				is_owned_by = ROOT 
				is_controlled_by = ROOT
			}
			NOT = { SOV_is_exiles = yes }
		}
		195 = { set_state_name = SOV_petrograd }
		set_province_name = {
			id = 3151
			name = SOV_petrograd
		}
		set_capital = { state = 195 }
	}
	# Keep the one we have
	option = {
		name = NSB_soviet_civil_war_common.002.d
		ai_chance = {
			base = 1
		}
		trigger = {
			var:SOV_civil_war_start_state = { is_owned_by = ROOT }
		}
		set_capital = { state = var:SOV_civil_war_start_state }
	}
	# Vladivostok
	option = {
		name = NSB_soviet_civil_war_common.002.e
		ai_chance = {
			base = 2
		}
		trigger = {
			408 = { 
				is_owned_by = ROOT 
				is_controlled_by = ROOT
			}
			SOV_is_exiles = yes
		}
		set_capital = { state = 408 }
	}
	# St. Petersburg
	option = {
		name = NSB_soviet_civil_war_common.002.f
		ai_chance = {
			base = 10
		}
		trigger = {
			195 = { 
				is_owned_by = ROOT 
				is_controlled_by = ROOT
			}
			SOV_is_exiles = yes
		}
		195 = { set_state_name = SOV_StPetersburg }
		set_province_name = {
			id = 3151
			name = SOV_StPetersburg
		}
		set_capital = { state = 195 }
	}
}

# LAUNCH CIVIL WAR BASED ON HIGH PARANOIA
country_event = {
	id = NSB_soviet_civil_war_common.003
	title = NSB_soviet_civil_war_common.003.t
	desc = NSB_soviet_civil_war_common.003.desc
	picture = GFX_report_event_soviet_soldiers

	is_triggered_only = yes
	trigger = {
		has_government = communism
	}
	# Here we go
	option = {
		name = NSB_soviet_civil_war_common.003.a
		IF = { 
			limit = {
				SOV_is_left_opposition = yes 
			}
			country_event = {
				id = NSB_soviet_communist_civil_war.001
				hours = 1
			}
		}
		ELSE_IF = { 
			limit = {
				SOV_is_right_opposition = yes 
			}
			country_event = {
				id = NSB_soviet_communist_civil_war.003
				hours = 1
			}
		}
		ELSE_IF = { 
			limit = {
				SOV_is_exiles = yes 
			}
			country_event = {
				id = NSB_Soviet_fascist_civil_war.001
				hours = 1
			}
		}
	}
}

# Dispatcher event for Stalin trying to align generals and stuff
country_event = {
	id = NSB_soviet_civil_war_common.004
	title = NSB_soviet_civil_war_common.004.t
	desc = NSB_soviet_civil_war_common.004.desc  
	# # Hidden event, no need for picture
	is_triggered_only = yes
	hidden = yes
	trigger = {
		has_government = communism
		SOV_soviet_civil_war_not_started = yes # Don't run if war has already started
	}
	option = {
		name = NSB_soviet_civil_war_common.004.a
		IF = { 
			limit = { 
				NOT = { has_global_flag = SOV_soviet_civil_war_over } # Sanity check, in order not to activate more missions once the war has started
			}
			random_list = {
				# Secure loyalty of a General
				10 = {
					random_army_leader = {
						limit = {
							NOT = { has_trait = trait_SOV_stalinist }
							NOT = { has_trait = trait_SOV_bukharinist }
							NOT = { has_trait = trait_SOV_trotskyist }
							NOT = { has_trait = trait_SOV_monarchist_sympathizer }
						}
						set_variable = { SOV.SOV_selected_general_stalin = THIS }

					}
					activate_mission = SOV_align_general_stalin
				}
				10 = {
					random_navy_leader = {
						limit = {
							NOT = { has_trait = trait_SOV_stalinist }
							NOT = { has_trait = trait_SOV_bukharinist }
							NOT = { has_trait = trait_SOV_trotskyist }
							NOT = { has_trait = trait_SOV_monarchist_sympathizer }
						}
						set_variable = { SOV.SOV_selected_admiral_stalin = THIS }

					}
					activate_mission = SOV_align_admiral_stalin
				}
			}
		}
	}
}

# Dispatcher event for Stalinist Focuses

country_event = {
	id = NSB_soviet_civil_war_common.005
	title = NSB_soviet_civil_war_common.005.t
	desc = NSB_soviet_civil_war_common.005.desc 
	# picture =  # Hidden event, no need for picture
	is_triggered_only = yes
	hidden = yes
	trigger = {
		has_government = communism
		SOV_soviet_civil_war_not_started = yes # Don't run if war has already started
	}
	option = {
		name = NSB_soviet_civil_war_common.004.a
		IF = {
			limit = { NOT = { has_country_flag = SOV_the_stalin_constitution_completed_flag }}
			activate_mission = SOV_the_stalin_constitution_mission
		}
		ELSE_IF = {
			limit = { NOT = { has_country_flag = SOV_the_zinovyevite_terrorist_center_completed_flag }}
			activate_mission = SOV_the_zinovyevite_terrorist_center_mission
		}
		ELSE_IF = {
			limit = { NOT = { has_country_flag = SOV_the_anti_soviet_trotskyist_center_completed_flag }}
			activate_mission = SOV_the_anti_soviet_trotskyist_center_mission
		}
		ELSE_IF = {
			limit = { NOT = { has_country_flag = SOV_the_workers_dictatorship_completed_flag }}
			activate_mission = SOV_the_workers_dictatorship_mission
		}
		ELSE_IF = {
			limit = { NOT = { has_country_flag = SOV_the_military_conspiracy_completed_flag }}
			activate_mission = SOV_the_military_conspiracy_mission
		}
		ELSE_IF = {
			limit = { NOT = { has_country_flag = SOV_socialism_in_one_country_completed_flag }}
			activate_mission = SOV_socialism_in_one_country_mission
		}
		ELSE_IF = {
			limit = { NOT = { has_country_flag = SOV_secure_the_administration_completed_flag }}
			activate_mission = SOV_secure_the_administration_mission
		}
		ELSE_IF = {
			limit = { NOT = { has_country_flag = SOV_the_bloc_of_rights_and_trotskyites_completed_flag }}
			activate_mission = SOV_the_bloc_of_rights_and_trotskyites_mission
		}
		ELSE_IF = {
			limit = { NOT = { has_country_flag = SOV_behead_the_snake_completed_flag }}
			activate_mission = SOV_behead_the_snake_mission
		}
	}
}

# launching opposition partisans after war starts
country_event = {
	id = NSB_soviet_civil_war_common.006
	title = NSB_soviet_civil_war_common.006.t
	desc = NSB_soviet_civil_war_common.006.desc
	picture = GFX_report_event_generic_riot
	is_triggered_only = yes

	immediate = {
		
	}

	option = {
		name = NSB_soviet_civil_war_common.006.a
		ai_chance = { 
			base = 10
		}
		custom_effect_tooltip = SOV_popular_uprising_units_tt
		hidden_effect = { SOV_popular_uprising_units = yes }
		
	}
}

# De-Stalinization
country_event = {
	id = NSB_soviet_civil_war_common.010
	title = NSB_soviet_civil_war_common.010.t
	desc = {
		text = NSB_soviet_civil_war_common.010_right_opposition
		trigger = { SOV_is_right_opposition = yes }
	}
	desc = {
		text = NSB_soviet_civil_war_common.010_left_opposition
		trigger = { SOV_is_left_opposition = yes }
	}
	desc = {
		text = NSB_soviet_civil_war_common.010_exiles
		trigger = { SOV_is_exiles = yes }
	}

	picture = GFX_report_event_stalin_01
	is_triggered_only = yes

	immediate = {
		
	}
	# Volgograd
	option = {
		name = NSB_soviet_civil_war_common.010.a
		
		ai_chance = { 
			base = 10
		}
		trigger = {
			always = yes 
		}
		# Stalingrad
		set_province_name = {
			id = 3529
			name = SOV_Volgograd
		}
		hidden_effect = { 217 = { set_state_name = SOV_Volgograd } }
		# Stalino / Donetsk / Yuzovka / Trotsk 
		set_province_name = {
			id = 6474
			name = SOV_Donetsk
		}
		hidden_effect = { 227 = { set_state_name = SOV_Donetsk } }
		# Stalinabad / Dushanbe
		set_province_name = {
			id = 1384
			name = SOV_Dushanbe
		}
		hidden_effect = { 742 = { set_state_name = SOV_Dushanbe set_state_flag = dushanbe_flag } }
		# Kalinin / Tver
		IF = {
			limit = { NOT = { has_character = SOV_mikhail_kalinin } }
			set_province_name = {
				id = 6245
				name = SOV_Tver
			}
			hidden_effect = { 247 = { set_state_name = SOV_Tver } }
		}
		# Leningrad / Petrograd / St. Petersburg
		IF = {
			limit = {
				195 = { is_capital = no }
				SOV_is_exiles = yes 
			}
			set_province_name = {
				id = 3151
				name = SOV_StPetersburg
			}
			hidden_effect = { 195 = { set_state_name = SOV_StPetersburg } }
		}
		# Engels / Pokrovsk / Kosakenstadt + Marksshtadt / Yekaterinograd / Baronsk
		IF = {
			limit = {
				SOV_is_exiles = yes 
			}
			set_province_name = {
				id = 11523
				name = SOV_Pokrovsk
			}
			set_province_name = {
				id = 9432
				name = SOV_Baronsk
			}
			hidden_effect = { 829 = { set_state_name = SOV_Pokrovsk } }
		}
		# Kirov / Vyatka
		set_province_name = {
			id = 6124
			name = SOV_Vyatka
		}
		hidden_effect = { 400 = { set_state_name = SOV_Vyatka } }


		# Gorky / Nizhny Novgorod
		set_province_name = {
			id = 11375
			name = SOV_Nizhny_Novgorod
		}
		hidden_effect = { 252 = { set_state_name = SOV_Nizhny_Novgorod } }

		# Ordzhonikidze / Vladikavkaz
		IF = {
			limit = { SOV_is_exiles = yes }
			set_province_name = {
				id = 9628
				name = SOV_Vladikavkaz
			}
		}

		# Frunze / Bishkek / Bishkek
		IF = {
			limit = { SOV_is_exiles = yes }
			set_province_name = {
				id = 12583
				name = SOV_Bishkek
			}
		}
		# Yoshkar-Ola / Tsaryovokokshaysk / Krasnokokshaysk
		IF = {
			limit = { SOV_is_exiles = yes }
			set_province_name = {
				id = 9402
				name = SOV_Krasnokokshaysk
			}
		}
		# Kyzil / Belotsarsk / Khem-Beldir
		IF = {
			limit = { SOV_is_exiles = yes }
			set_province_name = {
				id = 10627
				name = SOV_Khem-Beldir
			}
		}
		# Makhachkala / Petrovskoye / Petrovsk-Port
		IF = {
			limit = { SOV_is_exiles = yes }
			set_province_name = {
				id = 6701
				name = SOV_Petrovsk-Port
			}
		}

		# Sverdlovsk / Yekaterinburg /  
		IF = {
			limit = { SOV_is_exiles = yes }
			set_province_name = {
				id = 1821
				name = SOV_Yekaterinburg
			}
			hidden_effect = { 653 = { set_state_name = SOV_Yekaterinburg } }
		}

	}
	# Tsaritsyn
	option = {
		name = NSB_soviet_civil_war_common.010.b
		
		ai_chance = { 
			base = 10
		}
		trigger = {
			SOV_is_exiles = yes 
		}
		# Stalingrad
		set_province_name = {
			id = 3529
			name = SOV_Tsaritsyn
		}
		hidden_effect = { 217 = { set_state_name = SOV_Tsaritsyn } }
		# Stalino / Donetsk / Yuzovka / Trotsk 
		set_province_name = {
			id = 6474
			name = SOV_Yuzovka
		}
		hidden_effect = { 227 = { set_state_name = SOV_Yuzovka } }
		# Stalinabad / Dushanbe
		set_province_name = {
			id = 1384
			name = SOV_Dushanbe
		}
		hidden_effect = { 742 = { set_state_name = SOV_Dushanbe set_state_flag = dushanbe_flag } }
		# Kalinin / Tver
		IF = {
			set_province_name = {
				id = 6245
				name = SOV_Tver
			}
			hidden_effect = { 247 = { set_state_name = SOV_Tver } }
		}
		# Leningrad / Petrograd / St. Petersburg
		IF = {
			limit = {
				195 = { is_capital = no }
				SOV_is_exiles = yes 
			}
			set_province_name = {
				id = 3151
				name = SOV_StPetersburg
			}
			hidden_effect = { 195 = { set_state_name = SOV_StPetersburg } }
		}
		# Engels / Pokrovsk / Kosakenstadt + Marksshtadt / Yekaterinograd / Baronsk
		IF = {
			limit = {
				SOV_is_exiles = yes 
			}
			set_province_name = {
				id = 11523
				name = SOV_Kosakenstadt
			}
			set_province_name = {
				id = 9432
				name = SOV_Yekaterinograd
			}
			hidden_effect = { 829 = { set_state_name = SOV_Yekaterinograd } }
		}
		# Kirov / Vyatka
		set_province_name = {
			id = 6124
			name = SOV_Vyatka
		}
		hidden_effect = { 400 = { set_state_name = SOV_Vyatka } }

		# Gorky / Nizhny Novgorod
		set_province_name = {
			id = 11375
			name = SOV_Nizhny_Novgorod
		}
		hidden_effect = { 252 = { set_state_name = SOV_Nizhny_Novgorod } }

		# Ordzhonikidze / Vladikavkaz
		IF = {
			limit = { SOV_is_exiles = yes }
			set_province_name = {
				id = 9628
				name = SOV_Vladikavkaz
			}
		}

		# Frunze / Bishkek / Bishkek
		IF = {
			limit = { SOV_is_exiles = yes }
			set_province_name = {
				id = 12583
				name = SOV_Bishkek
			}
		}
		# Yoshkar-Ola / Tsaryovokokshaysk / Krasnokokshaysk
		IF = {
			limit = { SOV_is_exiles = yes }
			set_province_name = {
				id = 9402
				name = SOV_Tsaryovokokshaysk
			}
		}
		# Kyzil / Belotsarsk / Khem-Beldir
		IF = {
			limit = { SOV_is_exiles = yes }
			set_province_name = {
				id = 10627
				name = SOV_Belotsarsk
			}
		}
		# Makhachkala / Petrovskoye / Petrovsk-Port
		IF = {
			limit = { SOV_is_exiles = yes }
			set_province_name = {
				id = 6701
				name = SOV_Petrovskoye
			}
		}
		# Anadyr / Novo-Mariinsk /
		IF = {
			limit = { SOV_is_exiles = yes }
			set_province_name = {
				id = 13063
				name = SOV_Novo-Mariinsk
			}
		}

		# Sverdlovsk / Yekaterinburg /  
		IF = {
			limit = { SOV_is_exiles = yes }
			set_province_name = {
				id = 1821
				name = SOV_Yekaterinburg
			}
			hidden_effect = { 653 = { set_state_name = SOV_Yekaterinburg } }
		}
	
		
	}
	# Trotskygrad
	option = {
		name = NSB_soviet_civil_war_common.010.c
		
		ai_chance = { 
			base = 10
		}
		trigger = {
			SOV_is_left_opposition = yes
		}
		
		# Stalingrad
		set_province_name = {
			id = 3529
			name = SOV_Trotskygrad
		}
		hidden_effect = { 217 = { set_state_name = SOV_Trotskygrad } }
		
		# Stalino / Donetsk / Yuzovka / Trotsk 
		set_province_name = {
			id = 6474
			name = SOV_Trotsk
		}
		hidden_effect = { 227 = { set_state_name = SOV_Trotsk } }
		# Stalinabad / Dushanbe
		set_province_name = {
			id = 1384
			name = SOV_Smirnovabad
		}
		hidden_effect = { 742 = { set_state_name = SOV_Smirnovabad } }
		# Kalinin / Tver
		IF = {
			limit = { NOT = { has_character = SOV_mikhail_kalinin } }
			IF = {
				limit = { has_character = SOV_grigory_zinovyev}
				set_province_name = {
					id = 6245
					name = SOV_zinovyev
				}
				hidden_effect = { 247 = { set_state_name = SOV_zinovyev } }
			}
			ELSE = {
				set_province_name = {
					id = 6245
					name = SOV_Tver
				}
				hidden_effect = { 247 = { set_state_name = SOV_Tver } }
			}
		}
		# Kirov / Vyatka
		set_province_name = {
			id = 6124
			name = SOV_Vyatka
		}
		hidden_effect = { 400 = { set_state_name = SOV_Vyatka } }

		# Gorky / Nizhny Novgorod
		set_province_name = {
			id = 11375
			name = SOV_Nizhny_Novgorod
		}
		hidden_effect = { 252 = { set_state_name = SOV_Nizhny_Novgorod } }
		
	}
	# Bukharino - Only if Right opposition, but Bukharin has been killed
	option = {
		name = NSB_soviet_civil_war_common.010.d
		
		ai_chance = { 
			base = 10
		}
		trigger = {
			SOV_is_right_opposition = yes
			SOV = { NOT = { has_character = SOV_nikolay_bukharin } }
		}
		# Stalingrad
		set_province_name = {
			id = 3529
			name = SOV_Bukharino
		}
		hidden_effect = { 217 = { set_state_name = SOV_Bukharino } }
		# Stalino / Donetsk / Yuzovka / Trotsk 
		set_province_name = {
			id = 6474
			name = SOV_Donetsk
		}
		hidden_effect = { 227 = { set_state_name = SOV_Donetsk }}
		# Stalinabad / Dushanbe
		set_province_name = {
			id = 1384
			name = SOV_Dushanbe
		}
		hidden_effect = { 742 = { set_state_name = SOV_Dushanbe set_state_flag = dushanbe_flag } }
		# Kalinin / Tver
		IF = {
			limit = { NOT = { has_character = SOV_mikhail_kalinin } }
			set_province_name = {
				id = 6245
				name = SOV_Rykovgrad
			}
			hidden_effect = { 247 = { set_state_name = SOV_Rykovgrad } }
		}
		# Kirov / Vyatka
		set_province_name = {
			id = 6124
			name = SOV_Vyatka
		}
		hidden_effect = { 400 = { set_state_name = SOV_Vyatka } }		

		# Gorky / Nizhny Novgorod
		set_province_name = {
			id = 11375
			name = SOV_Nizhny_Novgorod
		}
		hidden_effect = { 252 = { set_state_name = SOV_Nizhny_Novgorod } }
	}
}


# Sending offer of Vladivostok to Japan
country_event = {
	id = NSB_soviet_civil_war_common.100
	title = NSB_soviet_civil_war_common.100.t
	desc = {
		text = NSB_soviet_civil_war_common.100.desc  
		trigger = {
			SOV = { SOV_is_exiles = no }
		}
	}
	desc = {
		text = NSB_soviet_civil_war_common.100_exiles.desc  
		trigger = {
			SOV = { SOV_is_exiles = yes }
		}
	}
	immediate = {
		hidden_effect = {
			random_army_leader = {
				set_variable = { SOV.SOV_japanese_general = THIS } 
			}
		}
	}

	picture = "[GetJapaneseNegotiationsPicture]" 

	is_triggered_only = yes

	# Japan Agrees
	option = {
		name = NSB_soviet_civil_war_common.100.a
		ai_chance = {
			base = 2 # Japan should be pretty eager to say yes to this deal
			modifier = {
				factor = 5 # Military wants this!
				JAP = { 
					has_government = fascism
				}
			}
			modifier = { #Appropriate PC for Foreign Affairs
				factor = 1.5
				FROM = {
					SOV_is_opposition = yes
					has_idea = SOV_maksim_litvinov
				}
			}
			modifier = { #Appropriate PC for Foreign Affairs
				factor = 1.2
				FROM = {
					SOV_is_opposition = yes
					has_idea = SOV_vyacheslav_molotov
				}
			}
		}
		trigger = {
			NOT = { has_manpower < 80000 } # Don't show if not having the troops avaialable
		}
		add_manpower = -80000 # 80k seems to be the standard Japanese Russian Far East expeditionary force size, so why not this time around as well...
		FROM = {
			country_event = {
				id = NSB_soviet_civil_war_common.101
				hours = 8 
				random_hours = 12
			}
		}
		hidden_effect = {
			var:SOV.SOV_japanese_general = { set_character_flag = japanese_expeditionary_leader_flag }
		}
		custom_effect_tooltip = vladivostock_concession_tt
	}
	# Japan Refuses
	option = {
		name = NSB_soviet_civil_war_common.100.b
		ai_chance = {
			base = 1
			modifier = {
				factor = 0 # A fascist / militarist Japan, not already at war won't say no. 
				JAP = { 
					has_war = no
					NOT = { has_government = democratic }
					NOT = { has_government = communism }
				}
			}
			modifier = {
				factor = 1.5 # A non-fascist / militarist Japan, at war will be slightly more inclined not to commit manpower elsewhere
				JAP = { 
					has_war = yes 
					NOT = { has_government = democratic }
					NOT = { has_government = communism }
				}
			}
		}
		
		FROM = {
			country_event = {
				id = NSB_soviet_civil_war_common.102
				hours = 8
				random_hours = 12
			}
		}

	}
}

# Japan wants Vladivostok!
country_event = {
	id = NSB_soviet_civil_war_common.101
	title = NSB_soviet_civil_war_common.101.t
	desc = {
		text = NSB_soviet_civil_war_common.101.desc  
		trigger = {
			NOT = { SOV_is_exiles = yes }
		}
	}
	desc = {
		text = NSB_soviet_civil_war_common.101.desc_exiles
		trigger = {
			SOV_is_exiles = yes
		}
	}
	picture = "[GetJapaneseNegotiationsPicture]" 

	is_triggered_only = yes

	# Japan Agrees
	option = {
		name = NSB_soviet_civil_war_common.101.a
		set_country_flag = SOV_CSW_transfer_vladivostok_flag
		# If war is already raging
		IF = {
			limit = {
				has_global_flag = SOV_soviet_civil_war
				
			}
			hidden_effect = { SOV_set_up_japanese_troops = yes }
		}
	}
}

# Japan refuses Vladivostok!
country_event = {
	id = NSB_soviet_civil_war_common.102
	title = NSB_soviet_civil_war_common.102.t
	desc = NSB_soviet_civil_war_common.102.desc 
	picture = "[GetJapaneseNegotiationsPicture]" 

	is_triggered_only = yes

	# Japan refuses
	option = {
		name = NSB_soviet_civil_war_common.102.a	
	}
}


# How about Sakhalin?






# Sending "advisors"
country_event = {
	id = NSB_soviet_civil_war_common.109
	title = NSB_soviet_civil_war_common.109.t
	desc = NSB_soviet_civil_war_common.109.desc 
	picture = GFX_report_event_german_inspect_troops
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			random_army_leader = {
				# limit = { is_high_command = no }
				add_unit_leader_trait = trait_SOV_foreign_military_advisor
				set_variable = { ROOT.SOV_foreign_military_advisor_1 = THIS }
			}
			random_army_leader = {
				limit = { 
					# is_high_command = no 
					NOT = { has_trait = trait_SOV_foreign_military_advisor }
				}
				add_unit_leader_trait = trait_SOV_foreign_military_advisor
				set_variable = { ROOT.SOV_foreign_military_advisor_2 = THIS }
			}
		}
	}
	option = {
		name = NSB_soviet_civil_war_common.109.a	
		#var:ROOT.SOV_foreign_military_advisor_1 = { set_nationality = SOV }
		#var:ROOT.SOV_foreign_military_advisor_2 = { set_nationality = SOV }
		every_army_leader = {
			limit = {
				has_trait = trait_SOV_foreign_military_advisor
			}
			set_nationality = SOV
		}
	}
}

# Ukraininan independence to Germany


# Ukrainian insurrection prepped
country_event = {
	id = NSB_soviet_civil_war_common.113
	title = NSB_soviet_civil_war_common.113.t
	desc = {
		text = NSB_soviet_civil_war_common.113.desc_before
		trigger = { SOV_soviet_civil_war_not_started = yes } 
	}
	desc = {
		text = NSB_soviet_civil_war_common.113.desc_started
		trigger = { 
			OR = {
				has_global_flag = SOV_soviet_civil_war
				has_global_flag = SOV_soviet_civil_war_over
			}
		} 
	}

	picture =  GFX_report_event_gre_rural_rebels

	is_triggered_only = yes

	# Ukraine attacks Stalin now
	option = {
		name = NSB_soviet_civil_war_common.113.a	
		trigger = {
			has_global_flag = SOV_soviet_civil_war  
		}
		country_event = {
			id = NSB_soviet_civil_war_common.114
			hours = 6
		}
	}
	# Ukrainians are ready to strike when war breaks out
	option = {
		name = NSB_soviet_civil_war_common.113.b	
		trigger = {
			SOV_soviet_civil_war_not_started = yes 
		}
		set_country_flag = SOV_CSW_ukraine_germany_ready_flag
	}
	# Civil war over, the Ukrainians will launch the rebellion anyhow
	option = {
		name = NSB_soviet_civil_war_common.114.b	
		trigger = {
			has_global_flag = SOV_soviet_civil_war_over 
		}
		country_event = {
			id = NSB_soviet_civil_war_common.114
			hours = 6
		}
	}
}

# ukrainian insurrection starts 
country_event = {
	id = NSB_soviet_civil_war_common.114
	title = NSB_soviet_civil_war_common.114.t
	desc = NSB_soviet_civil_war_common.114.desc 
	picture =  GFX_report_event_generic_rally2

	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			every_country = {
				limit = {
					original_tag = SOV
				}
				every_owned_state = {
					limit = { is_core_of = UKR }
					UKR = { transfer_state = PREV }
				}
			}
		}
		UKR = {
			division_template = {
			    name = "German Trained Division"
				is_locked = yes
				priority = 1
				template_counter = 3
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
					artillery_brigade = { x= 2 y = 0}
				}
				is_locked = yes 
			}
			every_owned_state = {
				limit = { is_core_of = UKR }
				create_unit = { 
					division = "name = \"German Division\" division_template = \"German Trained Division\" start_experience_factor = 0.2 start_equipment_factor = 0.95" owner = UKR 
				}
			}

		}
	}

	option = {
		name = NSB_soviet_civil_war_common.114.a	
		trigger = {
			has_global_flag = SOV_soviet_civil_war_over 
		}
		
		declare_war_on = {
			target = UKR
			type = annex_everything
		} 
	}
	option = {
		name = NSB_soviet_civil_war_common.114.b	
		trigger = {
			has_global_flag = SOV_soviet_civil_war_over 
		}
	}
	option = {
		name = NSB_soviet_civil_war_common.114.c	
		trigger = {
			NOT = { has_global_flag = SOV_soviet_civil_war_over }
		}
		SOS = {
			declare_war_on = {
				target = UKR
				type = annex_everything
			} 
		}
	}
}




# Hirohito - tasukete kudasai !
country_event = {
	id = NSB_soviet_civil_war_common.121
	title = NSB_soviet_civil_war_common.121.t
	desc = NSB_soviet_civil_war_common.121.desc
	picture =  "[GetJapaneseNegotiationsPicture]" 

	is_triggered_only = yes

	# hai
	option = {
		name = NSB_soviet_civil_war_common.121.a
		ai_chance = { 
			base = 50
			modifier = {
				factor = 10
				has_government = FROM
			}
		}
		trigger = {
			NOT = { has_government = communism }
			NOT = { has_government = democratic }
		}
		FROM = {
			country_event = {
				id = NSB_soviet_civil_war_common.122
				days = 1
				random_days = 2
			}
		}	
	}
	# iie
	option = {
		name = NSB_soviet_civil_war_common.121.b	
		ai_chance = { 
			base = 10
			modifier = {
				factor = 2
				has_war = yes
			}
		}
		FROM = {
			country_event = {
				id = NSB_soviet_civil_war_common.123
				days = 1
				random_days = 2
			}
		}	
	}
}
# They are coming to help us!
country_event = {
	id = NSB_soviet_civil_war_common.122
	title = NSB_soviet_civil_war_common.122.t
	desc = NSB_soviet_civil_war_common.122.desc
	picture =  GFX_report_event_japanese_transport_soldiers

	is_triggered_only = yes

	option = {
		name = NSB_soviet_civil_war_common.122.a
		# Get Ideology Support
		set_variable = { SOV_communist_support_before_puppet = party_popularity_100@communism }
		set_variable = { SOV_democratic_support_before_puppet = party_popularity_100@democratic }
		set_variable = { SOV_fascist_support_before_puppet = party_popularity_100@fascism }
		set_variable = { SOV_neutrality_support_before_puppet = party_popularity_100@neutrality }
		JAP = {
			add_to_war = { 
			    targeted_alliance = ROOT 
				enemy = SOS 
				hostility_reason = asked_to_join
			}
		}
		IF = {
			limit = {
				has_dlc = "Together for Victory"
				NOT = { has_dlc = "Waking the Tiger" }
			}
			FROM = {
				set_autonomy = {
					target = ROOT
					autonomous_state = autonomy_integrated_puppet
					end_wars  = no 
					end_civil_wars = no
				}
			}
		}
		ELSE_IF = {
			limit = { 
				NOT = {
					has_dlc = "Waking the Tiger"
					has_dlc = "Together for Victory"
				}
			}
			FROM = {
				set_autonomy = {
					target = ROOT
					autonomous_state = autonomy_puppet
					end_wars  = no 
					end_civil_wars = no
				}
			}
		}
		ELSE_IF = {
			limit = { 
				has_dlc = "Waking the Tiger"
			}
			FROM = {
				set_autonomy = {
					target = ROOT
					autonomous_state = autonomy_wtt_imperial_protectorate
					end_wars  = no 
					end_civil_wars = no
				}
			}
		}
		# Ensure Provisional government stays Non-aligned
		hidden_effect = {
			ROOT = {
				set_politics = {
					ruling_party = neutrality
				}
			}
			# Reset popluarities to what they were before puppeting 
			set_popularities = {
				communism = SOV.SOV_communist_support_before_puppet
				democratic = SOV.SOV_democratic_support_before_puppet
				fascism = SOV.SOV_fascist_support_before_puppet
				neutrality = SOV.SOV_neutrality_support_before_puppet
			}
			clear_variable = SOV.SOV_communist_support_before_puppet
			clear_variable = SOV.SOV_democratic_support_before_puppet
			clear_variable = SOV.SOV_fascist_support_before_puppet
			clear_variable = SOV.SOV_neutrality_support_before_puppet
		}	
	}
}
# Japan abandones us!
country_event = {
	id = NSB_soviet_civil_war_common.123
	title = NSB_soviet_civil_war_common.123.t
	desc = NSB_soviet_civil_war_common.123.desc
	picture =  GFX_report_event_military_planning

	is_triggered_only = yes

	option = {
		name = NSB_soviet_civil_war_common.123.a	
	}
}

# Factories Done
country_event = {
	id = NSB_soviet_civil_war_common.124
	title = NSB_soviet_civil_war_common.124.t
	desc = NSB_soviet_civil_war_common.124.desc
	picture =  GFX_report_event_generic_factory

	is_triggered_only = yes

	option = {
		name = NSB_soviet_civil_war_common.124.a	
	}
}

# Snowballing - Defections Army
country_event = {
	id = NSB_soviet_civil_war_common.125
	title = NSB_soviet_civil_war_common.125.t
	desc = NSB_soviet_civil_war_common.125.desc
	picture = GFX_report_event_soviet_soldiers_tank

	is_triggered_only = yes

	trigger = {
		NOT = { SOS = { has_capitulated = yes }}
	}

	option = {
		name = NSB_soviet_civil_war_common.125.a
		custom_effect_tooltip = SOS_army_desertions_tt	
		hidden_effect = {
			every_state = {
				limit = {
					OR = {
						is_owned_by = SOV 
						is_owned_by = SOS
					}
				}
				damage_units = {
					state = THIS 
					limit = { tag = SOS } 
					damage = 0.1
					ratio = yes  
					army = yes
				}
			}

			SOS = {
				transfer_units_fraction= {
					target = SOV
					target_organization = 1
					source_organization = 1
					size = 0
					stockpile_ratio = 0
					army_ratio = 0.05
					navy_ratio = 0
					air_ratio = 0
					keep_unit_leaders_trigger = {
						always = yes 
					}
				}

			}
			SOV = { clr_country_flag = SOV_defections_army_flag }
		}
	}
}

# Snowballing - Stockpiles
country_event = {
	id = NSB_soviet_civil_war_common.126
	title = NSB_soviet_civil_war_common.126.t
	desc = NSB_soviet_civil_war_common.126.desc
	picture =  GFX_report_event_generic_rifles

	is_triggered_only = yes
	trigger = {
		NOT = { SOS = { has_capitulated = yes }}
	}

	option = {
		name = NSB_soviet_civil_war_common.126.a	
		
		SOV = { 
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 200
				producer = SOS
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 50
				producer = SOS
			}	
		}
		SOS = {
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = -200
				producer = SOS
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = -50
				producer = SOS
			}	

		}
		SOV = { clr_country_flag = SOV_stockpiles_flag }
	}
}

# Snowballing - Defections Navy
country_event = {
	id = NSB_soviet_civil_war_common.127
	title = NSB_soviet_civil_war_common.127.t
	desc = NSB_soviet_civil_war_common.127.desc
	picture =  GFX_report_event_SOV_purge_navy

	is_triggered_only = yes
	trigger = {
		NOT = { SOS = { has_capitulated = yes }}
	}

	option = {
		name = NSB_soviet_civil_war_common.127.a	
		custom_effect_tooltip = SOS_navy_desertions_tt
		hidden_effect = {
			SOS = {
				transfer_units_fraction= {
					target = SOV
					target_organization = 1
					source_organization = 1
					size = 0
					stockpile_ratio = 0
					army_ratio = 0
					navy_ratio = 0.1
					air_ratio = 0
					keep_unit_leaders_trigger = {
						always = yes 
					}
				}

			}
			SOV = { clr_country_flag = SOV_defections_navy_flag }
		}
	}
}

# Snowballing - Civilian Unrest
country_event = {
	id = NSB_soviet_civil_war_common.128
	title = NSB_soviet_civil_war_common.128.t
	desc = NSB_soviet_civil_war_common.128.desc
	picture =  GFX_report_event_generic_riot

	is_triggered_only = yes
	trigger = {
		NOT = { SOS = { has_capitulated = yes }}
	}

	option = {
		name = NSB_soviet_civil_war_common.128.a
		custom_effect_tooltip = SOS_civilian_unrest_tt
		hidden_effect = { 	
			SOS = {
				every_owned_state = {
					limit = {
						is_controlled_by = SOS
						arms_factory > 1
					}
					damage_building = {
						type = arms_factory
						damage = 2
					}
				}
				every_owned_state = {
					limit = {
						is_controlled_by = SOS
						industrial_complex > 1
					}
					damage_building = {
						type = industrial_complex 
						damage = 2
					}
				}
				add_to_variable = { SOV_surrender_modifier = -0.05 }
			}
			SOV = { clr_country_flag = SOV_civilian_unrest_flag }
		}
	}
}

# Japanese Leader leaves
unit_leader_event = {
	id = NSB_soviet_civil_war_common.129
	title = NSB_soviet_civil_war_common.129.t
	desc = NSB_soviet_civil_war_common.129.desc
	picture =  GFX_report_event_generic_riot

	is_triggered_only = yes

	option = {
		name = NSB_soviet_civil_war_common.129.a
		var:SOV.SOV_japanese_general = { set_nationality = SOV }
	}
}


#  #  ##  ### ###  ##  #  #  ##  #   ###  ## ###     #  # ###  ###  ###  ## ### #  #  ##   ## 
## # #  #  #   #  #  # ## # #  # #    #  #    #      #  # #  # #  #  #  #    #  ## # #    #   
# ## ####  #   #  #  # # ## #### #    #   #   #      #  # ###  ###   #   #   #  # ## # ##  #  
#  # #  #  #   #  #  # #  # #  # #    #    #  #      #  # #    #  #  #    #  #  #  # #  #   # 
#  # #  #  #  ###  ##  #  # #  # ### ### ##   #       ##  #    #  # ### ##  ### #  #  ##  ##  


# Dispatcher event for uprisings 
country_event = {
	id = NSB_soviet_nationalist.000
	title = NSB_soviet_nationalist.000.t
	desc = NSB_soviet_nationalist.000.desc
	picture =  GFX_report_event_SOV_purge_navy
	hidden = yes 
	is_triggered_only = yes

	option = {
		name = NSB_soviet_nationalist.000.a	
		IF = {
			limit = { has_global_flag =  SOV_soviet_civil_war } # No point in kicking off if war has ended already
			random_list = {
				35 = { } # Nothing happens 
				# the "Western" Front
				6 = { # Ukrainian uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 1.5 # To keep a ukrainian uprising always slightly more likely than the others
						always = yes
					}
					modifier = {
						factor = 0
						OR = { 
							has_country_flag = ukr_uprising_flag
							UKR = { exists = yes }
						}
					}
					set_variable = { SOV_nationalist_country = UKR }
					set_country_flag = ukr_uprising_flag
					SOV = { country_event = NSB_soviet_nationalist.001 }
				}
				2 = { # Belarussan uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = blr_uprising_flag
							BLR = { exists = yes }
						}
					}
					set_variable = { SOV_nationalist_country = BLR }
					set_country_flag = blr_uprising_flag
					SOV = { country_event = NSB_soviet_nationalist.001 }
				}
				1 = { # CRI uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0.25
						any_state = {
							is_core_of = CRI
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = CRI_uprising_flag
							CRI = { exists = yes }
						}
					}
					set_variable = { SOV_nationalist_country = CRI }
					set_country_flag = CRI_uprising_flag
					SOV = { country_event = NSB_soviet_nationalist.001 }
				}
				1 = { # KAR uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0.25
						any_state = {
							is_core_of = KAR
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = KAR_uprising_flag
							KAR = { exists = yes }
						}
					}
					set_variable = { SOV_nationalist_country = KAR }
					set_country_flag = KAR_uprising_flag
					SOV = { country_event = NSB_soviet_nationalist.001 }
				}
				# The Caucasus 
				3 = { # Georgian uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 1.5 # To keep a georgian uprising always slightly more likely than the others
						always = yes
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = geo_uprising_flag
							GEO = { exists = yes }
						}
					}
					set_variable = { SOV_nationalist_country = GEO }
					set_country_flag = geo_uprising_flag
					SOV = { country_event = NSB_soviet_nationalist.001 }
				}
				2 = { # Armenian uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = arm_uprising_flag
							ARM = { exists = yes }
						}
					}
					set_variable = { SOV_nationalist_country = ARM }
					set_country_flag = arm_uprising_flag
					SOV = { country_event = NSB_soviet_nationalist.001 }
				}
				2 = { # Azer uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = azr_uprising_flag
							AZR = { exists = yes }
						}
					}
					set_variable = { SOV_nationalist_country = AZR }
					set_country_flag = azr_uprising_flag
					SOV = { country_event = NSB_soviet_nationalist.001 }
				}
				1 = { # DAG uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0.25
						any_state = {
							is_core_of = DAG
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = DAG_uprising_flag
							DAG = { exists = yes }
						}
					}
					set_variable = { SOV_nationalist_country = DAG }
					set_country_flag = DAG_uprising_flag
					SOV = { country_event = NSB_soviet_nationalist.001 }
				}
				1 = { # CIN uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0.25
						any_state = {
							is_core_of = CIN
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = CIN_uprising_flag
							CIN = { exists = yes }
						}
					}
					set_variable = { SOV_nationalist_country = CIN }
					set_country_flag = CIN_uprising_flag
					SOV = { country_event = NSB_soviet_nationalist.001 }
				}

				# Central Asia
				1 = { # Khivan uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0.25
						any_state = {
							is_core_of = KHI
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = khi_uprising_flag
							KHI = { exists = yes }
						}
					}
					set_variable = { SOV_nationalist_country = KHI }
					set_country_flag = khi_uprising_flag
					SOV = { country_event = NSB_soviet_nationalist.001 }
				}
				1 = { # Bukharan uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0.25
						any_state = {
							is_core_of = BUK
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = buk_uprising_flag
							BUK = { exists = yes }
						}
					}
					set_variable = { SOV_nationalist_country = BUK }
					set_country_flag = buk_uprising_flag
					SOV = { country_event = NSB_soviet_nationalist.001 }
				}
				1 = { # Kazakh uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0
						any_state = {
							is_core_of = KAZ
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = kaz_uprising_flag
							KAZ = { exists = yes }
						}
					}
					set_variable = { SOV_nationalist_country = KAZ }
					set_country_flag = kaz_uprising_flag
					SOV = { country_event = NSB_soviet_nationalist.001 }
				}
				1 = { # UZB uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0
						any_state = {
							is_core_of = UZB
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = uzb_uprising_flag
							UZB = { exists = yes }
						}
					}
					set_variable = { SOV_nationalist_country = UZB }
					set_country_flag = uzb_uprising_flag
					SOV = { country_event = NSB_soviet_nationalist.001 }
				}
				1 = { # KKP uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0.25
						any_state = {
							is_core_of = KKP
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = kkp_uprising_flag
							KKP = { exists = yes }
						}
					}
					set_variable = { SOV_nationalist_country = KKP }
					set_country_flag = kkp_uprising_flag
					SOV = { country_event = NSB_soviet_nationalist.001 }
				}
				1 = { # TMS uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0.25
						any_state = {
							is_core_of = TMS
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = tms_uprising_flag
							TMS = { exists = yes }
						}
					}
					set_variable = { SOV_nationalist_country = TMS }
					set_country_flag = tms_uprising_flag
					SOV = { country_event = NSB_soviet_nationalist.001 }
				}
				1 = { # KYR uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0.25
						any_state = {
							is_core_of = KYR
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = KYR_uprising_flag
							KYR = { exists = yes }
						}
					}
					set_variable = { SOV_nationalist_country = KYR }
					set_country_flag = KYR_uprising_flag
					SOV = { country_event = NSB_soviet_nationalist.001 }
				}

			}
		}
	}
}

# Nationalist Revolt
country_event = {
	id = NSB_soviet_nationalist.001
	title = NSB_soviet_nationalist.001.t
	desc = NSB_soviet_nationalist.001.desc
	picture =  GFX_report_event_generic_rally2
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			every_country = {
				limit = {
					original_tag = SOV
				}
				every_owned_state = {
					limit = { is_core_of = var:SOV.SOV_nationalist_country }
					var:SOV.SOV_nationalist_country = { transfer_state = PREV }
				}
			}
			# Capture any Stalinist soldiers in our territory
			every_state = {
				limit = { is_owned_by = var:SOV.SOV_nationalist_country}
				SOS = { 
					delete_unit = { 
						state = PREV 
						disband = no 
					}
				}
			}
			var:SOV.SOV_nationalist_country  = {
				division_template = {
				    name = "Resistance Fighters"
					is_locked = yes
					priority = 1
					template_counter = 3
					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
						infantry = { x = 1 y = 0 }
						infantry = { x = 1 y = 1 }
					}
					is_locked = yes 
				}
				every_owned_state = {
					limit = { is_core_of = var:SOV.SOV_nationalist_country }
					create_unit = { 
						division = "name = \"Resistance Fighters\" division_template = \"Resistance Fighters\" start_experience_factor = 0.05 start_equipment_factor = 0.95" owner = var:SOV.SOV_nationalist_country count = 2
					}
				}
				random_owned_state = {
					limit = { 
						is_core_of = var:SOV.SOV_nationalist_country 
						is_capital = yes
					}
					create_unit = { 
						division = "name = \"Resistance Fighters\" division_template = \"Resistance Fighters\" start_experience_factor = 0.05 start_equipment_factor = 0.95" owner = var:SOV.SOV_nationalist_country count = 2
					}
				}


			}
			var:SOV.SOV_nationalist_country = {
				set_politics = { 
					ruling_party = democratic
					elections_allowed = yes 
				}
				add_popularity = {
					ideology = democratic 
					popularity = 0.4
				}
				add_popularity = {
					ideology = fascism  
					popularity = 0.2
				}
				add_popularity = {
					ideology = neutrality 
					popularity = 0.2
				}
				set_country_flag = SOV_breakaway_country_flag
				set_country_flag = SOV_unrecognized_country_flag 
				set_rule = { can_join_factions = no }
			}
			# Renaming of cities where apropriate 
			IF = {
				limit = { var:SOV.SOV_nationalist_country = { tag = KYR }}
				set_province_name = {
					id = 12583
					name = SOV_Bishkek
				}
			}
			ELSE_IF = {
				limit = { var:SOV.SOV_nationalist_country = { tag = MEL }}
				set_province_name = {
					id = 9402
					name = SOV_Krasnokokshaysk
				}
			}

		}
	}

	option = {
		name = NSB_soviet_nationalist.001.a	
		ai_chance = {
			base = 5 # The AI needs all the help it can get
		}
		var:SOV.SOV_nationalist_country = {
			add_named_threat = { 
				threat = -1
				name = indepence_war_threat
			}
			declare_war_on = {
				target = SOS
				type = independence_wargoal
			}
		}
		var:SOV.SOV_nationalist_country = {
			give_military_access = ROOT
		}
		ROOT = {
			give_military_access = var:SOV.SOV_nationalist_country
		}
	}
	option = {
		name = NSB_soviet_nationalist.001.b	
		ai_chance = {
			base = 1
		}
		var:SOV.SOV_nationalist_country = {
			declare_war_on = {
				target = SOS
				type = independence_wargoal
			}
		}
		var:SOV.SOV_nationalist_country = {
			add_named_threat = { 
				threat = -1 
				name = indepence_war_threat
			}
			declare_war_on = {
				target = ROOT
				type = independence_wargoal
			}
			

		}
	}
}


# Nationalists offered autonomy
country_event = {
	id = NSB_soviet_nationalist.002
	title = NSB_soviet_nationalist.002.t
	desc = NSB_soviet_nationalist.002.desc
	picture =  GFX_report_event_generic_read_write
	is_triggered_only = yes
	# Nah
	option = {
		name = NSB_soviet_nationalist.002.a	
		ai_chance = {
			base = 1
			modifier = {
				factor = 5
				is_in_faction = yes # Don't surrender so easily if already have friends
			}
			modifier = {
				factor = 2
				check_variable = { ROOT.num_owned_states > 5 } # We're big enough to defend ourselves
			}
		}
		FROM = {
			country_event = {
				id = NSB_soviet_nationalist.004
				days = 3
				random_days = 3
			}
		}
		
	}
	# We have to accept, I suppose
	option = {
		name = NSB_soviet_nationalist.002.b	
		ai_chance = {
			base = 1
			modifier = {
				factor = 2
				check_variable = { ROOT.num_owned_states < 3 }
			}
		}
		FROM = {
			country_event = {
				id = NSB_soviet_nationalist.003
				days = 3
				random_days = 3
			}
		}
	
	}
}

# Nationalists accept puppet status
country_event = {
	id = NSB_soviet_nationalist.003
	title = NSB_soviet_nationalist.003.t
	desc = NSB_soviet_nationalist.003.desc
	picture =  GFX_report_event_generic_sign_treaty2
	is_triggered_only = yes

	option = {
		name = NSB_soviet_nationalist.003.a	
		ai_chance = {
			base = 1 
		}
		ROOT = { puppet = FROM }
	}
}

# Nationalists reject puppet status
country_event = {
	id = NSB_soviet_nationalist.004
	title = NSB_soviet_nationalist.004.t
	desc = NSB_soviet_nationalist.004.desc
	picture =  GFX_report_event_generic_parliament
	is_triggered_only = yes
	# War it is
	option = {
		name = NSB_soviet_nationalist.004.a	
		ai_chance = {
			base = 3 
		}
		declare_war_on = {
			target = FROM
			type = puppet_wargoal_focus
		}
		
	}
	# Ah well, it was a nice try
	option = {
		name = NSB_soviet_nationalist.004.b	
		ai_chance = {
			base = 1
			modifier = {
				factor = 10
				FROM = {
					is_in_faction = yes # Let's not start a world war over this - yet
				}
			}
			modifier = {
				factor = 2
				ROOT = {
					has_war = yes # We should be slightly more careful if already at war.
				}
			}
		}
	}
}


###  ##   ##  ##  ###  ## ###    ###  ##  ##  ###  ###  ## ### 
#   #  # #   #  #  #  #    #      #  #   #  # #  #  #  #    #  
##  ####  #  #     #   #   #      #   #  #### ###   #   #   #  
#   #  #   # #  #  #    #  #      #    # #  # #  #  #    #  #  
#   #  # ##   ##  ### ##   #      #  ##  #  # #  # ### ##   #  


# Events for minor Slavic powers: "Join or die"
country_event = {
	id = NSB_soviet_fascist_tsarist.1
	title = NSB_soviet_fascist_tsarist.1.t
	desc = NSB_soviet_fascist_tsarist.1.desc
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes

	# Accept
	option = {
		name = NSB_soviet_fascist_tsarist.1.a
		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				strength_ratio = {
				    tag = FROM
				    ratio > 0.8
				}
			}
			modifier = {
				factor = 1.2
				has_opinion = {
				    target = FROM
				    value > 50
				}
			}
			modifier = {
				factor = 1.5
				has_opinion = {
				    target = FROM
				    value > 75
				}
			}
			modifier = {
				factor = 2
				has_opinion = {
				    target = FROM
				    value > 95
				}
			}
			modifier = {
				factor = 2
				is_in_faction_with = FROM
			}
		}
		custom_effect_tooltip = GAME_OVER_TT
		effect_tooltip = {
			FROM = {
				annex_country = {
					target = ROOT
					transfer_troops = yes
				}
			}
		}
		FROM = {
			country_event = NSB_soviet_fascist_tsarist.2
		}
	}

	# Reject
	option = {
		name = NSB_soviet_fascist_tsarist.1.b
		ai_chance = {
			base = 90
			modifier = {
				factor = 0
				is_subject_of = FROM
			}
			modifier = {
				factor = 0.2
				any_country = {
					is_major = yes
					OR = {
						has_wargoal_against = ROOT
						has_war_with = ROOT
					}
				}
			}
			modifier = {
				factor = 0.5
				surrender_progress > 0
			}
			modifier = {
				factor = 0.8
				strength_ratio = {
				    tag = FROM
				    ratio < 0.05
				}
			}
			modifier = {
				factor = 0.8
				has_war = yes
			}
			modifier = {
				factor = 1.2
				has_opinion = {
				    target = FROM
				    value < 0
				}
			}
			modifier = {
				factor = 1.5
				has_opinion = {
				    target = FROM
				    value < -50
				}
			}
			modifier = {
				factor = 2
				has_opinion = {
				    target = FROM
				    value < -75
				}
			}
			modifier = {
				factor = 2
				has_opinion = {
				    target = FROM
				    value < -90
				}
			}
			modifier = {
				factor = 2
				strength_ratio = {
				    tag = FROM
				    ratio > 0.5
				}
			}
		}
		effect_tooltip = {
			FROM = {
				create_wargoal = {
				    type = annex_everything
				    target = ROOT
				}
			}
		}
		FROM = {
			country_event = NSB_soviet_fascist_tsarist.3
		}
	}
}

# Events for Russia: Slavic country accepted "Join or die"
country_event = {
	id = NSB_soviet_fascist_tsarist.2
	title = NSB_soviet_fascist_tsarist.2.t
	desc = NSB_soviet_fascist_tsarist.2.desc
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes

	# Excellent!
	option = {
		name = NSB_soviet_fascist_tsarist.2.a
		annex_country = {
			target = FROM
			transfer_troops = yes
		}
	}
}

# Events for Russia: Slavic country rejected "Join or die"
country_event = {
	id = NSB_soviet_fascist_tsarist.3
	title = NSB_soviet_fascist_tsarist.3.t
	desc = NSB_soviet_fascist_tsarist.3.desc
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes

	# Excellent!
	option = {
		name = NSB_soviet_fascist_tsarist.3.a
		create_wargoal = {
		    type = annex_everything
		    target = FROM
		}
	}
}

# Event for Central American nations (excluding Mexico): Russia influencing our politics!

# Event for American Fascist nations: Wanna join the party?
country_event = {
	id = NSB_soviet_fascist_tsarist.5
	title = NSB_soviet_fascist_tsarist.5.t
	desc = NSB_soviet_fascist_tsarist.5.desc
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes

	# Sounds good!
	option = {
		name = NSB_soviet_fascist_tsarist.5.a
		FROM = {
			add_to_faction = ROOT
			hidden_effect = {
				country_event = { id = NSB_soviet_fascist_tsarist.6 }
			}
		}
	}

	# No thanks!
	option = {
		name = NSB_soviet_fascist_tsarist.5.b
		hidden_effect = {
			country_event = { id = NSB_soviet_fascist_tsarist.7 }
		}
	}
}

# Events for Russia: American country joins faction
country_event = {
	id = NSB_soviet_fascist_tsarist.6
	title = NSB_soviet_fascist_tsarist.6.t
	desc = NSB_soviet_fascist_tsarist.6.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	# Excellent!
	option = {
		name = NSB_soviet_fascist_tsarist.6.a
		effect_tooltip = {
			add_to_faction = FROM
		}
	}
}

# Events for Russia: American country refuses to join faction
country_event = {
	id = NSB_soviet_fascist_tsarist.7
	title = NSB_soviet_fascist_tsarist.7.t
	desc = NSB_soviet_fascist_tsarist.7.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	# Bummer
	option = {
		name = NSB_soviet_fascist_tsarist.7.a

	}
}

# Event for American Fascist nations that have switched fascist later on: Wanna join the party?
country_event = {
	id = NSB_soviet_fascist_tsarist.8
	title = NSB_soviet_fascist_tsarist.7.t
	desc = NSB_soviet_fascist_tsarist.8.desc
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes

	# Sounds good!
	option = {
		name = NSB_soviet_fascist_tsarist.7.a
		FROM = {
			add_to_faction = ROOT
			hidden_effect = {
				country_event = { id = NSB_soviet_fascist_tsarist.9 }
			}
		}
	}

	# No thanks!
	option = {
		name = NSB_soviet_fascist_tsarist.7.b
		hidden_effect = {
			country_event = { id = NSB_soviet_fascist_tsarist.10 }
		}
	}
}

# Events for Russia: American country joins faction
country_event = {
	id = NSB_soviet_fascist_tsarist.9
	title = NSB_soviet_fascist_tsarist.6.t
	desc = NSB_soviet_fascist_tsarist.9.desc
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	# Excellent!
	option = {
		name = NSB_soviet_fascist_tsarist.6.a
		effect_tooltip = {
			add_to_faction = FROM
		}
	}
}

# Events for Russia: American country refuses to join faction
country_event = {
	id = NSB_soviet_fascist_tsarist.10
	title = NSB_soviet_fascist_tsarist.6.t
	desc = NSB_soviet_fascist_tsarist.10.desc
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	# Bummer
	option = {
		name = NSB_soviet_fascist_tsarist.6.a

	}
}

# Event for Japan: Russia's rebuilding Far Eastern Fleet infrastructure
country_event = {
	id = NSB_soviet_fascist_tsarist.11
	title = NSB_soviet_fascist_tsarist.11.t
	desc = NSB_soviet_fascist_tsarist.11.desc
	picture = GFX_report_event_usa_heavy_cruiser

	trigger = {
		original_tag = JAP
		NOT = { 
			SOV = {
				has_completed_focus = SOV_rebuild_the_far_eastern_fleet
			}
		}
		SOV = {
			focus_progress = {
				focus = SOV_rebuild_the_far_eastern_fleet
				progress > 0.33
			}
		}
	}

	mean_time_to_happen = {
		days = 2
	}

	# Concerning!
	option = {
		name = NSB_soviet_fascist_tsarist.11.a
	}
}

# Event for Japan: Russia's digging up the past
country_event = {
	id = NSB_soviet_fascist_tsarist.12
	title = NSB_soviet_fascist_tsarist.12.t
	desc = NSB_soviet_fascist_tsarist.12.desc
	picture = GFX_report_event_fascist_speech

	trigger = {
		original_tag = SOV
		NOT = { has_completed_focus = SOV_memories_of_1905 }
		focus_progress = {
			focus = SOV_memories_of_1905
			progress > 0.33
		}
	}

	mean_time_to_happen = {
		days = 2
	}

	# They're coming for us!
	option = {
		name = NSB_soviet_fascist_tsarist.12.a
	}
}

# Event for USA: Russia's building military infrastructure facing Alaska
country_event = {
	id = NSB_soviet_fascist_tsarist.13
	title = NSB_soviet_fascist_tsarist.13.t
	desc = NSB_soviet_fascist_tsarist.13.desc
	picture = GFX_report_event_soviet_tanks

	trigger = {
		original_tag = USA
		NOT = { 
			SOV = {
				has_completed_focus = SOV_eastern_expansion
			}
		}
		SOV = {
			focus_progress = {
				focus = SOV_eastern_expansion
				progress > 0.33
			}
		}
	}

	mean_time_to_happen = {
		days = 2
	}

	# They're coming for us!
	option = {
		name = NSB_soviet_fascist_tsarist.13.a
	}
}


# Event for Russia: coronation of Tsar Vladimir I
country_event = {
	id = NSB_soviet_fascist_tsarist.14
	title = NSB_soviet_fascist_tsarist.14.t
	desc = NSB_soviet_fascist_tsarist.14.desc
	picture = GFX_report_event_generic_military_parade

	is_triggered_only = yes

	# Glorious!
	option = {
		name = NSB_soviet_fascist_tsarist.14.a
		promote_character = SOV_tsar_vladimir_kirillovich
		news_event = { id = nsb_news.400 hours = 12 }
		hidden_effect = {
			ROOT = { drop_cosmetic_tag = yes }
			set_cosmetic_tag = russian_empire
		}

	}
}

# Event for Russia: coronation of Patriarch Meletius


# Event for ENG/FRA: Russia proposes recreation of Triple Entente
country_event = {
	id = NSB_soviet_fascist_tsarist.16
	title = NSB_soviet_fascist_tsarist.16.t
	desc = NSB_soviet_fascist_tsarist.16.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	# Yes
	option = {
		name = NSB_soviet_fascist_tsarist.16.a
		set_faction_name = TRIPLE_ENTENTE
		add_to_faction = FROM
		FROM = {
			country_event = { id = NSB_soviet_fascist_tsarist.17 }
		}
		if = {
			limit = {
				tag = ENG
				FRA = {
					is_in_faction = no
					NOT = { has_war_with = ROOT }
					NOT = { has_war_with = FROM }
				}
			}
			FRA = { country_event = { id = NSB_soviet_fascist_tsarist.19 hours = 12 random = 60 } }
		}
		if = {
			limit = {
				tag = FRA
				ENG = {
					is_in_faction = no
					NOT = { has_war_with = ROOT }
					NOT = { has_war_with = FROM }
				}
			}
			ENG = { country_event = { id = NSB_soviet_fascist_tsarist.19 hours = 12 random = 60 } }
		}
	}

	# No
	option = {
		name = NSB_soviet_fascist_tsarist.16.b
		FROM = {
			country_event = { id = NSB_soviet_fascist_tsarist.18 hours = 6 }
		}
	}
}

# Event for SOV: Proposal for Triple Entente Accepted
country_event = {
	id = NSB_soviet_fascist_tsarist.17
	title = NSB_soviet_fascist_tsarist.17.t
	desc = NSB_soviet_fascist_tsarist.17.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	# Good
	option = {
		name = NSB_soviet_fascist_tsarist.17.a
		effect_tooltip = {
			FROM = {
				set_faction_name = TRIPLE_ENTENTE
				add_to_faction = ROOT
			}
			if = {
				limit = {
					FROM = { tag = ENG }
					FRA = { is_in_faction = no }
				}
				FRA = { country_event = { id = NSB_soviet_fascist_tsarist.19 hours = 12 random = 60 } }
			}
			if = {
				limit = {
					FROM = { tag = FRA }
					ENG = { is_in_faction = no }
				}
				ENG = { country_event = { id = NSB_soviet_fascist_tsarist.19 hours = 12 random = 60 } }
			}
		}
		news_event = { id = nsb_news.407 hours = 12 }
	}
}

# Event for SOV: Proposal for Triple Entente Rejected
country_event = {
	id = NSB_soviet_fascist_tsarist.18
	title = NSB_soviet_fascist_tsarist.18.t
	desc = NSB_soviet_fascist_tsarist.18.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	# Unfortunate
	option = {
		name = NSB_soviet_fascist_tsarist.18.a
		
	}
}

# Event for ENG/FRA: Invitation to Triple Entente
country_event = {
	id = NSB_soviet_fascist_tsarist.19
	title = NSB_soviet_fascist_tsarist.16.t
	desc = NSB_soviet_fascist_tsarist.19.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	# Yes
	option = {
		name = NSB_soviet_fascist_tsarist.19.a
		FROM = {
			add_to_faction = ROOT
			country_event = NSB_soviet_fascist_tsarist.20
		}
	}

	# No
	option = {
		name = NSB_soviet_fascist_tsarist.19.b
		FROM = {
			country_event = NSB_soviet_fascist_tsarist.21
		}
	}
}

# Event for FROM: Invitation to Triple Entente Accepted
country_event = {
	id = NSB_soviet_fascist_tsarist.20
	title = NSB_soviet_fascist_tsarist.17.t
	desc = NSB_soviet_fascist_tsarist.17.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	# Good
	option = {
		name = NSB_soviet_fascist_tsarist.20.a
		effect_tooltip = { add_to_faction = FROM }
		news_event = { id = nsb_news.408 hours = 12 }
	}
}

# Event for FROM: Invitation to Triple Entente Rejected
country_event = {
	id = NSB_soviet_fascist_tsarist.21
	title = NSB_soviet_fascist_tsarist.18.t
	desc = NSB_soviet_fascist_tsarist.18.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	# Unfortunate
	option = {
		name = NSB_soviet_fascist_tsarist.21.a
		
	}
}

# Event for GER: Russia wants to join Axis
country_event = {
	id = NSB_soviet_fascist_tsarist.22
	title = NSB_soviet_fascist_tsarist.22.t
	desc = NSB_soviet_fascist_tsarist.22.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	# Yes
	option = {
		name = NSB_soviet_fascist_tsarist.22.a
		add_to_faction = FROM
		FROM = {
			country_event = NSB_soviet_fascist_tsarist.23
		}
	}

	# No
	option = {
		name = NSB_soviet_fascist_tsarist.22.b
		FROM = {
			country_event = NSB_soviet_fascist_tsarist.24
		}
	}
}

# Event for Russia: Germany accepts
country_event = {
	id = NSB_soviet_fascist_tsarist.23
	title = NSB_soviet_fascist_tsarist.23.t
	desc = NSB_soviet_fascist_tsarist.23.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	# Good
	option = {
		name = NSB_soviet_fascist_tsarist.22.a
		effect_tooltip = { FROM = { add_to_faction = ROOT } }
		news_event = { id = nsb_news.402 hours = 12 }
	}
}

# Event for Russia: Germany rejects
country_event = {
	id = NSB_soviet_fascist_tsarist.24
	title = NSB_soviet_fascist_tsarist.24.t
	desc = NSB_soviet_fascist_tsarist.24.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	# Unfortunate
	option = {
		name = NSB_soviet_fascist_tsarist.24.a
		
	}
}


# Event for GER: Russia wants Japan to be invited
country_event = {
	id = NSB_soviet_fascist_tsarist.25
	title = NSB_soviet_fascist_tsarist.25.t
	desc = NSB_soviet_fascist_tsarist.25.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	# Yes
	option = {
		name = NSB_soviet_fascist_tsarist.25.a
		JAP = {
			country_event = NSB_soviet_fascist_tsarist.29
		}
	}

	# No
	option = {
		name = NSB_soviet_fascist_tsarist.25.b
		FROM = {
			country_event = NSB_soviet_fascist_tsarist.28
		}
	}
}

# Event for Russia: Germany accepted proposal, Japan accepted invitation
country_event = {
	id = NSB_soviet_fascist_tsarist.26
	title = NSB_soviet_fascist_tsarist.26.t
	desc = NSB_soviet_fascist_tsarist.26.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	# Good
	option = {
		name = NSB_soviet_fascist_tsarist.26.a
		effect_tooltip = { FROM = { add_to_faction = JAP} }
		news_event = { id = nsb_news.409 hours = 12 }
	}
}

# Event for Russia: Germany accepted proposal, Japan rejected invitation
country_event = {
	id = NSB_soviet_fascist_tsarist.27
	title = NSB_soviet_fascist_tsarist.27.t
	desc = NSB_soviet_fascist_tsarist.27.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	# Unfortunate
	option = {
		name = NSB_soviet_fascist_tsarist.27.a
		
	}
}

# Event for Russia: Germany rejected proposal
country_event = {
	id = NSB_soviet_fascist_tsarist.28
	title = NSB_soviet_fascist_tsarist.28.t
	desc = NSB_soviet_fascist_tsarist.28.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	# Unfortunate
	option = {
		name = NSB_soviet_fascist_tsarist.28.a
		
	}
}

# Event for JAP: Germany and Russia invite Japan to faction
country_event = {
	id = NSB_soviet_fascist_tsarist.29
	title = NSB_soviet_fascist_tsarist.25.t
	desc = NSB_soviet_fascist_tsarist.29.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	# Yes
	option = {
		name = NSB_soviet_fascist_tsarist.29.a
		FROM = {
			effect_tooltip = {
				add_to_faction = ROOT
			}
			country_event = NSB_soviet_fascist_tsarist.30
		}
	}

	# No
	option = {
		name = NSB_soviet_fascist_tsarist.29.b
		FROM = {
			country_event = NSB_soviet_fascist_tsarist.31
		}
	}
}

# Event for GER: Japan accepted invitation
country_event = {
	id = NSB_soviet_fascist_tsarist.30
	title = NSB_soviet_fascist_tsarist.26.t
	desc = NSB_soviet_fascist_tsarist.30.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	# Great!
	option = {
		name = NSB_soviet_fascist_tsarist.30.a
		add_to_faction = FROM
		SOV = {
			country_event = NSB_soviet_fascist_tsarist.26
		}
	}
}

# Event for GER: Japan rejected invitation
country_event = {
	id = NSB_soviet_fascist_tsarist.31
	title = NSB_soviet_fascist_tsarist.27.t
	desc = NSB_soviet_fascist_tsarist.31.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	# Unfortunate
	option = {
		name = NSB_soviet_fascist_tsarist.31.a
		SOV = {
			country_event = NSB_soviet_fascist_tsarist.27
		}
	}
}

# Event for GER: Vlasov captured/collaborates
country_event = {
	id = NSB_soviet_fascist_tsarist.32
	title = NSB_soviet_fascist_tsarist.32.t
	desc = NSB_soviet_fascist_tsarist.32.desc
	picture = GFX_report_event_soviet_soldiers

	fire_only_once = yes
	
	trigger = {
		original_tag = GER
		has_war_with = SOV
		SOV = {
			has_government = communism
			has_country_leader = { character = SOV_iosif_stalin ruling_only = yes }
			surrender_progress > 0.25
		}
		has_dlc = "No Step Back"
	}

	mean_time_to_happen = {
		days = 14
	}

	# A great idea!
	option = {
		name = NSB_soviet_fascist_tsarist.32.a
		SOV = {
			SOV_andrey_vlasov = {
				set_nationality = GER
			}
		}
		division_template = {
			name = "Russische Freiwilligendivision"
			template_counter = 4
			division_names_group = GER_Inf_01
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				infantry = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
				artillery_brigade = { x = 2 y = 2 }
			}
			support = {
				recon = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
			}
		}
		random_controlled_state = {
			limit = {
				is_core_of = SOV
			}
			create_unit = {
				division = "name = \"600. (russ.) Infanterie-Division\" division_template = \"Russische Freiwilligendivision\" start_experience_factor = 0.3"
				owner = GER
			}
			create_unit = {
				division = "name = \"650. (russ.) Infanterie-Division\" division_template = \"Russische Freiwilligendivision\" start_experience_factor = 0.3"
				owner = GER
			}
			create_unit = {
				division = "name = \"700. (russ.) Infanterie-Division\" division_template = \"Russische Freiwilligendivision\" start_experience_factor = 0.3"
				owner = GER
			}
		}
		SOV = {
			clr_country_flag = vlasov_owner_flag
			country_event = { id = NSB_soviet_fascist_tsarist.33 hours = 12 }
		}
		set_country_flag = vlasov_owner_flag
	}

	# Let's not
	option = {
		name = NSB_soviet_fascist_tsarist.32.b
		SOV = {
			SOV_andrey_vlasov = {
				set_nationality = GER
				set_character_flag = vlasov_imprisoned_flag
			}
		}
		SOV = {
			clr_country_flag = vlasov_owner_flag
			country_event = { id = NSB_soviet_fascist_tsarist.33 hours = 12 }
		}
		set_country_flag = vlasov_owner_flag
	}
}

# Event for SOV: Vlasov captured
country_event = {
	id = NSB_soviet_fascist_tsarist.33
	title = NSB_soviet_fascist_tsarist.32.t
	desc = NSB_soviet_fascist_tsarist.33.desc
	picture = GFX_report_event_soviet_soldiers

	is_triggered_only = yes

	# Unfortunate
	option = {
		name = NSB_soviet_fascist_tsarist.33.a
		effect_tooltip = {
			SOV_andrey_vlasov = {
				set_nationality = GER
			}
		}
	}
}