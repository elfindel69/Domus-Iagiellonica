#####
##### PROPAGANDA SYSTEM #####
#####


#####
##### PARANOIA SYSTEM #####
#####



####
#### INDUSTRIAL STUFF ####
####

RUS_replace_industrial_designer = {
	custom_effect_tooltip = RUS_upgrade_industrial_designer_tt
	if = {
		limit = {
			has_idea = stalingrad_tractor_factory
		}
		swap_ideas = {
			remove_idea = stalingrad_tractor_factory
			add_idea = stalingrad_tractor_factory_improved
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_soviet_railways
		}
		swap_ideas = {
			remove_idea = RUS_soviet_railways
			add_idea = RUS_soviet_railways_improved
		}
	}
}



####
#### FOREIGN POLITICS ####
####

RUS_fortify_mongolian_border_effect = {
	330 = {
		add_building_construction = { #ULAAN BAATAR
			type = bunker
			level = 1
			instant_build = yes
			province = 4801
		}
	}
	if = {
		limit = {
			761 = { #HULUNBUIR
				controller = {
					RUS_is_threated_by_japan = yes
				}
			}
		}
		819 = {
			add_building_construction = { #BORDER
				type = bunker
				level = 2
				instant_build = yes
				province = {
					id = 4792
					id = 12557
					id = 1743
				}
			}
		}
		ROOT = { set_country_flag = RUS_mongolian_forts_1_flag }
	}
	if = {
		limit = {
			612 = { #CHAHAR
				controller = {
					RUS_is_threated_by_japan = yes
				}
			}
		}
		if = { #Do not repeat same province twice
			limit = {
				ROOT = { has_country_flag = RUS_mongolian_forts_1_flag }
			}
			819 = {
				add_building_construction = { #BORDER
					type = bunker
					level = 2
					instant_build = yes
					province = {
						id = 12629
						id = 4873
					}
				}
			}
		}
		else = {
			819 = {
				add_building_construction = { #BORDER
					type = bunker
					level = 2
					instant_build = yes
					province = {
						id = 1743
						id = 12629
						id = 4873
					}
				}
			}
		}
		817 = {
			add_building_construction = { #BORDER
				type = bunker
				level = 2
				instant_build = yes
				province = {
					id = 10575
					id = 4655
				}
			}
		}
		ROOT = { clr_country_flag = RUS_mongolian_forts_1_flag }
		ROOT = { set_country_flag = RUS_mongolian_forts_2_flag }
	}
	if = {
		limit = {
			621 = { #SUIYUAN
				controller = {
					RUS_is_threated_by_japan = yes
				}
			}
		}
		if = { #Do not repeat same province twice
			limit = {
				ROOT = { has_country_flag = RUS_mongolian_forts_2_flag }
			}
			817 = {
				add_building_construction = { #BORDER
					type = bunker
					level = 2
					instant_build = yes
					province = {
						id = 1723
						id = 1853
						id = 12539
						id = 10558
					}
				}
			}
		}
		else = {
			817 = {
				add_building_construction = { #BORDER
					type = bunker
					level = 2
					instant_build = yes
					province = {
						id = 4655
						id = 1723
						id = 1853
						id = 12539
						id = 10558
					}
				}
			}
		}
		ROOT = { clr_country_flag = RUS_mongolian_forts_2_flag }
		ROOT = { set_country_flag = RUS_mongolian_forts_3_flag }
	}
	if = {
		limit = {
			756 = { #JIUQUAN
				controller = {
					RUS_is_threated_by_japan = yes
				}
			}
		}
		if = { #Do not repeat same province twice
			limit = {
				ROOT = { has_country_flag = RUS_mongolian_forts_3_flag }
			}
			817 = {
				add_building_construction = { #BORDER
					type = bunker
					level = 2
					instant_build = yes
					province = {
						id = 10689
						id = 4786
						id = 1781
					}
				}
			}
		}
		else = {
			817 = {
				add_building_construction = { #BORDER
					type = bunker
					level = 2
					instant_build = yes
					province = {
						id = 10558
						id = 10689
						id = 4786
						id = 1781
					}
				}
			}
		}
		ROOT = { clr_country_flag = RUS_mongolian_forts_3_flag }
		ROOT = { set_country_flag = RUS_mongolian_forts_4_flag }
	}
	if = {
		limit = {
			760 = { #DABANCHENG
				controller = {
					RUS_is_threated_by_japan = yes
				}
			}
		}
		if = { #Do not repeat same province twice
			limit = {
				ROOT = { has_country_flag = RUS_mongolian_forts_4_flag }
			}
			817 = {
				add_building_construction = { #BORDER
					type = bunker
					level = 2
					instant_build = yes
					province = {
						id = 10560
						id = 1855
					}
				}
			}
		}
		else = {
			817 = {
				add_building_construction = { #BORDER
					type = bunker
					level = 2
					instant_build = yes
					province = {
						id = 1781
						id = 10560
						id = 1855
					}
				}
			}
		}
		817 = {
			add_building_construction = { #BORDER
				type = bunker
				level = 2
				instant_build = yes
				province = {
					id = 7808
				}
			}
		}
		ROOT = { clr_country_flag = RUS_mongolian_forts_4_flag }
		ROOT = { set_country_flag = RUS_mongolian_forts_5_flag }
	}
	if = {
		limit = {
			618 = { #DZUNGARIA
				controller = {
					RUS_is_threated_by_japan = yes
				}
			}
		}
		if = { #Do not repeat same province twice
			limit = {
				ROOT = { has_country_flag = RUS_mongolian_forts_5_flag }
			}
			818 = {
				add_building_construction = { #BORDER
					type = bunker
					level = 2
					instant_build = yes
					province = {
						id = 7870
						id = 1774
						id = 10539
						id = 4751
					}
				}
			}
		}
		else = {
			818 = {
				add_building_construction = { #BORDER
					type = bunker
					level = 2
					instant_build = yes
					province = {
						id = 7808
						id = 7870
						id = 1774
						id = 10539
						id = 4751
					}
				}
			}
		}
		ROOT = { clr_country_flag = RUS_mongolian_forts_5_flag }
	}
}

RUS_clear_targeted_relation_modifiers_effect = {
	#log = "Effect Called"
	every_other_country = {
		limit = {
			capital_scope = { is_on_continent = europe }
			BWR = {
				has_relation_modifier = {
					target = PREV
					modifier = RUS_face_western_fascism_static
				}
			}
		}
		#log = "Removing shit in [THIS.GetName]"
		BWR = {
			remove_relation_modifier = {
				target = PREV
				modifier = RUS_face_western_fascism_static
			}
		}
	}
	#log = "------- SPACE -------"
	GER = {
		BWR = {
			remove_relation_modifier = {
				target = PREV
				modifier = RUS_face_western_fascism_static
			}
			#log = "[GER.getname] is now clean"
		}
	}
}

RUS_clear_hidden_targeted_ns_effect = {
	if = {
		limit = {
			has_idea = RUS_targeted_bonus_against_ENG
		}
		add_ideas = RUS_targeted_bonus_against_ENG
	}
	if = {
		limit = {
			has_idea = RUS_targeted_bonus_against_FRA
		}
		add_ideas = RUS_targeted_bonus_against_FRA
	}
	if = {
		limit = {
			has_idea = RUS_targeted_bonus_against_GER
		}
		add_ideas = RUS_targeted_bonus_against_GER
	}
	if = {
		limit = {
			has_idea = RUS_targeted_bonus_against_ITA
		}
		add_ideas = RUS_targeted_bonus_against_ITA
	}
	if = {
		limit = {
			has_idea = RUS_targeted_bonus_against_USA
		}
		add_ideas = RUS_targeted_bonus_against_USA
	}
	if = {
		limit = {
			has_idea = RUS_targeted_bonus_against_JAP
		}
		add_ideas = RUS_targeted_bonus_against_JAP
	}
}

RUS_foreign_politics_decision_cost_reduction_effect = { #Add more diplomacy vars here to divide and round them
	divide_variable = { RUS_pressure_country_government_cost = 2 }
	divide_variable = { RUS_promote_ideology_rallies_cost = 2 }
	divide_variable = { RUS_send_ultimatum_to_country_cost = 2 }
	divide_variable = { RUS_send_infantry_equipment_cost = 2 }
	divide_variable = { RUS_peace_deal_cost = 2 }
	divide_variable = { RUS_sinkiang_proposal_cost = 2 }

	round_variable = RUS_pressure_country_government_cost
	round_variable = RUS_promote_ideology_rallies_cost
	round_variable = RUS_send_ultimatum_to_country_cost
	round_variable = RUS_send_infantry_equipment_cost
	round_variable = RUS_peace_deal_cost
	round_variable = RUS_sinkiang_proposal_cost
}

RUS_approach_sinkiang_diplomacy_effect = {
	add_ai_strategy = {
		type = befriend
		id = SIK			
		value = 15
	}
	add_ai_strategy = {
		type = alliance
		id = SIK		
		value = 15
	}
	SIK = {
		add_ai_strategy = {
			type = befriend
			id = BWR			
			value = 10
		}
		add_ai_strategy = {
			type = alliance
			id = CHI		
			value = -5
		}
		add_ai_strategy = {
			type = alliance
			id = PRC		
			value = -5
		}
		add_ai_strategy = {
			type = alliance
			id = XSM		
			value = -5
		}
		add_ai_strategy = {
			type = alliance
			id = SHX		
			value = -5
		}
		add_ai_strategy = {
			type = alliance
			id = YUN		
			value = -5
		}
		add_ai_strategy = {
			type = alliance
			id = GXC		
			value = -5
		}
		add_ai_strategy = {
			type = alliance
			id = MEN		
			value = -5
		}
		add_ai_strategy = {
			type = alliance
			id = MAN		
			value = -5
		}
	}
}

RUS_set_appropriate_national_academy_of_sciences_flag_effect = {
	#log = "ROOT is [ROOT.GetName]"
	#log = "FROM is [FROM.GetName]"
	if = {
		limit = {
			FROM = { tag = BLR }
		}
		ROOT = { set_country_flag = RUS_national_academy_of_sciences_built_BLR_flag }
	}
	else_if = {
		limit = {
			FROM = { tag = UKR }
		}
		ROOT = { set_country_flag = RUS_national_academy_of_sciences_built_UKR_flag }
	}
	else_if = {
		limit = {
			FROM = { tag = KAZ }
		}
		ROOT = { set_country_flag = RUS_national_academy_of_sciences_built_KAZ_flag }
	}
	else_if = {
		limit = {
			FROM = { tag = GEO }
		}
		ROOT = { set_country_flag = RUS_national_academy_of_sciences_built_GEO_flag }
	}
	else_if = {
		limit = {
			FROM = { tag = ARM }
		}
		ROOT = { set_country_flag = RUS_national_academy_of_sciences_built_ARM_flag }
	}
	else_if = {
		limit = {
			FROM = { tag = AZR }
		}
		ROOT = { set_country_flag = RUS_national_academy_of_sciences_built_AZR_flag }
	}
	else_if = {
		limit = {
			FROM = { tag = UZB }
		}
		ROOT = { set_country_flag = RUS_national_academy_of_sciences_built_UZB_flag }
	}
	else_if = {
		limit = {
			FROM = { tag = TMS }
		}
		ROOT = { set_country_flag = RUS_national_academy_of_sciences_built_TMS_flag }
	}
	else_if = {
		limit = {
			FROM = { tag = KYR }
		}
		ROOT = { set_country_flag = RUS_national_academy_of_sciences_built_KYR_flag }
	}
	else_if = {
		limit = {
			FROM = { tag = TAJ }
		}
		ROOT = { set_country_flag = RUS_national_academy_of_sciences_built_TAJ_flag }
	}
	else_if = {
		limit = {
			FROM = { tag = TAN }
		}
		ROOT = { set_country_flag = RUS_national_academy_of_sciences_built_TAN_flag }
	}
	else_if = {
		limit = {
			FROM = { tag = DON }
		}
		ROOT = { set_country_flag = RUS_national_academy_of_sciences_built_DON_flag }
	}
	else_if = {
		limit = {
			FROM = { tag = KUB }
		}
		ROOT = { set_country_flag = RUS_national_academy_of_sciences_built_KUB_flag }
	}
	else_if = {
		limit = {
			FROM = { tag = EST }
		}
		ROOT = { set_country_flag = RUS_national_academy_of_sciences_built_EST_flag }
	}
	else_if = {
		limit = {
			FROM = { tag = LAT }
		}
		ROOT = { set_country_flag = RUS_national_academy_of_sciences_built_LAT_flag }
	}
	else_if = {
		limit = {
			FROM = { tag = LIT }
		}
		ROOT = { set_country_flag = RUS_national_academy_of_sciences_built_LIT_flag }
	}
	else_if = {
		limit = {
			FROM = { tag = POL }
		}
		ROOT = { set_country_flag = RUS_national_academy_of_sciences_built_POL_flag }
	}
	else_if = {
		limit = {
			FROM = { tag = FIN }
		}
		ROOT = { set_country_flag = RUS_national_academy_of_sciences_built_FIN_flag }
	}
	else_if = {
		limit = {
			FROM = { tag = MON }
		}
		ROOT = { set_country_flag = RUS_national_academy_of_sciences_built_MON_flag }
	}

	# Add any new cosmetics/releasables here! (and also decisions for them) ((and also scripted triggers)) (((please just do not add any more cosmetics/releasables...)))
}




RUS_clear_hostile_diplomacy_in_both_countries = { #It assumes you want to clear claims and wargoals against each other in both ROOT and FROM
	#First clear ROOT
	if = {
		limit = {
			any_owned_state = {
				is_claimed_by = FROM
			}
		}
		every_owned_state = {
			limit = {
				is_claimed_by = FROM
			}
			remove_claim_by = FROM
		}
	}
	if = {
		limit = {
			FROM = { has_wargoal_against = ROOT }
		}
		FROM = {
			remove_wargoal = {
				type = all
				target = ROOT
			}
		}
	}

	#Now clear FROM
	if = {
		limit = {
			FROM = {
				any_owned_state = {
					is_claimed_by = ROOT
				}
			}
		}
		FROM = {
			every_owned_state = {
				limit = {
					is_claimed_by = ROOT
				}
				remove_claim_by = ROOT
			}
		}
	}
	if = {
		limit = {
			has_wargoal_against = FROM
		}
		remove_wargoal = {
			type = all
			target = FROM
		}
	}
}

RUS_clear_hostile_diplomacy_in_all_three_countries = { #It assumes you want to clear claims and wargoals against each other in ROOT, FROM and POL
	#First clear ROOT
	if = {
		limit = {
			any_owned_state = {
				is_claimed_by = FROM
			}
		}
		every_owned_state = {
			limit = {
				is_claimed_by = FROM
			}
			remove_claim_by = FROM
		}
	}
	if = {
		limit = {
			any_owned_state = {
				is_claimed_by = POL
			}
		}
		every_owned_state = {
			limit = {
				is_claimed_by = POL
			}
			remove_claim_by = POL
		}
	}
	if = {
		limit = {
			FROM = { has_wargoal_against = ROOT }
		}
		FROM = {
			remove_wargoal = {
				type = all
				target = ROOT
			}
		}
	}
	if = {
		limit = {
			POL = { has_wargoal_against = ROOT }
		}
		POL = {
			remove_wargoal = {
				type = all
				target = ROOT
			}
		}
	}

	#Now clear FROM
	if = {
		limit = {
			FROM = {
				any_owned_state = {
					is_claimed_by = ROOT
				}
			}
		}
		FROM = {
			every_owned_state = {
				limit = {
					is_claimed_by = ROOT
				}
				remove_claim_by = ROOT
			}
		}
	}
	if = {
		limit = {
			FROM = {
				any_owned_state = {
					is_claimed_by = POL
				}
			}
		}
		FROM = {
			every_owned_state = {
				limit = {
					is_claimed_by = POL
				}
				remove_claim_by = POL
			}
		}
	}
	if = {
		limit = {
			has_wargoal_against = FROM
		}
		remove_wargoal = {
			type = all
			target = FROM
		}
	}
	if = {
		limit = {
			POL = { has_wargoal_against = FROM }
		}
		POL = {
			remove_wargoal = {
				type = all
				target = FROM
			}
		}
	}

	#Finally, clear POL
	if = {
		limit = {
			POL = {
				any_owned_state = {
					is_claimed_by = ROOT
				}
			}
		}
		POL = {
			every_owned_state = {
				limit = {
					is_claimed_by = ROOT
				}
				remove_claim_by = ROOT
			}
		}
	}
	if = {
		limit = {
			POL = {
				any_owned_state = {
					is_claimed_by = FROM
				}
			}
		}
		POL = {
			every_owned_state = {
				limit = {
					is_claimed_by = FROM
				}
				remove_claim_by = FROM
			}
		}
	}
	if = {
		limit = {
			has_wargoal_against = POL
		}
		remove_wargoal = {
			type = all
			target = POL
		}
	}
	if = {
		limit = {
			FROM = { has_wargoal_against = POL }
		}
		FROM = {
			remove_wargoal = {
				type = all
				target = POL
			}
		}
	}
}

RUS_apply_collective_ageement_on_mutual_assistance_effects_basic = {
	RUS_clear_hostile_diplomacy_in_both_countries = yes #Clears wargoals and claims

	#FRA -> BWR
	FROM = {
		diplomatic_relation = {
			country = ROOT
			relation = non_aggression_pact
			active = yes
		}
		give_guarantee = ROOT
		add_opinion_modifier = {
			target = ROOT
			modifier = RUS_policies_of_collective_security_opinion
		}
	}

	#BWR -> FRA
	diplomatic_relation = {
		country = FROM
		relation = non_aggression_pact
		active = yes
	}
	give_guarantee = FROM
	add_opinion_modifier = {
		target = FROM
		modifier = RUS_policies_of_collective_security_opinion
	}
}


RUS_apply_collective_ageement_on_mutual_assistance_effects_poland_included = {
	RUS_clear_hostile_diplomacy_in_all_three_countries = yes #Clears wargoals and claims in all three countries

	#BWR -> FRA
	diplomatic_relation = {
		country = FROM
		relation = non_aggression_pact
		active = yes
	}
	give_guarantee = FROM
	add_opinion_modifier = {
		target = FROM
		modifier = RUS_policies_of_collective_security_opinion
	}

	#BWR -> POL
	diplomatic_relation = {
		country = POL
		relation = non_aggression_pact
		active = yes
	}
	give_guarantee = POL
	add_opinion_modifier = {
		target = POL
		modifier = RUS_policies_of_collective_security_opinion
	}

	#FRA -> BWR
	FROM = {
		diplomatic_relation = {
			country = ROOT
			relation = non_aggression_pact
			active = yes
		}
		give_guarantee = ROOT
		add_opinion_modifier = {
			target = ROOT
			modifier = RUS_policies_of_collective_security_opinion
		}
	}

	#FRA -> POL
	FROM = {
		diplomatic_relation = {
			country = POL
			relation = non_aggression_pact
			active = yes
		}
		give_guarantee = POL
		add_opinion_modifier = {
			target = POL
			modifier = RUS_policies_of_collective_security_opinion
		}
	}

	#POL -> BWR
	POL = {
		diplomatic_relation = {
			country = ROOT
			relation = non_aggression_pact
			active = yes
		}
		give_guarantee = ROOT
		add_opinion_modifier = {
			target = ROOT
			modifier = RUS_policies_of_collective_security_opinion
		}
	}

	#POL -> FRA
	POL = {
		diplomatic_relation = {
			country = FROM
			relation = non_aggression_pact
			active = yes
		}
		give_guarantee = FROM
		add_opinion_modifier = {
			target = FROM
			modifier = RUS_policies_of_collective_security_opinion
		}
	}
}

RUS_set_military_offensive_effect = {
	set_country_flag = RUS_military_offensive_in_progress_flag
	for_each_scope_loop = {
		array = RUS_military_offensive_states
		add_dynamic_modifier = {
			modifier = RUS_soviet_military_offensive
			days = 90
			scope = BWR
		}
	}
}

RUS_clean_military_offensive_effect = {
	clr_country_flag = RUS_military_offensive_in_progress_flag
	for_each_scope_loop = {
		array = RUS_military_offensive_states
		remove_dynamic_modifier = { modifier = RUS_soviet_military_offensive }
	}
	clear_array = RUS_military_offensive_states
	clear_variable = RUS_offensive_main_objective
}

RUS_spawn_penal_divisions_effect = {
	hidden_effect = {
		capital_scope = {
			create_unit = {
				division = "division_template = \"Shtrafnaya Chast\" start_experience_factor = 0.5 start_equipment_factor = 1.0"
				owner = ROOT
				count = 4
			}
		}
		set_country_flag = RUS_penal_units_raised_flag
	}
}

RUS_anglo_soviet_invasion_add_ai_strategies_effect = { #Soviet / Anglo-Soviet invasion of Iran
	if = {
		limit = {
			has_global_flag = RUS_agreed_anglo_soviet_invasion_of_iran_flag
		}
		BWR = {
			add_ai_strategy = {
				type = befriend
				id = ENG			
				value = 15
			}
		}
		ENG = {
			add_ai_strategy = {
				type = befriend
				id = BWR			
				value = 15
			}
		}
	}
	else = {
		BWR = {
			add_ai_strategy = {
				type = befriend
				id = ENG			
				value = -15
			}
		}
		ENG = {
			add_ai_strategy = {
				type = befriend
				id = BWR			
				value = -15
			}
		}
	}
	if = {
		limit = {
			PER = {
				is_in_faction = no
			}
		}
		PER = {
			add_timed_idea = {
				idea = RUS_shocked_by_surprise_attack
				days = var:BWR.RUS_operation_countenance_mission_days
			}
		}
	}
}

RUS_failed_anglo_soviet_invasion_ai_strategies_effect = {
	if = { #IF ENG is not involved, seek British aid
		limit = {
			NOT = { has_global_flag = RUS_agreed_anglo_soviet_invasion_of_iran_flag }
		}
		if = {
			limit = {
				country_exists = ENG
				NOT = { has_war_with = ENG }
				ENG = {
					is_faction_leader = yes
					NOT = {	is_in_faction_with = BWR }
				}
			}
			add_ai_strategy = {
				type = alliance
				id = ENG		
				value = 200
			}
			ENG = {
				add_ai_strategy = {
					type = alliance
					id = PER		
					value = 25
				}
			}
		}
	}
	else = {
		if = {
			limit = {
				country_exists = GER
				NOT = { has_war_with = GER }
				GER = {
					is_faction_leader = yes
					NOT = {
						is_in_faction_with = BWR
						AND = {
							has_global_flag = RUS_agreed_anglo_soviet_invasion_of_iran_flag
							is_in_faction_with = ENG
						}
					}
				}
			}
			add_ai_strategy = {
				type = alliance
				id = GER		
				value = 200
			}
			GER = {
				add_ai_strategy = {
					type = alliance
					id = PER		
					value = 25
				}
			}
		}
		else_if = {
			limit = {
				country_exists = ITA
				NOT = { has_war_with = ITA }
				ITA = {
					is_faction_leader = yes
					NOT = {
						is_in_faction_with = BWR
						AND = {
							has_global_flag = RUS_agreed_anglo_soviet_invasion_of_iran_flag
							is_in_faction_with = ENG
						}
					}
				}
			}
			add_ai_strategy = {
				type = alliance
				id = ITA		
				value = 200
			}
			ITA = {
				add_ai_strategy = {
					type = alliance
					id = PER		
					value = 25
				}
			}
		}
		else_if = {
			limit = {
				country_exists = JAP
				NOT = { has_war_with = JAP }
				JAP = {
					is_faction_leader = yes
					NOT = {
						is_in_faction_with = BWR
						AND = {
							has_global_flag = RUS_agreed_anglo_soviet_invasion_of_iran_flag
							is_in_faction_with = ENG
						}
					}
				}
			}
			add_ai_strategy = {
				type = alliance
				id = JAP		
				value = 200
			}
			JAP = {
				add_ai_strategy = {
					type = alliance
					id = PER		
					value = 25
				}
			}
		}
		else_if = {
			limit = {
				country_exists = FRA
				NOT = { has_war_with = FRA }
				FRA = {
					is_faction_leader = yes
					NOT = {
						is_in_faction_with = BWR
						AND = {
							has_global_flag = RUS_agreed_anglo_soviet_invasion_of_iran_flag
							is_in_faction_with = ENG
						}
					}
				}
			}
			add_ai_strategy = {
				type = alliance
				id = FRA		
				value = 200
			}
			FRA = {
				add_ai_strategy = {
					type = alliance
					id = PER		
					value = 25
				}
			}
		}
		else_if = {
			limit = {
				country_exists = USA
				NOT = { has_war_with = USA }
				USA = {
					is_faction_leader = yes
					NOT = {
						is_in_faction_with = BWR
						AND = {
							has_global_flag = RUS_agreed_anglo_soviet_invasion_of_iran_flag
							is_in_faction_with = ENG
						}
					}
				}
			}
			add_ai_strategy = {
				type = alliance
				id = USA		
				value = 200
			}
			USA = {
				add_ai_strategy = {
					type = alliance
					id = PER		
					value = 25
				}
			}
		}
	}
}



#POUM brigades come to aid in the Soviet Civil War






#RELOCATE INDUSTRY - ROOT = TAG // FROM = TARGETED STATE (to remove industry) // THIS = TARGETED STATE (to remove industry) [Effect assumed to be called inside FROM scope]


########    ###    ##    ## ##    ##    ########  ########  ######  ####  ######   ##    ## ######## ########
   ##      ## ##   ###   ## ##   ##     ##     ## ##       ##    ##  ##  ##    ##  ###   ## ##       ##     ##
   ##     ##   ##  ####  ## ##  ##      ##     ## ##       ##        ##  ##        ####  ## ##       ##     ##
   ##    ##     ## ## ## ## #####       ##     ## ######    ######   ##  ##   #### ## ## ## ######   ########
   ##    ######### ##  #### ##  ##      ##     ## ##             ##  ##  ##    ##  ##  #### ##       ##   ##
   ##    ##     ## ##   ### ##   ##     ##     ## ##       ##    ##  ##  ##    ##  ##   ### ##       ##    ##
   ##    ##     ## ##    ## ##    ##    ########  ########  ######  ####  ######   ##    ## ######## ##     ##


 #######                                #
    #       ##    #    #  #    #       ##
    #      #  #   ##   #  #   #       # #
    #     #    #  # #  #  ####          #
    #     ######  #  # #  #  #          #
    #     #    #  #   ##  #   #         #
    #     #    #  #    #  #    #      #####

#Why do I do this to myself?! D:
RUS_upgrade_appropriate_tank_designer_1_effect = {
	#MOROZOV
	if = {
		limit = {
			has_idea = RUS_morozov_design_bureau
		}
		set_country_flag = RUS_merge_tank_morozov_1_flag
		swap_ideas = {
			remove_idea = RUS_morozov_design_bureau
			add_idea = RUS_morozov_design_bureau_1
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_morozov_design_bureau_2
		}
		set_country_flag = RUS_merge_tank_morozov_1_flag
		swap_ideas = {
			remove_idea = RUS_morozov_design_bureau_2
			add_idea = RUS_morozov_design_bureau_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_morozov_design_bureau_3
		}
		set_country_flag = RUS_merge_tank_morozov_1_flag
		swap_ideas = {
			remove_idea = RUS_morozov_design_bureau_3
			add_idea = RUS_morozov_design_bureau_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_morozov_design_bureau_2_3
		}
		set_country_flag = RUS_merge_tank_morozov_1_flag
		swap_ideas = {
			remove_idea = RUS_morozov_design_bureau_2_3
			add_idea = RUS_morozov_design_bureau_final
		}
	}

	#ASTROV
	else_if = {
		limit = {
			has_idea = RUS_astrov_design_bureau
		}
		set_country_flag = RUS_merge_tank_astrov_1_flag
		swap_ideas = {
			remove_idea = RUS_astrov_design_bureau
			add_idea = RUS_astrov_design_bureau_1
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_astrov_design_bureau_2
		}
		set_country_flag = RUS_merge_tank_astrov_1_flag
		swap_ideas = {
			remove_idea = RUS_astrov_design_bureau_2
			add_idea = RUS_astrov_design_bureau_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_astrov_design_bureau_3
		}
		set_country_flag = RUS_merge_tank_astrov_1_flag
		swap_ideas = {
			remove_idea = RUS_astrov_design_bureau_3
			add_idea = RUS_astrov_design_bureau_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_astrov_design_bureau_2_3
		}
		set_country_flag = RUS_merge_tank_astrov_1_flag
		swap_ideas = {
			remove_idea = RUS_astrov_design_bureau_2_3
			add_idea = RUS_astrov_design_bureau_final
		}
	}

	#OKMO
	else_if = {
		limit = {
			has_idea = RUS_okmo
		}
		set_country_flag = RUS_merge_tank_okmo_1_flag
		swap_ideas = {
			remove_idea = RUS_okmo
			add_idea = RUS_okmo_1
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_okmo_2
		}
		set_country_flag = RUS_merge_tank_okmo_1_flag
		swap_ideas = {
			remove_idea = RUS_okmo_2
			add_idea = RUS_okmo_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_okmo_3
		}
		set_country_flag = RUS_merge_tank_okmo_1_flag
		swap_ideas = {
			remove_idea = RUS_okmo_3
			add_idea = RUS_okmo_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_okmo_2_3
		}
		set_country_flag = RUS_merge_tank_okmo_1_flag
		swap_ideas = {
			remove_idea = RUS_okmo_2_3
			add_idea = RUS_okmo_final
		}
	}

	#mytishchy
	else_if = {
		limit = {
			has_idea = RUS_mytishchy_machine_building_plant
		}
		set_country_flag = RUS_merge_tank_mytishchy_1_flag
		swap_ideas = {
			remove_idea = RUS_mytishchy_machine_building_plant
			add_idea = RUS_mytishchy_machine_building_plant_1
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_mytishchy_machine_building_plant_2
		}
		set_country_flag = RUS_merge_tank_mytishchy_1_flag
		swap_ideas = {
			remove_idea = RUS_mytishchy_machine_building_plant_2
			add_idea = RUS_mytishchy_machine_building_plant_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_mytishchy_machine_building_plant_3
		}
		set_country_flag = RUS_merge_tank_mytishchy_1_flag
		swap_ideas = {
			remove_idea = RUS_mytishchy_machine_building_plant_3
			add_idea = RUS_mytishchy_machine_building_plant_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_mytishchy_machine_building_plant_2_3
		}
		set_country_flag = RUS_merge_tank_mytishchy_1_flag
		swap_ideas = {
			remove_idea = RUS_mytishchy_machine_building_plant_2_3
			add_idea = RUS_mytishchy_machine_building_plant_final
		}
	}

	#KIROV
	else_if = {
		limit = {
			has_idea = RUS_kirov
		}
		set_country_flag = RUS_merge_tank_kirov_1_flag
		swap_ideas = {
			remove_idea = RUS_kirov
			add_idea = RUS_kirov_1
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_kirov_2
		}
		set_country_flag = RUS_merge_tank_kirov_1_flag
		swap_ideas = {
			remove_idea = RUS_kirov_2
			add_idea = RUS_kirov_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_kirov_3
		}
		set_country_flag = RUS_merge_tank_kirov_1_flag
		swap_ideas = {
			remove_idea = RUS_kirov_3
			add_idea = RUS_kirov_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_kirov_2_3
		}
		set_country_flag = RUS_merge_tank_kirov_1_flag
		swap_ideas = {
			remove_idea = RUS_kirov_2_3
			add_idea = RUS_kirov_final
		}
	}
}

 #######                               #####
    #       ##    #    #  #    #      #     #
    #      #  #   ##   #  #   #             #
    #     #    #  # #  #  ####         #####
    #     ######  #  # #  #  #        #
    #     #    #  #   ##  #   #       #
    #     #    #  #    #  #    #      #######


RUS_upgrade_appropriate_tank_designer_2_effect = {
	#MOROZOV
	if = {
		limit = {
			has_idea = RUS_morozov_design_bureau
		}
		set_country_flag = RUS_merge_tank_morozov_2_flag
		swap_ideas = {
			remove_idea = RUS_morozov_design_bureau
			add_idea = RUS_morozov_design_bureau_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_morozov_design_bureau_1
		}
		set_country_flag = RUS_merge_tank_morozov_2_flag
		swap_ideas = {
			remove_idea = RUS_morozov_design_bureau_1
			add_idea = RUS_morozov_design_bureau_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_morozov_design_bureau_3
		}
		set_country_flag = RUS_merge_tank_morozov_2_flag
		swap_ideas = {
			remove_idea = RUS_morozov_design_bureau_3
			add_idea = RUS_morozov_design_bureau_2_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_morozov_design_bureau_1_3
		}
		set_country_flag = RUS_merge_tank_morozov_2_flag
		swap_ideas = {
			remove_idea = RUS_morozov_design_bureau_1_3
			add_idea = RUS_morozov_design_bureau_final
		}
	}

	#ASTROV
	else_if = {
		limit = {
			has_idea = RUS_astrov_design_bureau
		}
		set_country_flag = RUS_merge_tank_astrov_2_flag
		swap_ideas = {
			remove_idea = RUS_astrov_design_bureau
			add_idea = RUS_astrov_design_bureau_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_astrov_design_bureau_1
		}
		set_country_flag = RUS_merge_tank_astrov_2_flag
		swap_ideas = {
			remove_idea = RUS_astrov_design_bureau_1
			add_idea = RUS_astrov_design_bureau_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_astrov_design_bureau_3
		}
		set_country_flag = RUS_merge_tank_astrov_2_flag
		swap_ideas = {
			remove_idea = RUS_astrov_design_bureau_3
			add_idea = RUS_astrov_design_bureau_2_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_astrov_design_bureau_1_3
		}
		set_country_flag = RUS_merge_tank_astrov_2_flag
		swap_ideas = {
			remove_idea = RUS_astrov_design_bureau_1_3
			add_idea = RUS_astrov_design_bureau_final
		}
	}

	#OKMO
	else_if = {
		limit = {
			has_idea = RUS_okmo
		}
		set_country_flag = RUS_merge_tank_okmo_2_flag
		swap_ideas = {
			remove_idea = RUS_okmo
			add_idea = RUS_okmo_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_okmo_1
		}
		set_country_flag = RUS_merge_tank_okmo_2_flag
		swap_ideas = {
			remove_idea = RUS_okmo_1
			add_idea = RUS_okmo_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_okmo_3
		}
		set_country_flag = RUS_merge_tank_okmo_2_flag
		swap_ideas = {
			remove_idea = RUS_okmo_3
			add_idea = RUS_okmo_2_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_okmo_1_3
		}
		set_country_flag = RUS_merge_tank_okmo_2_flag
		swap_ideas = {
			remove_idea = RUS_okmo_1_3
			add_idea = RUS_okmo_final
		}
	}

	#mytishchy
	else_if = {
		limit = {
			has_idea = RUS_mytishchy_machine_building_plant
		}
		set_country_flag = RUS_merge_tank_mytishchy_2_flag
		swap_ideas = {
			remove_idea = RUS_mytishchy_machine_building_plant
			add_idea = RUS_mytishchy_machine_building_plant_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_mytishchy_machine_building_plant_1
		}
		set_country_flag = RUS_merge_tank_mytishchy_2_flag
		swap_ideas = {
			remove_idea = RUS_mytishchy_machine_building_plant_1
			add_idea = RUS_mytishchy_machine_building_plant_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_mytishchy_machine_building_plant_3
		}
		set_country_flag = RUS_merge_tank_mytishchy_2_flag
		swap_ideas = {
			remove_idea = RUS_mytishchy_machine_building_plant_3
			add_idea = RUS_mytishchy_machine_building_plant_2_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_mytishchy_machine_building_plant_1_3
		}
		set_country_flag = RUS_merge_tank_mytishchy_2_flag
		swap_ideas = {
			remove_idea = RUS_mytishchy_machine_building_plant_1_3
			add_idea = RUS_mytishchy_machine_building_plant_final
		}
	}

	#KIROV
	else_if = {
		limit = {
			has_idea = RUS_kirov
		}
		set_country_flag = RUS_merge_tank_kirov_2_flag
		swap_ideas = {
			remove_idea = RUS_kirov
			add_idea = RUS_kirov_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_kirov_1
		}
		set_country_flag = RUS_merge_tank_kirov_2_flag
		swap_ideas = {
			remove_idea = RUS_kirov_1
			add_idea = RUS_kirov_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_kirov_3
		}
		set_country_flag = RUS_merge_tank_kirov_2_flag
		swap_ideas = {
			remove_idea = RUS_kirov_3
			add_idea = RUS_kirov_2_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_kirov_1_3
		}
		set_country_flag = RUS_merge_tank_kirov_2_flag
		swap_ideas = {
			remove_idea = RUS_kirov_1_3
			add_idea = RUS_kirov_final
		}
	}
}

 #######                               #####
    #       ##    #    #  #    #      #     #
    #      #  #   ##   #  #   #             #
    #     #    #  # #  #  ####         #####
    #     ######  #  # #  #  #              #
    #     #    #  #   ##  #   #       #     #
    #     #    #  #    #  #    #       #####


RUS_upgrade_appropriate_tank_designer_3_effect = {
	#MOROZOV
	if = {
		limit = {
			has_idea = RUS_morozov_design_bureau
		}
		set_country_flag = RUS_merge_tank_morozov_3_flag
		swap_ideas = {
			remove_idea = RUS_morozov_design_bureau
			add_idea = RUS_morozov_design_bureau_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_morozov_design_bureau_1
		}
		set_country_flag = RUS_merge_tank_morozov_3_flag
		swap_ideas = {
			remove_idea = RUS_morozov_design_bureau_1
			add_idea = RUS_morozov_design_bureau_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_morozov_design_bureau_2
		}
		set_country_flag = RUS_merge_tank_morozov_3_flag
		swap_ideas = {
			remove_idea = RUS_morozov_design_bureau_2
			add_idea = RUS_morozov_design_bureau_2_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_morozov_design_bureau_1_2
		}
		set_country_flag = RUS_merge_tank_morozov_3_flag
		swap_ideas = {
			remove_idea = RUS_morozov_design_bureau_1_2
			add_idea = RUS_morozov_design_bureau_final
		}
	}

	#ASTROV
	else_if = {
		limit = {
			has_idea = RUS_astrov_design_bureau
		}
		set_country_flag = RUS_merge_tank_astrov_3_flag
		swap_ideas = {
			remove_idea = RUS_astrov_design_bureau
			add_idea = RUS_astrov_design_bureau_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_astrov_design_bureau_1
		}
		set_country_flag = RUS_merge_tank_astrov_3_flag
		swap_ideas = {
			remove_idea = RUS_astrov_design_bureau_1
			add_idea = RUS_astrov_design_bureau_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_astrov_design_bureau_2
		}
		set_country_flag = RUS_merge_tank_astrov_3_flag
		swap_ideas = {
			remove_idea = RUS_astrov_design_bureau_2
			add_idea = RUS_astrov_design_bureau_2_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_astrov_design_bureau_1_2
		}
		set_country_flag = RUS_merge_tank_astrov_3_flag
		swap_ideas = {
			remove_idea = RUS_astrov_design_bureau_1_2
			add_idea = RUS_astrov_design_bureau_final
		}
	}

	#OKMO
	else_if = {
		limit = {
			has_idea = RUS_okmo
		}
		set_country_flag = RUS_merge_tank_okmo_3_flag
		swap_ideas = {
			remove_idea = RUS_okmo
			add_idea = RUS_okmo_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_okmo_1
		}
		set_country_flag = RUS_merge_tank_okmo_3_flag
		swap_ideas = {
			remove_idea = RUS_okmo_1
			add_idea = RUS_okmo_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_okmo_2
		}
		set_country_flag = RUS_merge_tank_okmo_3_flag
		swap_ideas = {
			remove_idea = RUS_okmo_2
			add_idea = RUS_okmo_2_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_okmo_1_2
		}
		set_country_flag = RUS_merge_tank_okmo_3_flag
		swap_ideas = {
			remove_idea = RUS_okmo_1_2
			add_idea = RUS_okmo_final
		}
	}

	#mytishchy
	else_if = {
		limit = {
			has_idea = RUS_mytishchy_machine_building_plant
		}
		set_country_flag = RUS_merge_tank_mytishchy_3_flag
		swap_ideas = {
			remove_idea = RUS_mytishchy_machine_building_plant
			add_idea = RUS_mytishchy_machine_building_plant_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_mytishchy_machine_building_plant_1
		}
		set_country_flag = RUS_merge_tank_mytishchy_3_flag
		swap_ideas = {
			remove_idea = RUS_mytishchy_machine_building_plant_1
			add_idea = RUS_mytishchy_machine_building_plant_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_mytishchy_machine_building_plant_2
		}
		set_country_flag = RUS_merge_tank_mytishchy_3_flag
		swap_ideas = {
			remove_idea = RUS_mytishchy_machine_building_plant_2
			add_idea = RUS_mytishchy_machine_building_plant_2_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_mytishchy_machine_building_plant_1_2
		}
		set_country_flag = RUS_merge_tank_mytishchy_3_flag
		swap_ideas = {
			remove_idea = RUS_mytishchy_machine_building_plant_1_2
			add_idea = RUS_mytishchy_machine_building_plant_final
		}
	}

	#KIROV
	else_if = {
		limit = {
			has_idea = RUS_kirov
		}
		set_country_flag = RUS_merge_tank_kirov_3_flag
		swap_ideas = {
			remove_idea = RUS_kirov
			add_idea = RUS_kirov_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_kirov_1
		}
		set_country_flag = RUS_merge_tank_kirov_3_flag
		swap_ideas = {
			remove_idea = RUS_kirov_1
			add_idea = RUS_kirov_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_kirov_2
		}
		set_country_flag = RUS_merge_tank_kirov_3_flag
		swap_ideas = {
			remove_idea = RUS_kirov_2
			add_idea = RUS_kirov_2_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_kirov_1_2
		}
		set_country_flag = RUS_merge_tank_kirov_3_flag
		swap_ideas = {
			remove_idea = RUS_kirov_1_2
			add_idea = RUS_kirov_final
		}
	}
}


##    ##    ###    ##     ##    ###    ##          ########  ########  ######  ####  ######   ##    ## ######## ########
###   ##   ## ##   ##     ##   ## ##   ##          ##     ## ##       ##    ##  ##  ##    ##  ###   ## ##       ##     ##
####  ##  ##   ##  ##     ##  ##   ##  ##          ##     ## ##       ##        ##  ##        ####  ## ##       ##     ##
## ## ## ##     ## ##     ## ##     ## ##          ##     ## ######    ######   ##  ##   #### ## ## ## ######   ########
##  #### #########  ##   ##  ######### ##          ##     ## ##             ##  ##  ##    ##  ##  #### ##       ##   ##
##   ### ##     ##   ## ##   ##     ## ##          ##     ## ##       ##    ##  ##  ##    ##  ##   ### ##       ##    ##
##    ## ##     ##    ###    ##     ## ########    ########  ########  ######  ####  ######   ##    ## ######## ##     ##

 #     #                                        #        ######
 ##    #    ##    #    #    ##    #            ##        #     #    ##    #       #####  #   ####
 # #   #   #  #   #    #   #  #   #           # #        #     #   #  #   #         #    #  #    #
 #  #  #  #    #  #    #  #    #  #             #        ######   #    #  #         #    #  #
 #   # #  ######  #    #  ######  #             #        #     #  ######  #         #    #  #
 #    ##  #    #   #  #   #    #  #             #        #     #  #    #  #         #    #  #    #
 #     #  #    #    ##    #    #  ######      #####      ######   #    #  ######    #    #   ####


RUS_upgrade_appropriate_ship_designer_1_baltic_effect = {
	#NEVSKOYE DESIGN BUREAU
	if = {
		limit = {
			has_idea = RUS_nevskoye_design_bureau
		}
		set_country_flag = RUS_merge_ship_nevskoye_design_bureau_1_flag
		swap_ideas = {
			remove_idea = RUS_nevskoye_design_bureau
			add_idea = RUS_nevskoye_design_bureau_1
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_nevskoye_design_bureau_2
		}
		set_country_flag = RUS_merge_ship_nevskoye_design_bureau_1_flag
		swap_ideas = {
			remove_idea = RUS_nevskoye_design_bureau_2
			add_idea = RUS_nevskoye_design_bureau_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_nevskoye_design_bureau_3
		}
		set_country_flag = RUS_merge_ship_nevskoye_design_bureau_1_flag
		swap_ideas = {
			remove_idea = RUS_nevskoye_design_bureau_3
			add_idea = RUS_nevskoye_design_bureau_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_nevskoye_design_bureau_4
		}
		set_country_flag = RUS_merge_ship_nevskoye_design_bureau_1_flag
		swap_ideas = {
			remove_idea = RUS_nevskoye_design_bureau_4
			add_idea = RUS_nevskoye_design_bureau_1_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_nevskoye_design_bureau_2_4
		}
		set_country_flag = RUS_merge_ship_nevskoye_design_bureau_1_flag
		swap_ideas = {
			remove_idea = RUS_nevskoye_design_bureau_2_4
			add_idea = RUS_nevskoye_design_bureau_final_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_nevskoye_design_bureau_3_4
		}
		set_country_flag = RUS_merge_ship_nevskoye_design_bureau_1_flag
		swap_ideas = {
			remove_idea = RUS_nevskoye_design_bureau_3_4
			add_idea = RUS_nevskoye_design_bureau_final_3
		}
	}

	#RUBIN DESIGN BUREAU
	else_if = {
		limit = {
			has_idea = RUS_rubin_design_bureau
		}
		set_country_flag = RUS_merge_ship_rubin_design_bureau_1_flag
		swap_ideas = {
			remove_idea = RUS_rubin_design_bureau
			add_idea = RUS_rubin_design_bureau_1
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_rubin_design_bureau_2
		}
		set_country_flag = RUS_merge_ship_rubin_design_bureau_1_flag
		swap_ideas = {
			remove_idea = RUS_rubin_design_bureau_2
			add_idea = RUS_rubin_design_bureau_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_rubin_design_bureau_3
		}
		set_country_flag = RUS_merge_ship_rubin_design_bureau_1_flag
		swap_ideas = {
			remove_idea = RUS_rubin_design_bureau_3
			add_idea = RUS_rubin_design_bureau_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_rubin_design_bureau_4
		}
		set_country_flag = RUS_merge_ship_rubin_design_bureau_1_flag
		swap_ideas = {
			remove_idea = RUS_rubin_design_bureau_4
			add_idea = RUS_rubin_design_bureau_1_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_rubin_design_bureau_2_4
		}
		set_country_flag = RUS_merge_ship_rubin_design_bureau_1_flag
		swap_ideas = {
			remove_idea = RUS_rubin_design_bureau_2_4
			add_idea = RUS_rubin_design_bureau_final_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_rubin_design_bureau_3_4
		}
		set_country_flag = RUS_merge_ship_rubin_design_bureau_1_flag
		swap_ideas = {
			remove_idea = RUS_rubin_design_bureau_3_4
			add_idea = RUS_rubin_design_bureau_final_3
		}
	}
}

 #     #                                       #####       ######
 ##    #    ##    #    #    ##    #           #     #      #     #    ##    #       #####  #   ####
 # #   #   #  #   #    #   #  #   #                 #      #     #   #  #   #         #    #  #    #
 #  #  #  #    #  #    #  #    #  #            #####       ######   #    #  #         #    #  #
 #   # #  ######  #    #  ######  #           #            #     #  ######  #         #    #  #
 #    ##  #    #   #  #   #    #  #           #            #     #  #    #  #         #    #  #    #
 #     #  #    #    ##    #    #  ######      #######      ######   #    #  ######    #    #   ####


RUS_upgrade_appropriate_ship_designer_2_baltic_effect = {
	#NEVSKOYE DESIGN BUREAU
	if = {
		limit = {
			has_idea = RUS_nevskoye_design_bureau
		}
		set_country_flag = RUS_merge_ship_nevskoye_design_bureau_2_flag
		swap_ideas = {
			remove_idea = RUS_nevskoye_design_bureau
			add_idea = RUS_nevskoye_design_bureau_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_nevskoye_design_bureau_1
		}
		set_country_flag = RUS_merge_ship_nevskoye_design_bureau_2_flag
		swap_ideas = {
			remove_idea = RUS_nevskoye_design_bureau_1
			add_idea = RUS_nevskoye_design_bureau_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_nevskoye_design_bureau_4
		}
		set_country_flag = RUS_merge_ship_nevskoye_design_bureau_2_flag
		swap_ideas = {
			remove_idea = RUS_nevskoye_design_bureau_4
			add_idea = RUS_nevskoye_design_bureau_2_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_nevskoye_design_bureau_1_4
		}
		set_country_flag = RUS_merge_ship_nevskoye_design_bureau_2_flag
		swap_ideas = {
			remove_idea = RUS_nevskoye_design_bureau_1_4
			add_idea = RUS_nevskoye_design_bureau_final_2
		}
	}

	#RUBIN DESIGN BUREAU
	else_if = {
		limit = {
			has_idea = RUS_rubin_design_bureau
		}
		set_country_flag = RUS_merge_ship_rubin_design_bureau_2_flag
		swap_ideas = {
			remove_idea = RUS_rubin_design_bureau
			add_idea = RUS_rubin_design_bureau_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_rubin_design_bureau_1
		}
		set_country_flag = RUS_merge_ship_rubin_design_bureau_2_flag
		swap_ideas = {
			remove_idea = RUS_rubin_design_bureau_1
			add_idea = RUS_rubin_design_bureau_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_rubin_design_bureau_4
		}
		set_country_flag = RUS_merge_ship_rubin_design_bureau_2_flag
		swap_ideas = {
			remove_idea = RUS_rubin_design_bureau_4
			add_idea = RUS_rubin_design_bureau_2_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_rubin_design_bureau_1_4
		}
		set_country_flag = RUS_merge_ship_rubin_design_bureau_2_flag
		swap_ideas = {
			remove_idea = RUS_rubin_design_bureau_1_4
			add_idea = RUS_rubin_design_bureau_final_2
		}
	}
}

 #     #                                       #####       ######
 ##    #    ##    #    #    ##    #           #     #      #     #    ##    #       #####  #   ####
 # #   #   #  #   #    #   #  #   #                 #      #     #   #  #   #         #    #  #    #
 #  #  #  #    #  #    #  #    #  #            #####       ######   #    #  #         #    #  #
 #   # #  ######  #    #  ######  #                 #      #     #  ######  #         #    #  #
 #    ##  #    #   #  #   #    #  #           #     #      #     #  #    #  #         #    #  #    #
 #     #  #    #    ##    #    #  ######       #####       ######   #    #  ######    #    #   ####

RUS_upgrade_appropriate_ship_designer_3_baltic_effect = {
	#NEVSKOYE DESIGN BUREAU
	if = {
		limit = {
			has_idea = RUS_nevskoye_design_bureau
		}
		set_country_flag = RUS_merge_ship_nevskoye_design_bureau_3_flag
		swap_ideas = {
			remove_idea = RUS_nevskoye_design_bureau
			add_idea = RUS_nevskoye_design_bureau_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_nevskoye_design_bureau_1
		}
		set_country_flag = RUS_merge_ship_nevskoye_design_bureau_3_flag
		swap_ideas = {
			remove_idea = RUS_nevskoye_design_bureau_1
			add_idea = RUS_nevskoye_design_bureau_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_nevskoye_design_bureau_4
		}
		set_country_flag = RUS_merge_ship_nevskoye_design_bureau_3_flag
		swap_ideas = {
			remove_idea = RUS_nevskoye_design_bureau_4
			add_idea = RUS_nevskoye_design_bureau_3_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_nevskoye_design_bureau_1_4
		}
		set_country_flag = RUS_merge_ship_nevskoye_design_bureau_3_flag
		swap_ideas = {
			remove_idea = RUS_nevskoye_design_bureau_1_4
			add_idea = RUS_nevskoye_design_bureau_final_3
		}
	}

	#RUBIN DESIGN BUREAU
	else_if = {
		limit = {
			has_idea = RUS_rubin_design_bureau
		}
		set_country_flag = RUS_merge_ship_rubin_design_bureau_3_flag
		swap_ideas = {
			remove_idea = RUS_rubin_design_bureau
			add_idea = RUS_rubin_design_bureau_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_rubin_design_bureau_1
		}
		set_country_flag = RUS_merge_ship_rubin_design_bureau_3_flag
		swap_ideas = {
			remove_idea = RUS_rubin_design_bureau_1
			add_idea = RUS_rubin_design_bureau_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_rubin_design_bureau_4
		}
		set_country_flag = RUS_merge_ship_rubin_design_bureau_3_flag
		swap_ideas = {
			remove_idea = RUS_rubin_design_bureau_4
			add_idea = RUS_rubin_design_bureau_3_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_rubin_design_bureau_1_4
		}
		set_country_flag = RUS_merge_ship_rubin_design_bureau_3_flag
		swap_ideas = {
			remove_idea = RUS_rubin_design_bureau_1_4
			add_idea = RUS_rubin_design_bureau_final_3
		}
	}
}

 #     #                                      #            ######
 ##    #    ##    #    #    ##    #           #    #       #     #    ##    #       #####  #   ####
 # #   #   #  #   #    #   #  #   #           #    #       #     #   #  #   #         #    #  #    #
 #  #  #  #    #  #    #  #    #  #           #    #       ######   #    #  #         #    #  #
 #   # #  ######  #    #  ######  #           #######      #     #  ######  #         #    #  #
 #    ##  #    #   #  #   #    #  #                #       #     #  #    #  #         #    #  #    #
 #     #  #    #    ##    #    #  ######           #       ######   #    #  ######    #    #   ####


RUS_upgrade_appropriate_ship_designer_4_baltic_effect = {
	#NEVSKOYE DESIGN BUREAU
	if = {
		limit = {
			has_idea = RUS_nevskoye_design_bureau
		}
		set_country_flag = RUS_merge_ship_nevskoye_design_bureau_4_flag
		swap_ideas = {
			remove_idea = RUS_nevskoye_design_bureau
			add_idea = RUS_nevskoye_design_bureau_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_nevskoye_design_bureau_1
		}
		set_country_flag = RUS_merge_ship_nevskoye_design_bureau_4_flag
		swap_ideas = {
			remove_idea = RUS_nevskoye_design_bureau_1
			add_idea = RUS_nevskoye_design_bureau_1_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_nevskoye_design_bureau_2
		}
		set_country_flag = RUS_merge_ship_nevskoye_design_bureau_4_flag
		swap_ideas = {
			remove_idea = RUS_nevskoye_design_bureau_2
			add_idea = RUS_nevskoye_design_bureau_2_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_nevskoye_design_bureau_3
		}
		set_country_flag = RUS_merge_ship_nevskoye_design_bureau_4_flag
		swap_ideas = {
			remove_idea = RUS_nevskoye_design_bureau_3
			add_idea = RUS_nevskoye_design_bureau_3_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_nevskoye_design_bureau_1_2
		}
		set_country_flag = RUS_merge_ship_nevskoye_design_bureau_4_flag
		swap_ideas = {
			remove_idea = RUS_nevskoye_design_bureau_1_2
			add_idea = RUS_nevskoye_design_bureau_final_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_nevskoye_design_bureau_1_3
		}
		set_country_flag = RUS_merge_ship_nevskoye_design_bureau_4_flag
		swap_ideas = {
			remove_idea = RUS_nevskoye_design_bureau_1_3
			add_idea = RUS_nevskoye_design_bureau_final_3
		}
	}

	#RUBIN DESIGN BUREAU
	else_if = {
		limit = {
			has_idea = RUS_rubin_design_bureau
		}
		set_country_flag = RUS_merge_ship_rubin_design_bureau_4_flag
		swap_ideas = {
			remove_idea = RUS_rubin_design_bureau
			add_idea = RUS_rubin_design_bureau_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_rubin_design_bureau_1
		}
		set_country_flag = RUS_merge_ship_rubin_design_bureau_4_flag
		swap_ideas = {
			remove_idea = RUS_rubin_design_bureau_1
			add_idea = RUS_rubin_design_bureau_1_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_rubin_design_bureau_2
		}
		set_country_flag = RUS_merge_ship_rubin_design_bureau_4_flag
		swap_ideas = {
			remove_idea = RUS_rubin_design_bureau_2
			add_idea = RUS_rubin_design_bureau_2_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_rubin_design_bureau_3
		}
		set_country_flag = RUS_merge_ship_rubin_design_bureau_4_flag
		swap_ideas = {
			remove_idea = RUS_rubin_design_bureau_3
			add_idea = RUS_rubin_design_bureau_3_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_rubin_design_bureau_1_2
		}
		set_country_flag = RUS_merge_ship_rubin_design_bureau_4_flag
		swap_ideas = {
			remove_idea = RUS_rubin_design_bureau_1_2
			add_idea = RUS_rubin_design_bureau_final_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_rubin_design_bureau_1_3
		}
		set_country_flag = RUS_merge_ship_rubin_design_bureau_4_flag
		swap_ideas = {
			remove_idea = RUS_rubin_design_bureau_1_3
			add_idea = RUS_rubin_design_bureau_final_3
		}
	}
}

 #     #                                        #        ######                                        #####
 ##    #    ##    #    #    ##    #            ##        #     #  #         ##     ####   #    #      #     #  ######    ##
 # #   #   #  #   #    #   #  #   #           # #        #     #  #        #  #   #    #  #   #       #        #        #  #
 #  #  #  #    #  #    #  #    #  #             #        ######   #       #    #  #       ####         #####   #####   #    #
 #   # #  ######  #    #  ######  #             #        #     #  #       ######  #       #  #              #  #       ######
 #    ##  #    #   #  #   #    #  #             #        #     #  #       #    #  #    #  #   #       #     #  #       #    #
 #     #  #    #    ##    #    #  ######      #####      ######   ######  #    #   ####   #    #       #####   ######  #    #


RUS_upgrade_appropriate_ship_designer_1_black_sea_effect = {
	#BLACK SEA SHIPYARD
	if = {
		limit = {
			has_idea = RUS_black_sea_shipyard
		}
		set_country_flag = RUS_merge_ship_black_sea_shipyard_1_flag
		swap_ideas = {
			remove_idea = RUS_black_sea_shipyard
			add_idea = RUS_black_sea_shipyard_1
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_black_sea_shipyard_2
		}
		set_country_flag = RUS_merge_ship_black_sea_shipyard_1_flag
		swap_ideas = {
			remove_idea = RUS_black_sea_shipyard_2
			add_idea = RUS_black_sea_shipyard_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_black_sea_shipyard_3
		}
		set_country_flag = RUS_merge_ship_black_sea_shipyard_1_flag
		swap_ideas = {
			remove_idea = RUS_black_sea_shipyard_3
			add_idea = RUS_black_sea_shipyard_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_black_sea_shipyard_4
		}
		set_country_flag = RUS_merge_ship_black_sea_shipyard_1_flag
		swap_ideas = {
			remove_idea = RUS_black_sea_shipyard_4
			add_idea = RUS_black_sea_shipyard_1_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_black_sea_shipyard_2_4
		}
		set_country_flag = RUS_merge_ship_black_sea_shipyard_1_flag
		swap_ideas = {
			remove_idea = RUS_black_sea_shipyard_2_4
			add_idea = RUS_black_sea_shipyard_final_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_black_sea_shipyard_3_4
		}
		set_country_flag = RUS_merge_ship_black_sea_shipyard_1_flag
		swap_ideas = {
			remove_idea = RUS_black_sea_shipyard_3_4
			add_idea = RUS_black_sea_shipyard_final_3
		}
	}

	#SEVASTOPOL MARINE PLANT
	else_if = {
		limit = {
			has_idea = RUS_sevastopol_marine_plant
		}
		set_country_flag = RUS_merge_ship_sevastopol_marine_plant_1_flag
		swap_ideas = {
			remove_idea = RUS_sevastopol_marine_plant
			add_idea = RUS_sevastopol_marine_plant_1
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_sevastopol_marine_plant_2
		}
		set_country_flag = RUS_merge_ship_sevastopol_marine_plant_1_flag
		swap_ideas = {
			remove_idea = RUS_sevastopol_marine_plant_2
			add_idea = RUS_sevastopol_marine_plant_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_sevastopol_marine_plant_3
		}
		set_country_flag = RUS_merge_ship_sevastopol_marine_plant_1_flag
		swap_ideas = {
			remove_idea = RUS_sevastopol_marine_plant_3
			add_idea = RUS_sevastopol_marine_plant_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_sevastopol_marine_plant_4
		}
		set_country_flag = RUS_merge_ship_sevastopol_marine_plant_1_flag
		swap_ideas = {
			remove_idea = RUS_sevastopol_marine_plant_4
			add_idea = RUS_sevastopol_marine_plant_1_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_sevastopol_marine_plant_2_4
		}
		set_country_flag = RUS_merge_ship_sevastopol_marine_plant_1_flag
		swap_ideas = {
			remove_idea = RUS_sevastopol_marine_plant_2_4
			add_idea = RUS_sevastopol_marine_plant_final_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_sevastopol_marine_plant_3_4
		}
		set_country_flag = RUS_merge_ship_sevastopol_marine_plant_1_flag
		swap_ideas = {
			remove_idea = RUS_sevastopol_marine_plant_3_4
			add_idea = RUS_sevastopol_marine_plant_final_3
		}
	}
}

 #     #                                       #####       ######                                        #####
 ##    #    ##    #    #    ##    #           #     #      #     #  #         ##     ####   #    #      #     #  ######    ##
 # #   #   #  #   #    #   #  #   #                 #      #     #  #        #  #   #    #  #   #       #        #        #  #
 #  #  #  #    #  #    #  #    #  #            #####       ######   #       #    #  #       ####         #####   #####   #    #
 #   # #  ######  #    #  ######  #           #            #     #  #       ######  #       #  #              #  #       ######
 #    ##  #    #   #  #   #    #  #           #            #     #  #       #    #  #    #  #   #       #     #  #       #    #
 #     #  #    #    ##    #    #  ######      #######      ######   ######  #    #   ####   #    #       #####   ######  #    #


RUS_upgrade_appropriate_ship_designer_2_black_sea_effect = {
	#BLACK SEA SHIPYARD
	if = {
		limit = {
			has_idea = RUS_black_sea_shipyard
		}
		set_country_flag = RUS_merge_ship_black_sea_shipyard_2_flag
		swap_ideas = {
			remove_idea = RUS_black_sea_shipyard
			add_idea = RUS_black_sea_shipyard_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_black_sea_shipyard_1
		}
		set_country_flag = RUS_merge_ship_black_sea_shipyard_2_flag
		swap_ideas = {
			remove_idea = RUS_black_sea_shipyard_1
			add_idea = RUS_black_sea_shipyard_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_black_sea_shipyard_4
		}
		set_country_flag = RUS_merge_ship_black_sea_shipyard_2_flag
		swap_ideas = {
			remove_idea = RUS_black_sea_shipyard_4
			add_idea = RUS_black_sea_shipyard_2_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_black_sea_shipyard_1_4
		}
		set_country_flag = RUS_merge_ship_black_sea_shipyard_2_flag
		swap_ideas = {
			remove_idea = RUS_black_sea_shipyard_1_4
			add_idea = RUS_black_sea_shipyard_final_2
		}
	}

	#SEVASTOPOL MARINE PLANT
	else_if = {
		limit = {
			has_idea = RUS_sevastopol_marine_plant
		}
		set_country_flag = RUS_merge_ship_sevastopol_marine_plant_2_flag
		swap_ideas = {
			remove_idea = RUS_sevastopol_marine_plant
			add_idea = RUS_sevastopol_marine_plant_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_sevastopol_marine_plant_1
		}
		set_country_flag = RUS_merge_ship_sevastopol_marine_plant_2_flag
		swap_ideas = {
			remove_idea = RUS_sevastopol_marine_plant_1
			add_idea = RUS_sevastopol_marine_plant_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_sevastopol_marine_plant_4
		}
		set_country_flag = RUS_merge_ship_sevastopol_marine_plant_2_flag
		swap_ideas = {
			remove_idea = RUS_sevastopol_marine_plant_4
			add_idea = RUS_sevastopol_marine_plant_2_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_sevastopol_marine_plant_1_4
		}
		set_country_flag = RUS_merge_ship_sevastopol_marine_plant_2_flag
		swap_ideas = {
			remove_idea = RUS_sevastopol_marine_plant_1_4
			add_idea = RUS_sevastopol_marine_plant_final_2
		}
	}
}

 #     #                                       #####       ######                                        #####
 ##    #    ##    #    #    ##    #           #     #      #     #  #         ##     ####   #    #      #     #  ######    ##
 # #   #   #  #   #    #   #  #   #                 #      #     #  #        #  #   #    #  #   #       #        #        #  #
 #  #  #  #    #  #    #  #    #  #            #####       ######   #       #    #  #       ####         #####   #####   #    #
 #   # #  ######  #    #  ######  #                 #      #     #  #       ######  #       #  #              #  #       ######
 #    ##  #    #   #  #   #    #  #           #     #      #     #  #       #    #  #    #  #   #       #     #  #       #    #
 #     #  #    #    ##    #    #  ######       #####       ######   ######  #    #   ####   #    #       #####   ######  #    #


RUS_upgrade_appropriate_ship_designer_3_black_sea_effect = {
	#BLACK SEA SHIPYARD
	if = {
		limit = {
			has_idea = RUS_black_sea_shipyard
		}
		set_country_flag = RUS_merge_ship_black_sea_shipyard_3_flag
		swap_ideas = {
			remove_idea = RUS_black_sea_shipyard
			add_idea = RUS_black_sea_shipyard_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_black_sea_shipyard_1
		}
		set_country_flag = RUS_merge_ship_black_sea_shipyard_3_flag
		swap_ideas = {
			remove_idea = RUS_black_sea_shipyard_1
			add_idea = RUS_black_sea_shipyard_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_black_sea_shipyard_4
		}
		set_country_flag = RUS_merge_ship_black_sea_shipyard_3_flag
		swap_ideas = {
			remove_idea = RUS_black_sea_shipyard_4
			add_idea = RUS_black_sea_shipyard_3_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_black_sea_shipyard_1_4
		}
		set_country_flag = RUS_merge_ship_black_sea_shipyard_3_flag
		swap_ideas = {
			remove_idea = RUS_black_sea_shipyard_1_4
			add_idea = RUS_black_sea_shipyard_final_3
		}
	}

	#SEVASTOPOL MARINE PLANT
	else_if = {
		limit = {
			has_idea = RUS_sevastopol_marine_plant
		}
		set_country_flag = RUS_merge_ship_sevastopol_marine_plant_3_flag
		swap_ideas = {
			remove_idea = RUS_sevastopol_marine_plant
			add_idea = RUS_sevastopol_marine_plant_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_sevastopol_marine_plant_1
		}
		set_country_flag = RUS_merge_ship_sevastopol_marine_plant_3_flag
		swap_ideas = {
			remove_idea = RUS_sevastopol_marine_plant_1
			add_idea = RUS_sevastopol_marine_plant_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_sevastopol_marine_plant_4
		}
		set_country_flag = RUS_merge_ship_sevastopol_marine_plant_3_flag
		swap_ideas = {
			remove_idea = RUS_sevastopol_marine_plant_4
			add_idea = RUS_sevastopol_marine_plant_3_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_sevastopol_marine_plant_1_4
		}
		set_country_flag = RUS_merge_ship_sevastopol_marine_plant_3_flag
		swap_ideas = {
			remove_idea = RUS_sevastopol_marine_plant_1_4
			add_idea = RUS_sevastopol_marine_plant_final_3
		}
	}
}

 #     #                                      #            ######                                        #####
 ##    #    ##    #    #    ##    #           #    #       #     #  #         ##     ####   #    #      #     #  ######    ##
 # #   #   #  #   #    #   #  #   #           #    #       #     #  #        #  #   #    #  #   #       #        #        #  #
 #  #  #  #    #  #    #  #    #  #           #    #       ######   #       #    #  #       ####         #####   #####   #    #
 #   # #  ######  #    #  ######  #           #######      #     #  #       ######  #       #  #              #  #       ######
 #    ##  #    #   #  #   #    #  #                #       #     #  #       #    #  #    #  #   #       #     #  #       #    #
 #     #  #    #    ##    #    #  ######           #       ######   ######  #    #   ####   #    #       #####   ######  #    #


RUS_upgrade_appropriate_ship_designer_4_black_sea_effect = {
	#BLACK SEA SHIPYARD
	if = {
		limit = {
			has_idea = RUS_black_sea_shipyard
		}
		set_country_flag = RUS_merge_ship_black_sea_shipyard_4_flag
		swap_ideas = {
			remove_idea = RUS_black_sea_shipyard
			add_idea = RUS_black_sea_shipyard_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_black_sea_shipyard_1
		}
		set_country_flag = RUS_merge_ship_black_sea_shipyard_4_flag
		swap_ideas = {
			remove_idea = RUS_black_sea_shipyard_1
			add_idea = RUS_black_sea_shipyard_1_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_black_sea_shipyard_2
		}
		set_country_flag = RUS_merge_ship_black_sea_shipyard_4_flag
		swap_ideas = {
			remove_idea = RUS_black_sea_shipyard_2
			add_idea = RUS_black_sea_shipyard_2_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_black_sea_shipyard_3
		}
		set_country_flag = RUS_merge_ship_black_sea_shipyard_4_flag
		swap_ideas = {
			remove_idea = RUS_black_sea_shipyard_3
			add_idea = RUS_black_sea_shipyard_3_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_black_sea_shipyard_1_2
		}
		set_country_flag = RUS_merge_ship_black_sea_shipyard_4_flag
		swap_ideas = {
			remove_idea = RUS_black_sea_shipyard_1_2
			add_idea = RUS_black_sea_shipyard_final_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_black_sea_shipyard_1_3
		}
		set_country_flag = RUS_merge_ship_black_sea_shipyard_4_flag
		swap_ideas = {
			remove_idea = RUS_black_sea_shipyard_1_3
			add_idea = RUS_black_sea_shipyard_final_3
		}
	}

	#SEVASTOPOL MARINE PLANT
	else_if = {
		limit = {
			has_idea = RUS_sevastopol_marine_plant
		}
		set_country_flag = RUS_merge_ship_sevastopol_marine_plant_4_flag
		swap_ideas = {
			remove_idea = RUS_sevastopol_marine_plant
			add_idea = RUS_sevastopol_marine_plant_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_sevastopol_marine_plant_1
		}
		set_country_flag = RUS_merge_ship_sevastopol_marine_plant_4_flag
		swap_ideas = {
			remove_idea = RUS_sevastopol_marine_plant_1
			add_idea = RUS_sevastopol_marine_plant_1_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_sevastopol_marine_plant_2
		}
		set_country_flag = RUS_merge_ship_sevastopol_marine_plant_4_flag
		swap_ideas = {
			remove_idea = RUS_sevastopol_marine_plant_2
			add_idea = RUS_sevastopol_marine_plant_2_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_sevastopol_marine_plant_3
		}
		set_country_flag = RUS_merge_ship_sevastopol_marine_plant_4_flag
		swap_ideas = {
			remove_idea = RUS_sevastopol_marine_plant_3
			add_idea = RUS_sevastopol_marine_plant_3_4
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_sevastopol_marine_plant_1_2
		}
		set_country_flag = RUS_merge_ship_sevastopol_marine_plant_4_flag
		swap_ideas = {
			remove_idea = RUS_sevastopol_marine_plant_1_2
			add_idea = RUS_sevastopol_marine_plant_final_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_sevastopol_marine_plant_1_3
		}
		set_country_flag = RUS_merge_ship_sevastopol_marine_plant_4_flag
		swap_ideas = {
			remove_idea = RUS_sevastopol_marine_plant_1_3
			add_idea = RUS_sevastopol_marine_plant_final_3
		}
	}
}


   ###    #### ########   ######  ########     ###    ######## ########    ########  ########  ######  ####  ######   ##    ## ######## ########
  ## ##    ##  ##     ## ##    ## ##     ##   ## ##   ##          ##       ##     ## ##       ##    ##  ##  ##    ##  ###   ## ##       ##     ##
 ##   ##   ##  ##     ## ##       ##     ##  ##   ##  ##          ##       ##     ## ##       ##        ##  ##        ####  ## ##       ##     ##
##     ##  ##  ########  ##       ########  ##     ## ######      ##       ##     ## ######    ######   ##  ##   #### ## ## ## ######   ########
#########  ##  ##   ##   ##       ##   ##   ######### ##          ##       ##     ## ##             ##  ##  ##    ##  ##  #### ##       ##   ##
##     ##  ##  ##    ##  ##    ## ##    ##  ##     ## ##          ##       ##     ## ##       ##    ##  ##  ##    ##  ##   ### ##       ##    ##
##     ## #### ##     ##  ######  ##     ## ##     ## ##          ##       ########  ########  ######  ####  ######   ##    ## ######## ##     ##

    #                                                             #
   # #    #  #####    ####   #####     ##    ######  #####       ##
  #   #   #  #    #  #    #  #    #   #  #   #         #        # #
 #     #  #  #    #  #       #    #  #    #  #####     #          #
 #######  #  #####   #       #####   ######  #         #          #
 #     #  #  #   #   #    #  #   #   #    #  #         #          #
 #     #  #  #    #   ####   #    #  #    #  #         #        #####


RUS_upgrade_appropriate_aircraft_designer_1_effect = {
	#MIG
	if = {
		limit = {
			has_idea = RUS_mig_design_bureau
		}
		set_country_flag = RUS_merge_aircraft_mig_1_flag
		swap_ideas = {
			remove_idea = RUS_mig_design_bureau
			add_idea = RUS_mig_design_bureau_1
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_mig_design_bureau_2
		}
		set_country_flag = RUS_merge_aircraft_mig_1_flag
		swap_ideas = {
			remove_idea = RUS_mig_design_bureau_2
			add_idea = RUS_mig_design_bureau_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_mig_design_bureau_3
		}
		set_country_flag = RUS_merge_aircraft_mig_1_flag
		swap_ideas = {
			remove_idea = RUS_mig_design_bureau_3
			add_idea = RUS_mig_design_bureau_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_mig_design_bureau_2_3
		}
		set_country_flag = RUS_merge_aircraft_mig_1_flag
		swap_ideas = {
			remove_idea = RUS_mig_design_bureau_2_3
			add_idea = RUS_mig_design_bureau_final
		}
	}

	#ILYUSHIN
	else_if = {
		limit = {
			has_idea = RUS_ilyushin_design_bureau
		}
		set_country_flag = RUS_merge_aircraft_ilyushin_1_flag
		swap_ideas = {
			remove_idea = RUS_ilyushin_design_bureau
			add_idea = RUS_ilyushin_design_bureau_1
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_ilyushin_design_bureau_2
		}
		set_country_flag = RUS_merge_aircraft_ilyushin_1_flag
		swap_ideas = {
			remove_idea = RUS_ilyushin_design_bureau_2
			add_idea = RUS_ilyushin_design_bureau_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_ilyushin_design_bureau_3
		}
		set_country_flag = RUS_merge_aircraft_ilyushin_1_flag
		swap_ideas = {
			remove_idea = RUS_ilyushin_design_bureau_3
			add_idea = RUS_ilyushin_design_bureau_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_ilyushin_design_bureau_2_3
		}
		set_country_flag = RUS_merge_aircraft_ilyushin_1_flag
		swap_ideas = {
			remove_idea = RUS_ilyushin_design_bureau_2_3
			add_idea = RUS_ilyushin_design_bureau_final
		}
	}

	#TUPOLEV
	else_if = {
		limit = {
			has_idea = RUS_tupolev_design_bureau
		}
		set_country_flag = RUS_merge_aircraft_tupolev_1_flag
		swap_ideas = {
			remove_idea = RUS_tupolev_design_bureau
			add_idea = RUS_tupolev_design_bureau_1
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_tupolev_design_bureau_2
		}
		set_country_flag = RUS_merge_aircraft_tupolev_1_flag
		swap_ideas = {
			remove_idea = RUS_tupolev_design_bureau_2
			add_idea = RUS_tupolev_design_bureau_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_tupolev_design_bureau_3
		}
		set_country_flag = RUS_merge_aircraft_tupolev_1_flag
		swap_ideas = {
			remove_idea = RUS_tupolev_design_bureau_3
			add_idea = RUS_tupolev_design_bureau_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_tupolev_design_bureau_2_3
		}
		set_country_flag = RUS_merge_aircraft_tupolev_1_flag
		swap_ideas = {
			remove_idea = RUS_tupolev_design_bureau_2_3
			add_idea = RUS_tupolev_design_bureau_final
		}
	}

	#YAKOVLEV
	else_if = {
		limit = {
			has_idea = RUS_yakovlev_design_bureau
		}
		set_country_flag = RUS_merge_aircraft_yakovlev_1_flag
		swap_ideas = {
			remove_idea = RUS_yakovlev_design_bureau
			add_idea = RUS_yakovlev_design_bureau_1
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_yakovlev_design_bureau_2
		}
		set_country_flag = RUS_merge_aircraft_yakovlev_1_flag
		swap_ideas = {
			remove_idea = RUS_yakovlev_design_bureau_2
			add_idea = RUS_yakovlev_design_bureau_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_yakovlev_design_bureau_3
		}
		set_country_flag = RUS_merge_aircraft_yakovlev_1_flag
		swap_ideas = {
			remove_idea = RUS_yakovlev_design_bureau_3
			add_idea = RUS_yakovlev_design_bureau_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_yakovlev_design_bureau_2_3
		}
		set_country_flag = RUS_merge_aircraft_yakovlev_1_flag
		swap_ideas = {
			remove_idea = RUS_yakovlev_design_bureau_2_3
			add_idea = RUS_yakovlev_design_bureau_final
		}
	}
}

    #                                                            #####
   # #    #  #####    ####   #####     ##    ######  #####      #     #
  #   #   #  #    #  #    #  #    #   #  #   #         #              #
 #     #  #  #    #  #       #    #  #    #  #####     #         #####
 #######  #  #####   #       #####   ######  #         #        #
 #     #  #  #   #   #    #  #   #   #    #  #         #        #
 #     #  #  #    #   ####   #    #  #    #  #         #        #######


RUS_upgrade_appropriate_aircraft_designer_2_effect = {
	#MIG
	if = {
		limit = {
			has_idea = RUS_mig_design_bureau
		}
		set_country_flag = RUS_merge_aircraft_mig_2_flag
		swap_ideas = {
			remove_idea = RUS_mig_design_bureau
			add_idea = RUS_mig_design_bureau_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_mig_design_bureau_1
		}
		set_country_flag = RUS_merge_aircraft_mig_2_flag
		swap_ideas = {
			remove_idea = RUS_mig_design_bureau_1
			add_idea = RUS_mig_design_bureau_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_mig_design_bureau_3
		}
		set_country_flag = RUS_merge_aircraft_mig_2_flag
		swap_ideas = {
			remove_idea = RUS_mig_design_bureau_3
			add_idea = RUS_mig_design_bureau_2_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_mig_design_bureau_1_3
		}
		set_country_flag = RUS_merge_aircraft_mig_2_flag
		swap_ideas = {
			remove_idea = RUS_mig_design_bureau_1_3
			add_idea = RUS_mig_design_bureau_final
		}
	}

	#ILYUSHIN
	else_if = {
		limit = {
			has_idea = RUS_ilyushin_design_bureau
		}
		set_country_flag = RUS_merge_aircraft_ilyushin_2_flag
		swap_ideas = {
			remove_idea = RUS_ilyushin_design_bureau
			add_idea = RUS_ilyushin_design_bureau_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_ilyushin_design_bureau_1
		}
		set_country_flag = RUS_merge_aircraft_ilyushin_2_flag
		swap_ideas = {
			remove_idea = RUS_ilyushin_design_bureau_1
			add_idea = RUS_ilyushin_design_bureau_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_ilyushin_design_bureau_3
		}
		set_country_flag = RUS_merge_aircraft_ilyushin_2_flag
		swap_ideas = {
			remove_idea = RUS_ilyushin_design_bureau_3
			add_idea = RUS_ilyushin_design_bureau_2_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_ilyushin_design_bureau_1_3
		}
		set_country_flag = RUS_merge_aircraft_ilyushin_2_flag
		swap_ideas = {
			remove_idea = RUS_ilyushin_design_bureau_1_3
			add_idea = RUS_ilyushin_design_bureau_final
		}
	}

	#TUPOLEV
	else_if = {
		limit = {
			has_idea = RUS_tupolev_design_bureau
		}
		set_country_flag = RUS_merge_aircraft_tupolev_2_flag
		swap_ideas = {
			remove_idea = RUS_tupolev_design_bureau
			add_idea = RUS_tupolev_design_bureau_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_tupolev_design_bureau_1
		}
		set_country_flag = RUS_merge_aircraft_tupolev_2_flag
		swap_ideas = {
			remove_idea = RUS_tupolev_design_bureau_1
			add_idea = RUS_tupolev_design_bureau_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_tupolev_design_bureau_3
		}
		set_country_flag = RUS_merge_aircraft_tupolev_2_flag
		swap_ideas = {
			remove_idea = RUS_tupolev_design_bureau_3
			add_idea = RUS_tupolev_design_bureau_2_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_tupolev_design_bureau_1_3
		}
		set_country_flag = RUS_merge_aircraft_tupolev_2_flag
		swap_ideas = {
			remove_idea = RUS_tupolev_design_bureau_1_3
			add_idea = RUS_tupolev_design_bureau_final
		}
	}

	#YAKOVLEV
	else_if = {
		limit = {
			has_idea = RUS_yakovlev_design_bureau
		}
		set_country_flag = RUS_merge_aircraft_yakovlev_2_flag
		swap_ideas = {
			remove_idea = RUS_yakovlev_design_bureau
			add_idea = RUS_yakovlev_design_bureau_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_yakovlev_design_bureau_1
		}
		set_country_flag = RUS_merge_aircraft_yakovlev_2_flag
		swap_ideas = {
			remove_idea = RUS_yakovlev_design_bureau_1
			add_idea = RUS_yakovlev_design_bureau_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_yakovlev_design_bureau_3
		}
		set_country_flag = RUS_merge_aircraft_yakovlev_2_flag
		swap_ideas = {
			remove_idea = RUS_yakovlev_design_bureau_3
			add_idea = RUS_yakovlev_design_bureau_2_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_yakovlev_design_bureau_1_3
		}
		set_country_flag = RUS_merge_aircraft_yakovlev_2_flag
		swap_ideas = {
			remove_idea = RUS_yakovlev_design_bureau_1_3
			add_idea = RUS_yakovlev_design_bureau_final
		}
	}
}

    #                                                            #####
   # #    #  #####    ####   #####     ##    ######  #####      #     #
  #   #   #  #    #  #    #  #    #   #  #   #         #              #
 #     #  #  #    #  #       #    #  #    #  #####     #         #####
 #######  #  #####   #       #####   ######  #         #              #
 #     #  #  #   #   #    #  #   #   #    #  #         #        #     #
 #     #  #  #    #   ####   #    #  #    #  #         #         #####


RUS_upgrade_appropriate_aircraft_designer_3_effect = {
	#MIG
	if = {
		limit = {
			has_idea = RUS_mig_design_bureau
		}
		set_country_flag = RUS_merge_aircraft_mig_3_flag
		swap_ideas = {
			remove_idea = RUS_mig_design_bureau
			add_idea = RUS_mig_design_bureau_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_mig_design_bureau_1
		}
		set_country_flag = RUS_merge_aircraft_mig_3_flag
		swap_ideas = {
			remove_idea = RUS_mig_design_bureau_1
			add_idea = RUS_mig_design_bureau_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_mig_design_bureau_2
		}
		set_country_flag = RUS_merge_aircraft_mig_3_flag
		swap_ideas = {
			remove_idea = RUS_mig_design_bureau_2
			add_idea = RUS_mig_design_bureau_2_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_mig_design_bureau_1_2
		}
		set_country_flag = RUS_merge_aircraft_mig_3_flag
		swap_ideas = {
			remove_idea = RUS_mig_design_bureau_1_2
			add_idea = RUS_mig_design_bureau_final
		}
	}

	#ILYUSHIN
	else_if = {
		limit = {
			has_idea = RUS_ilyushin_design_bureau
		}
		set_country_flag = RUS_merge_aircraft_ilyushin_3_flag
		swap_ideas = {
			remove_idea = RUS_ilyushin_design_bureau
			add_idea = RUS_ilyushin_design_bureau_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_ilyushin_design_bureau_1
		}
		set_country_flag = RUS_merge_aircraft_ilyushin_3_flag
		swap_ideas = {
			remove_idea = RUS_ilyushin_design_bureau_1
			add_idea = RUS_ilyushin_design_bureau_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_ilyushin_design_bureau_2
		}
		set_country_flag = RUS_merge_aircraft_ilyushin_3_flag
		swap_ideas = {
			remove_idea = RUS_ilyushin_design_bureau_2
			add_idea = RUS_ilyushin_design_bureau_2_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_ilyushin_design_bureau_1_2
		}
		set_country_flag = RUS_merge_aircraft_ilyushin_3_flag
		swap_ideas = {
			remove_idea = RUS_ilyushin_design_bureau_1_2
			add_idea = RUS_ilyushin_design_bureau_final
		}
	}

	#TUPOLEV
	else_if = {
		limit = {
			has_idea = RUS_tupolev_design_bureau
		}
		set_country_flag = RUS_merge_aircraft_tupolev_3_flag
		swap_ideas = {
			remove_idea = RUS_tupolev_design_bureau
			add_idea = RUS_tupolev_design_bureau_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_tupolev_design_bureau_1
		}
		set_country_flag = RUS_merge_aircraft_tupolev_3_flag
		swap_ideas = {
			remove_idea = RUS_tupolev_design_bureau_1
			add_idea = RUS_tupolev_design_bureau_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_tupolev_design_bureau_2
		}
		set_country_flag = RUS_merge_aircraft_tupolev_3_flag
		swap_ideas = {
			remove_idea = RUS_tupolev_design_bureau_2
			add_idea = RUS_tupolev_design_bureau_2_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_tupolev_design_bureau_1_2
		}
		set_country_flag = RUS_merge_aircraft_tupolev_3_flag
		swap_ideas = {
			remove_idea = RUS_tupolev_design_bureau_1_2
			add_idea = RUS_tupolev_design_bureau_final
		}
	}

	#YAKOVLEV
	else_if = {
		limit = {
			has_idea = RUS_yakovlev_design_bureau
		}
		set_country_flag = RUS_merge_aircraft_yakovlev_3_flag
		swap_ideas = {
			remove_idea = RUS_yakovlev_design_bureau
			add_idea = RUS_yakovlev_design_bureau_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_yakovlev_design_bureau_1
		}
		set_country_flag = RUS_merge_aircraft_yakovlev_3_flag
		swap_ideas = {
			remove_idea = RUS_yakovlev_design_bureau_1
			add_idea = RUS_yakovlev_design_bureau_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_yakovlev_design_bureau_2
		}
		set_country_flag = RUS_merge_aircraft_yakovlev_3_flag
		swap_ideas = {
			remove_idea = RUS_yakovlev_design_bureau_2
			add_idea = RUS_yakovlev_design_bureau_2_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_yakovlev_design_bureau_1_2
		}
		set_country_flag = RUS_merge_aircraft_yakovlev_3_flag
		swap_ideas = {
			remove_idea = RUS_yakovlev_design_bureau_1_2
			add_idea = RUS_yakovlev_design_bureau_final
		}
	}
}


##     ##    ###    ######## ######## ########  #### ######## ##          ########  ########  ######  ####  ######   ##    ## ######## ########
###   ###   ## ##      ##    ##       ##     ##  ##  ##       ##          ##     ## ##       ##    ##  ##  ##    ##  ###   ## ##       ##     ##
#### ####  ##   ##     ##    ##       ##     ##  ##  ##       ##          ##     ## ##       ##        ##  ##        ####  ## ##       ##     ##
## ### ## ##     ##    ##    ######   ########   ##  ######   ##          ##     ## ######    ######   ##  ##   #### ## ## ## ######   ########
##     ## #########    ##    ##       ##   ##    ##  ##       ##          ##     ## ##             ##  ##  ##    ##  ##  #### ##       ##   ##
##     ## ##     ##    ##    ##       ##    ##   ##  ##       ##          ##     ## ##       ##    ##  ##  ##    ##  ##   ### ##       ##    ##
##     ## ##     ##    ##    ######## ##     ## #### ######## ########    ########  ########  ######  ####  ######   ##    ## ######## ##     ##

 #     #                                                          #
 ##   ##    ##    #####  ######  #####   #  ######  #            ##
 # # # #   #  #     #    #       #    #  #  #       #           # #
 #  #  #  #    #    #    #####   #    #  #  #####   #             #
 #     #  ######    #    #       #####   #  #       #             #
 #     #  #    #    #    #       #   #   #  #       #             #
 #     #  #    #    #    ######  #    #  #  ######  ######      #####

RUS_upgrade_appropriate_materiel_designer_1_artillery_effect = {
	#GRABIN
	if = {
		limit = {
			has_idea = RUS_grabin_design_bureau
		}
		set_country_flag = RUS_merge_materiel_grabin_1_flag
		swap_ideas = {
			remove_idea = RUS_grabin_design_bureau
			add_idea = RUS_grabin_design_bureau_1
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_grabin_design_bureau_2
		}
		set_country_flag = RUS_merge_materiel_grabin_1_flag
		swap_ideas = {
			remove_idea = RUS_grabin_design_bureau_2
			add_idea = RUS_grabin_design_bureau_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_grabin_design_bureau_3
		}
		set_country_flag = RUS_merge_materiel_grabin_1_flag
		swap_ideas = {
			remove_idea = RUS_grabin_design_bureau_3
			add_idea = RUS_grabin_design_bureau_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_grabin_design_bureau_2_3
		}
		set_country_flag = RUS_merge_materiel_grabin_1_flag
		swap_ideas = {
			remove_idea = RUS_grabin_design_bureau_2_3
			add_idea = RUS_grabin_design_bureau_final
		}
	}
}

RUS_upgrade_appropriate_materiel_designer_1_infantry_effect = {
	#TULA
	if = {
		limit = {
			has_idea = RUS_tula_arms_plant
		}
		set_country_flag = RUS_merge_materiel_tula_1_flag
		swap_ideas = {
			remove_idea = RUS_tula_arms_plant
			add_idea = RUS_tula_arms_plant_1
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_tula_arms_plant_2
		}
		set_country_flag = RUS_merge_materiel_tula_1_flag
		swap_ideas = {
			remove_idea = RUS_tula_arms_plant_2
			add_idea = RUS_tula_arms_plant_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_tula_arms_plant_3
		}
		set_country_flag = RUS_merge_materiel_tula_1_flag
		swap_ideas = {
			remove_idea = RUS_tula_arms_plant_3
			add_idea = RUS_tula_arms_plant_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_tula_arms_plant_2_3
		}
		set_country_flag = RUS_merge_materiel_tula_1_flag
		swap_ideas = {
			remove_idea = RUS_tula_arms_plant_2_3
			add_idea = RUS_tula_arms_plant_final
		}
	}
}

RUS_upgrade_appropriate_materiel_designer_1_motorized_effect = {
	#GAZ
	if = {
		limit = {
			has_idea = RUS_gaz
		}
		set_country_flag = RUS_merge_materiel_gaz_1_flag
		swap_ideas = {
			remove_idea = RUS_gaz
			add_idea = RUS_gaz_1
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_gaz_2
		}
		set_country_flag = RUS_merge_materiel_gaz_1_flag
		swap_ideas = {
			remove_idea = RUS_gaz_2
			add_idea = RUS_gaz_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_gaz_3
		}
		set_country_flag = RUS_merge_materiel_gaz_1_flag
		swap_ideas = {
			remove_idea = RUS_gaz_3
			add_idea = RUS_gaz_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_gaz_2_3
		}
		set_country_flag = RUS_merge_materiel_gaz_1_flag
		swap_ideas = {
			remove_idea = RUS_gaz_2_3
			add_idea = RUS_gaz_final
		}
	}
}

 #     #                                                         #####
 ##   ##    ##    #####  ######  #####   #  ######  #           #     #
 # # # #   #  #     #    #       #    #  #  #       #                 #
 #  #  #  #    #    #    #####   #    #  #  #####   #            #####
 #     #  ######    #    #       #####   #  #       #           #
 #     #  #    #    #    #       #   #   #  #       #           #
 #     #  #    #    #    ######  #    #  #  ######  ######      #######


RUS_upgrade_appropriate_materiel_designer_2_effect = {
	#GRABIN
	if = {
		limit = {
			has_idea = RUS_grabin_design_bureau
		}
		set_country_flag = RUS_merge_materiel_grabin_2_flag
		swap_ideas = {
			remove_idea = RUS_grabin_design_bureau
			add_idea = RUS_grabin_design_bureau_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_grabin_design_bureau_1
		}
		set_country_flag = RUS_merge_materiel_grabin_2_flag
		swap_ideas = {
			remove_idea = RUS_grabin_design_bureau_1
			add_idea = RUS_grabin_design_bureau_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_grabin_design_bureau_3
		}
		set_country_flag = RUS_merge_materiel_grabin_2_flag
		swap_ideas = {
			remove_idea = RUS_grabin_design_bureau_3
			add_idea = RUS_grabin_design_bureau_2_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_grabin_design_bureau_1_3
		}
		set_country_flag = RUS_merge_materiel_grabin_2_flag
		swap_ideas = {
			remove_idea = RUS_grabin_design_bureau_1_3
			add_idea = RUS_grabin_design_bureau_final
		}
	}

	#TULA
	else_if = {
		limit = {
			has_idea = RUS_tula_arms_plant
		}
		set_country_flag = RUS_merge_materiel_tula_2_flag
		swap_ideas = {
			remove_idea = RUS_tula_arms_plant
			add_idea = RUS_tula_arms_plant_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_tula_arms_plant_1
		}
		set_country_flag = RUS_merge_materiel_tula_2_flag
		swap_ideas = {
			remove_idea = RUS_tula_arms_plant_1
			add_idea = RUS_tula_arms_plant_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_tula_arms_plant_3
		}
		set_country_flag = RUS_merge_materiel_tula_2_flag
		swap_ideas = {
			remove_idea = RUS_tula_arms_plant_3
			add_idea = RUS_tula_arms_plant_2_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_tula_arms_plant_1_3
		}
		set_country_flag = RUS_merge_materiel_tula_2_flag
		swap_ideas = {
			remove_idea = RUS_tula_arms_plant_1_3
			add_idea = RUS_tula_arms_plant_final
		}
	}

	#GAZ
	else_if = {
		limit = {
			has_idea = RUS_gaz
		}
		set_country_flag = RUS_merge_materiel_gaz_2_flag
		swap_ideas = {
			remove_idea = RUS_gaz
			add_idea = RUS_gaz_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_gaz_1
		}
		set_country_flag = RUS_merge_materiel_gaz_2_flag
		swap_ideas = {
			remove_idea = RUS_gaz_1
			add_idea = RUS_gaz_1_2
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_gaz_3
		}
		set_country_flag = RUS_merge_materiel_gaz_2_flag
		swap_ideas = {
			remove_idea = RUS_gaz_3
			add_idea = RUS_gaz_2_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_gaz_1_3
		}
		set_country_flag = RUS_merge_materiel_gaz_2_flag
		swap_ideas = {
			remove_idea = RUS_gaz_1_3
			add_idea = RUS_gaz_final
		}
	}
}

 #     #                                                         #####
 ##   ##    ##    #####  ######  #####   #  ######  #           #     #
 # # # #   #  #     #    #       #    #  #  #       #                 #
 #  #  #  #    #    #    #####   #    #  #  #####   #            #####
 #     #  ######    #    #       #####   #  #       #                 #
 #     #  #    #    #    #       #   #   #  #       #           #     #
 #     #  #    #    #    ######  #    #  #  ######  ######       #####

RUS_upgrade_appropriate_materiel_designer_3_effect = {
	#GRABIN
	if = {
		limit = {
			has_idea = RUS_grabin_design_bureau
		}
		set_country_flag = RUS_merge_materiel_grabin_3_flag
		swap_ideas = {
			remove_idea = RUS_grabin_design_bureau
			add_idea = RUS_grabin_design_bureau_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_grabin_design_bureau_1
		}
		set_country_flag = RUS_merge_materiel_grabin_3_flag
		swap_ideas = {
			remove_idea = RUS_grabin_design_bureau_1
			add_idea = RUS_grabin_design_bureau_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_grabin_design_bureau_2
		}
		set_country_flag = RUS_merge_materiel_grabin_3_flag
		swap_ideas = {
			remove_idea = RUS_grabin_design_bureau_2
			add_idea = RUS_grabin_design_bureau_2_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_grabin_design_bureau_1_2
		}
		set_country_flag = RUS_merge_materiel_grabin_3_flag
		swap_ideas = {
			remove_idea = RUS_grabin_design_bureau_1_2
			add_idea = RUS_grabin_design_bureau_final
		}
	}

	#TULA
	else_if = {
		limit = {
			has_idea = RUS_tula_arms_plant
		}
		set_country_flag = RUS_merge_materiel_tula_3_flag
		swap_ideas = {
			remove_idea = RUS_tula_arms_plant
			add_idea = RUS_tula_arms_plant_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_tula_arms_plant_1
		}
		set_country_flag = RUS_merge_materiel_tula_3_flag
		swap_ideas = {
			remove_idea = RUS_tula_arms_plant_1
			add_idea = RUS_tula_arms_plant_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_tula_arms_plant_2
		}
		set_country_flag = RUS_merge_materiel_tula_3_flag
		swap_ideas = {
			remove_idea = RUS_tula_arms_plant_2
			add_idea = RUS_tula_arms_plant_2_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_tula_arms_plant_1_2
		}
		set_country_flag = RUS_merge_materiel_tula_3_flag
		swap_ideas = {
			remove_idea = RUS_tula_arms_plant_1_2
			add_idea = RUS_tula_arms_plant_final
		}
	}

	#GAZ
	else_if = {
		limit = {
			has_idea = RUS_gaz
		}
		set_country_flag = RUS_merge_materiel_gaz_3_flag
		swap_ideas = {
			remove_idea = RUS_gaz
			add_idea = RUS_gaz_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_gaz_1
		}
		set_country_flag = RUS_merge_materiel_gaz_3_flag
		swap_ideas = {
			remove_idea = RUS_gaz_1
			add_idea = RUS_gaz_1_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_gaz_2
		}
		set_country_flag = RUS_merge_materiel_gaz_3_flag
		swap_ideas = {
			remove_idea = RUS_gaz_2
			add_idea = RUS_gaz_2_3
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_gaz_1_2
		}
		set_country_flag = RUS_merge_materiel_gaz_3_flag
		swap_ideas = {
			remove_idea = RUS_gaz_1_2
			add_idea = RUS_gaz_final
		}
	}
}

 ## #   #  ##  ###       ##  #  # #  # ###   ##  #  #      ## ###  ### ###  ### ###  ##
#   #   # #  # #  #     #  # #  # #  # #  # #  # #  #     #   #  #  #  #  #  #   #  #
 #  # # # #### ###      #    #### #  # ###  #    ####      #  ###   #  ###   #   #   #
  # # # # #  # #        #  # #  # #  # #  # #  # #  #       # #     #  #  #  #   #    #
##   # #  #  # #         ##  #  #  ##  #  #  ##  #  #     ##  #    ### #  # ###  #  ##





###########################################################################################################################

 ##   ##  #   # #   # #  # #  # ###  ## ###      ##  ### #   # ### #       #   #  ##  ###      ### ### ### ###  ##  ###  ##
#  # #  # ## ## ## ## #  # ## #  #  #    #      #  #  #  #   #  #  #       #   # #  # #  #     #   #   #   #   #  #  #  #
#    #  # # # # # # # #  # # ##  #   #   #      #     #   # #   #  #       # # # #### ###      ##  ##  ##  ##  #     #   #
#  # #  # #   # #   # #  # #  #  #    #  #      #  #  #   # #   #  #       # # # #  # #  #     #   #   #   #   #  #  #    #
 ##   ##  #   # #   #  ##  #  # ### ##   #       ##  ###   #   ### ###      # #  #  # #  #     ### #   #   ###  ##   #  ##

###########################################################################################################################

RUS_set_up_nkvd = {
	random_owned_state = {
		limit = { is_capital = yes }

		create_unit = {
			division = "name = \"5ya NKVD Pogranichnaya Diviziya\" division_template = \"NKVD Pogranichnaya Diviziya\" start_experience_factor = 0.2 start_equipment_factor = 1.0" owner = PREV
		}
		create_unit = {
			division = "name = \"6ya NKVD Pogranichnaya Diviziya\" division_template = \"NKVD Pogranichnaya Diviziya\" start_experience_factor = 0.2 start_equipment_factor = 1.0" owner = PREV
		}
		create_unit = {
			division = "name = \"7ya NKVD Pogranichnaya Diviziya\" division_template = \"NKVD Pogranichnaya Diviziya\" start_experience_factor = 0.2 start_equipment_factor = 1.0" owner = PREV
		}
		create_unit = {
			division = "name = \"8ya NKVD Pogranichnaya Diviziya\" division_template = \"NKVD Pogranichnaya Diviziya\" start_experience_factor = 0.2 start_equipment_factor = 1.0" owner = PREV
		}
		create_unit = {
			division = "name = \"9ya NKVD Pogranichnaya Diviziya\" division_template = \"NKVD Pogranichnaya Diviziya\" start_experience_factor = 0.2 start_equipment_factor = 1.0" owner = PREV
		}
		create_unit = {
			division = "name = \"10ya NKVD Pogranichnaya Diviziya\" division_template = \"NKVD Pogranichnaya Diviziya\" start_experience_factor = 0.2 start_equipment_factor = 1.0" owner = PREV
		}
		create_unit = {
			division = "name = \"11ya NKVD Pogranichnaya Diviziya\" division_template = \"NKVD Pogranichnaya Diviziya\" start_experience_factor = 0.2 start_equipment_factor = 1.0" owner = PREV
		}
		create_unit = {
			division = "name = \"12ya NKVD Pogranichnaya Diviziya\" division_template = \"NKVD Pogranichnaya Diviziya\" start_experience_factor = 0.2 start_equipment_factor = 1.0" owner = PREV
		}
		create_unit = {
			division = "name = \"13ya NKVD Pogranichnaya Diviziya\" division_template = \"NKVD Pogranichnaya Diviziya\" start_experience_factor = 0.2 start_equipment_factor = 1.0" owner = PREV
		}
		create_unit = {
			division = "name = \"14ya NKVD Pogranichnaya Diviziya\" division_template = \"NKVD Pogranichnaya Diviziya\" start_experience_factor = 0.2 start_equipment_factor = 1.0" owner = PREV
		}
		create_unit = {
			division = "name = \"15ya NKVD Pogranichnaya Diviziya\" division_template = \"NKVD Pogranichnaya Diviziya\" start_experience_factor = 0.2 start_equipment_factor = 1.0" owner = PREV
		}
		create_unit = {
			division = "name = \"16ya NKVD Pogranichnaya Diviziya\" division_template = \"NKVD Pogranichnaya Diviziya\" start_experience_factor = 0.2 start_equipment_factor = 1.0" owner = PREV
		}
		create_unit = {
			division = "name = \"17ya NKVD Pogranichnaya Diviziya\" division_template = \"NKVD Pogranichnaya Diviziya\" start_experience_factor = 0.2 start_equipment_factor = 1.0" owner = PREV
		}
		create_unit = {
			division = "name = \"18ya NKVD Pogranichnaya Diviziya\" division_template = \"NKVD Pogranichnaya Diviziya\" start_experience_factor = 0.2 start_equipment_factor = 1.0" owner = PREV
		}
	}

	
	IF = {
		limit = {}
		random_owned_controlled_state = {
			create_unit = {
				division = "division_template = \"NKVD Pogranichnaya Diviziya\" start_experience_factor = 0.2 start_equipment_factor = 1.0" owner = ROOT count = var:BWR.RUS_nkvd_divisions
			}

		}
	}
}

RUS_set_up_red_army = {

	delete_unit_template_and_units = {
	    division_template = "Strelkovaya Diviziya"
	    disband = yes
	}
	division_template = {
		name = "Strelkovaya Diviziya"
		division_names_group = RUS_INF_01

		regiments = {
			infantry = { x = 0 y = 0 }
			infantry = { x = 0 y = 1 }
			infantry = { x = 0 y = 2 }
			infantry = { x = 1 y = 0 }
			infantry = { x = 1 y = 1 }
			infantry = { x = 1 y = 2 }
			infantry = { x = 2 y = 0 }
			infantry = { x = 2 y = 1 }
			infantry = { x = 2 y = 2 }
		}
		support = {
			artillery = { x = 0 y = 0 }
		}
	}
	delete_unit_template_and_units = {
	    division_template = "Motostrelkovaya Diviziya"
	    disband = yes
	}

	division_template = {
		name = "Motostrelkovaya Diviziya"
		division_names_group = RUS_MOT_01
		regiments = {
			motorized = { x = 0 y = 0 }
			motorized = { x = 0 y = 1 }
			motorized = { x = 0 y = 2 }
			motorized = { x = 1 y = 0 }
			motorized = { x = 1 y = 1 }
			motorized = { x = 1 y = 2 }
		}
	}
	delete_unit_template_and_units = {
	    division_template = "Kavaleriyskaya Diviziya"
	    disband = yes
	}
	division_template = {
		name = "Kavaleriyskaya Diviziya" 	# Cavalry Division
		division_names_group = RUS_CAV_01

		regiments = {
			cavalry = { x = 0 y = 0 }
			cavalry = { x = 0 y = 1 }
			cavalry = { x = 1 y = 0 }
			cavalry = { x = 1 y = 1 }
		}
	}
	var:BWR.RUS_stalinist_civil_war_start_state = {

		create_unit = {
			division = "name = \"Strelkovaya Diviziya\" division_template = \"Strelkovaya Diviziya\" start_experience_factor = 0.1 start_equipment_factor = 1.0" owner = PREV count = var:PREV.civil_war_army_size
		}
	}
	random_owned_state = {
		limit = {
			NOT = { state = var:BWR.RUS_stalinist_civil_war_start_state  }
		}
		create_unit = {
			division = "name = \"Strelkovaya Diviziya\" division_template = \"Strelkovaya Diviziya\" start_experience_factor = 0.1 start_equipment_factor = 1.0" owner = PREV count = var:PREV.civil_war_army_size
		}
	}
	random_owned_state = {
		limit = {
			NOT = { state = var:BWR.RUS_stalinist_civil_war_start_state  }
			any_neighbor_state = { state = var:BWR.RUS_stalinist_civil_war_start_state  }
		}
		create_unit = {
			division = "name = \"Moskva Proletarskaya Motostrelkovaya Diviziya\" division_template = \"Motostrelkovaya Diviziya\" start_experience_factor = 0.1 start_equipment_factor = 1.0" owner = PREV count = 1
		}
	}
	random_owned_state = {
		limit = {
			any_neighbor_state = { state = var:BWR.RUS_stalinist_civil_war_start_state }
		}
		create_unit = {
			division = "name = \"Kavaleriyskaya Diviziya\" division_template = \"Kavaleriyskaya Diviziya\" start_experience_factor = 0.1 start_equipment_factor = 1.0" owner = PREV count = var:PREV.civil_war_army_size
		}
	}
	clear_variable = PREV.civil_war_army_size


}

RUS_set_up_left_opposition_militia = {
	division_template = {
	    name = "Trotskyist Workers' Militia"
	    is_locked = yes
	    division_names_group = RUS_INF_01
	    priority = 0
	    template_counter = 0
	    regiments = {
	        infantry = { x = 0 y = 0 }
	        infantry = { x = 0 y = 1 }
	        infantry = { x = 0 y = 2 }
	    }
	    is_locked = yes
	}
	division_template = {
	    name = "Trotskyist Peasant Militia"
	    is_locked = yes
	    division_names_group = RUS_INF_01
	    priority = 0
	    template_counter = 14
	    regiments = {
	        infantry = { x = 0 y = 0 }
	        infantry = { x = 0 y = 1 }
	        infantry = { x = 1 y = 0 }
	        infantry = { x = 1 y = 1 }
	    }
	    is_locked = yes
	}
	every_owned_state = {
		IF = {
			limit = {
				OR = {
					has_state_category = city
					has_state_category = large_city
					has_state_category = megalopolis
					has_state_category = metropolis
				}
			}
			create_unit = {
				division = "name = \"Workers' Miltia Brigade\" division_template = \"Trotskyist Workers' Militia\" start_experience_factor = 0.09 start_equipment_factor = 0.85" owner = ROOT
			}
		}
		ELSE_IF = {
			limit = {
				NOT = { has_state_category = enclave }
				NOT = { has_state_category = wasteland }
			}
			create_unit = {
				division = "name = \"Peasant Militia brigade\" division_template = \"Trotskyist Peasant Militia\" start_experience_factor = 0.01 start_equipment_factor = 0.55" owner = ROOT
			}
		}
	}
}

RUS_set_up_right_opposition_militia = {
	division_template = {
	    name = "Bukharinist Workers' Militia"
	    is_locked = yes
	    division_names_group = RUS_INF_01
	    priority = 0
	    template_counter = 0
	    regiments = {
	        infantry = { x = 0 y = 0 }
	        infantry = { x = 0 y = 1 }
	        infantry = { x = 0 y = 2 }
	    }
	    is_locked = yes
	}
	division_template = {
	    name = "Bukharinist Peasant Militia"
	    is_locked = yes
	    division_names_group = RUS_INF_01
	    priority = 0
	    template_counter = 14
	    regiments = {
	        infantry = { x = 0 y = 0 }
	        infantry = { x = 0 y = 1 }
	        infantry = { x = 1 y = 0 }
	        infantry = { x = 1 y = 1 }
	    }
	    is_locked = yes
	}
	every_owned_state = {
		IF = {
			limit = {
				OR = {
					has_state_category = city
					has_state_category = large_city
					has_state_category = megalopolis
					has_state_category = metropolis
				}
			}
			create_unit = {
				division = "name = \"Workers' Miltia Brigade\" division_template = \"Bukharinist Workers' Militia\" start_experience_factor = 0.09 start_equipment_factor = 0.85" owner = ROOT
			}
		}
		ELSE_IF = {
			limit = {
				NOT = { has_state_category = enclave }
				NOT = { has_state_category = wasteland }
			}
			create_unit = {
				division = "name = \"Peasant Militia brigade\" division_template = \"Bukharinist Peasant Militia\" start_experience_factor = 0.01 start_equipment_factor = 0.55" owner = ROOT
			}
		}
		# More Peasant Militia if collectivization has been reversed
		
	}
}

RUS_set_up_extras_from_concessions = {
	# Extra Troops from Japan?
	IF = {
		limit = {
			has_country_flag = RUS_CSW_transfer_vladivostok_flag
			any_country= {
				original_tag = BWR
				owns_state = 408
			}
		}
		RUS_set_up_japanese_troops = yes
	}
	# Equipment from Japan in return for North Sakhalin
	IF = {
		limit = {
			has_country_flag = RUS_CSW_transfer_sakhalin_flag
			any_country= {
				original_tag = BWR
				owns_state = 655
			}
		}
		
	}

	# Advisors from Germany
	IF = {
		limit = {
			has_country_flag = RUS_CSW_german_advisors_flag
		}
		GER = {
			country_event = {
				id = NSB_soviet_civil_war_common.109
				hours = 1
			}
		}
	}

	# Equipment from Germany
	IF = { 
		limit = { 
			has_country_flag = RUS_CSW_baku_oil_flag 
		}
		IF = {
			limit = {
				NOT = {
					has_dlc = "No Step Back"
				}
			}
			add_equipment_to_stockpile = { type = light_tank_equipment_2 amount = 100 producer = GER }
		}
		ELSE = { 
			add_equipment_to_stockpile = { type = light_tank_chassis_2 amount = 100 producer = GER variant_name = "Panzer II Ausf. a" } 
		}
		add_equipment_to_stockpile = { type = infantry_equipment_0 amount = 200 producer = GER }
	}




	# German Ukrainian Insurrection
	IF = {
		limit = {
			has_country_flag = RUS_CSW_ukraine_germany_ready_flag
		}
		country_event = {
			id = NSB_soviet_civil_war_common.114
			hours = 1
		}
	}

	# Adding weapons for trotsky
	for_each_loop = {
		array = BWR.many_weapons_array
		value = weapons_country
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = 200
			producer = var:weapons_country
		}
	}
	for_each_loop = {
		array = BWR.few_weapons_array
		value = weapons_country
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = 50
			producer = var:weapons_country
		}
	}
}

#######################
### COUNTRY LEADERS ###
#######################









# Start creating HQ for Civil war


# Define state as controlled for Civil War


# Start aligning state for Civil War













####### Change stuff based on ideology #######

RUS_replace_stuff_based_on_ideology_effect = {
	### FIVE YEAR PLANS
	if = {
		limit = {
			NOT = { has_government = communism }
		}
		if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_third_five_year_plan_dynamic_modifier }
			}
			remove_dynamic_modifier = { modifier = RUS_third_five_year_plan_dynamic_modifier }
			add_dynamic_modifier = { modifier = RUS_third_five_year_plan_dynamic_modifier_alt }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_third_five_year_plan_civilian_dynamic_modifier }
			}
			remove_dynamic_modifier = { modifier = RUS_third_five_year_plan_civilian_dynamic_modifier }
			add_dynamic_modifier = { modifier = RUS_third_five_year_plan_civilian_dynamic_modifier_alt }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_third_five_year_plan_military_dynamic_modifier }
			}
			remove_dynamic_modifier = { modifier = RUS_third_five_year_plan_military_dynamic_modifier }
			add_dynamic_modifier = { modifier = RUS_third_five_year_plan_military_dynamic_modifier_alt }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_fourth_five_year_plan_dynamic_modifier }
			}
			remove_dynamic_modifier = { modifier = RUS_fourth_five_year_plan_dynamic_modifier }
			add_dynamic_modifier = { modifier = RUS_fourth_five_year_plan_dynamic_modifier_alt }
		}
	}
	else = {
		if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_third_five_year_plan_dynamic_modifier_alt }
			}
			remove_dynamic_modifier = { modifier = RUS_third_five_year_plan_dynamic_modifier_alt }
			add_dynamic_modifier = { modifier = RUS_third_five_year_plan_dynamic_modifier }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_third_five_year_plan_civilian_dynamic_modifier_alt }
			}
			remove_dynamic_modifier = { modifier = RUS_third_five_year_plan_civilian_dynamic_modifier_alt }
			add_dynamic_modifier = { modifier = RUS_third_five_year_plan_civilian_dynamic_modifier }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_third_five_year_plan_military_dynamic_modifier_alt }
			}
			remove_dynamic_modifier = { modifier = RUS_third_five_year_plan_military_dynamic_modifier_alt }
			add_dynamic_modifier = { modifier = RUS_third_five_year_plan_military_dynamic_modifier }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_fourth_five_year_plan_dynamic_modifier_alt }
			}
			remove_dynamic_modifier = { modifier = RUS_fourth_five_year_plan_dynamic_modifier_alt }
			add_dynamic_modifier = { modifier = RUS_fourth_five_year_plan_dynamic_modifier }
		}
	}

	### USSR ACADEMIES OF SCIENCES
	if = { #IS NOT COMMIE -> ADD ALT STUFF
		limit = {
			NOT = { has_government = communism }
		}
		if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_ussr_academy_of_sciences_dynamic_modifier }
			}
			remove_dynamic_modifier = { modifier = RUS_ussr_academy_of_sciences_dynamic_modifier }
			add_dynamic_modifier = { modifier = RUS_ussr_academy_of_sciences_dynamic_modifier_alt }
		}
	}
	else = { #IS COMMIE -> ADD REGULAR STUFF
		if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_ussr_academy_of_sciences_dynamic_modifier_alt }
			}
			remove_dynamic_modifier = { modifier = RUS_ussr_academy_of_sciences_dynamic_modifier_alt }
			add_dynamic_modifier = { modifier = RUS_ussr_academy_of_sciences_dynamic_modifier }
		}
	}

	### RUSIET AIRFORCE
	if = { #IS NOT COMMIE -> ADD ALT STUFF
		limit = {
			NOT = { has_government = communism }
		}
		if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_soviet_airforce_dynamic_modifier }
			}
			remove_dynamic_modifier = { modifier = RUS_soviet_airforce_dynamic_modifier }
			add_dynamic_modifier = { modifier = RUS_soviet_airforce_dynamic_modifier_alt }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_soviet_airforce_aircraft_production_focus_dynamic_modifier }
			}
			remove_dynamic_modifier = { modifier = RUS_soviet_airforce_aircraft_production_focus_dynamic_modifier }
			add_dynamic_modifier = { modifier = RUS_soviet_airforce_aircraft_production_focus_dynamic_modifier_alt }
		}
	}
	else = { #IS COMMIE -> ADD REGULAR STUFF
		if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_soviet_airforce_dynamic_modifier_alt }
			}
			remove_dynamic_modifier = { modifier = RUS_soviet_airforce_dynamic_modifier_alt }
			add_dynamic_modifier = { modifier = RUS_soviet_airforce_dynamic_modifier }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_soviet_airforce_aircraft_production_focus_dynamic_modifier_alt }
			}
			remove_dynamic_modifier = { modifier = RUS_soviet_airforce_aircraft_production_focus_dynamic_modifier_alt }
			add_dynamic_modifier = { modifier = RUS_soviet_airforce_aircraft_production_focus_dynamic_modifier }
		}
	}

	### THE RED FLEET
	if = { #IS NOT COMMIE -> ADD ALT STUFF
		limit = {
			NOT = { has_government = communism }
		}
		if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_the_red_fleet_dynamic_modifier }
			}
			remove_dynamic_modifier = { modifier = RUS_the_red_fleet_dynamic_modifier }
			add_dynamic_modifier = { modifier = RUS_the_red_fleet_dynamic_modifier_alt }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_the_red_fleet_surface_1_dynamic_modifier }
			}
			remove_dynamic_modifier = { modifier = RUS_the_red_fleet_surface_1_dynamic_modifier }
			add_dynamic_modifier = { modifier = RUS_the_red_fleet_surface_1_dynamic_modifier_alt }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_the_red_fleet_surface_2_dynamic_modifier }
			}
			remove_dynamic_modifier = { modifier = RUS_the_red_fleet_surface_2_dynamic_modifier }
			add_dynamic_modifier = { modifier = RUS_the_red_fleet_surface_2_dynamic_modifier_alt }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_the_red_fleet_submarine_1_dynamic_modifier }
			}
			remove_dynamic_modifier = { modifier = RUS_the_red_fleet_submarine_1_dynamic_modifier }
			add_dynamic_modifier = { modifier = RUS_the_red_fleet_submarine_1_dynamic_modifier_alt }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_the_red_fleet_submarine_2_dynamic_modifier }
			}
			remove_dynamic_modifier = { modifier = RUS_the_red_fleet_submarine_2_dynamic_modifier }
			add_dynamic_modifier = { modifier = RUS_the_red_fleet_submarine_2_dynamic_modifier_alt }
		}
	}
	else = { #IS COMMIE -> ADD REGULAR STUFF
		if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_the_red_fleet_dynamic_modifier_alt }
			}
			remove_dynamic_modifier = { modifier = RUS_the_red_fleet_dynamic_modifier_alt }
			add_dynamic_modifier = { modifier = RUS_the_red_fleet_dynamic_modifier }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_the_red_fleet_surface_1_dynamic_modifier_alt }
			}
			remove_dynamic_modifier = { modifier = RUS_the_red_fleet_surface_1_dynamic_modifier_alt }
			add_dynamic_modifier = { modifier = RUS_the_red_fleet_surface_1_dynamic_modifier }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_the_red_fleet_surface_2_dynamic_modifier_alt }
			}
			remove_dynamic_modifier = { modifier = RUS_the_red_fleet_surface_2_dynamic_modifier_alt }
			add_dynamic_modifier = { modifier = RUS_the_red_fleet_surface_2_dynamic_modifier }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_the_red_fleet_submarine_1_dynamic_modifier_alt }
			}
			remove_dynamic_modifier = { modifier = RUS_the_red_fleet_submarine_1_dynamic_modifier_alt }
			add_dynamic_modifier = { modifier = RUS_the_red_fleet_submarine_1_dynamic_modifier }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_the_red_fleet_submarine_2_dynamic_modifier_alt }
			}
			remove_dynamic_modifier = { modifier = RUS_the_red_fleet_submarine_2_dynamic_modifier_alt }
			add_dynamic_modifier = { modifier = RUS_the_red_fleet_submarine_2_dynamic_modifier }
		}
	}

	### THE RED ARMY
	if = { #IS NOT COMMIE -> ADD ALT STUFF
		limit = {
			NOT = { has_government = communism }
		}
		if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_the_red_army_dynamic_modifier }
			}
			remove_dynamic_modifier = { modifier = RUS_the_red_army_dynamic_modifier }
			add_dynamic_modifier = { modifier = RUS_the_red_army_dynamic_modifier_alt }
		}
	}
	else = { #IS COMMIE -> ADD REGULAR STUFF
		if = {
			limit = {
				has_dynamic_modifier = { modifier = RUS_the_red_army_dynamic_modifier_alt }
			}
			remove_dynamic_modifier = { modifier = RUS_the_red_army_dynamic_modifier_alt }
			add_dynamic_modifier = { modifier = RUS_the_red_army_dynamic_modifier }
		}
	}
}